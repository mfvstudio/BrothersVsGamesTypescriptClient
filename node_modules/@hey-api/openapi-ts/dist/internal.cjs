'use strict';var Wt=require('path'),c12=require('c12'),x=require('typescript'),os$1=require('os'),qo=require('fs'),url=require('url'),mn=require('ansi-colors'),jsonSchemaRefParser=require('@hey-api/json-schema-ref-parser');var _documentCurrentScript=typeof document!=='undefined'?document.currentScript:null;function _interopDefault(e){return e&&e.__esModule?e:{default:e}}var Wt__default=/*#__PURE__*/_interopDefault(Wt);var x__default=/*#__PURE__*/_interopDefault(x);var qo__default=/*#__PURE__*/_interopDefault(qo);var mn__default=/*#__PURE__*/_interopDefault(mn);var Ie="client",te=e=>{let t=j(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},j=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?.tags?.includes("client"))return r}return {config:{name:""},name:""}};var Fs,T=()=>{let e=Fs,t=j(e);return e.client=t,e},Ls=e=>(Fs=e,T()),_=e=>j(e).name.startsWith("legacy/"),Ot=e=>{if(_(e))return e.name};var ar={enabled:false,interval:1e3,timeout:6e4},Ds=e=>{let t={...ar};return typeof e.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},Vs=e=>{let t={path:"",watch:ar};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path!==void 0||e.input.organization!==void 0)?(t={...t,path:"https://get.heyapi.dev",...e.input},t.watch!==void 0&&(t.watch=Ds(t))):t={...t,path:e.input},e.watch!==void 0&&t.watch.enabled===ar.enabled&&t.watch.interval===ar.interval&&t.watch.timeout===ar.timeout&&(t.watch=Ds({path:t.path,watch:e.watch})),t};var _s=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var mp=(e,t)=>({...e||{},...t||{}}),zn=(e,t)=>{let r=e||{},n=t||{},o={...r,...n};return typeof o.logs=="object"&&(o.logs=mp(r.logs,n.logs)),o};var Ks=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t};var pr=(e,t)=>{for(let[r,n]of Object.entries(t))n!==void 0&&n!==""&&(e[r]=n);return e},St=({defaultValue:e,mappers:t,value:r})=>{let n={...e};switch(typeof r){case "boolean":if(t&&"boolean"in t){let o=t.boolean;n=pr(n,o(r));}break;case "number":if(t&&"number"in t){let o=t.number;n=pr(n,o(r));}break;case "string":if(t&&"string"in t){let o=t.string;n=pr(n,o(r));}break;case "object":if(r!==null)if(t&&"object"in t&&typeof t.object=="function"){let o=t.object;n=pr(n,o(r));}else n=pr(n,r);break}return n};var fp=["after","before","cursor","offset","page","start"],Bs=e=>{let t={...e.parser,pagination:{keywords:fp},transforms:{enums:{case:"PascalCase",enabled:false,mode:"root",name:"{{name}}Enum"},readWrite:{enabled:true,requests:{case:"preserve",name:"{{name}}Writable"},responses:{case:"preserve",name:"{{name}}"}}},validate_EXPERIMENTAL:false};return e.parser&&(e.parser.pagination?.keywords&&(t.pagination.keywords=e.parser.pagination.keywords),e.parser.transforms&&(e.parser.transforms.enums!==void 0&&(t.transforms.enums=St({defaultValue:{...t.transforms.enums,enabled:!!e.parser.transforms.enums},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.parser.transforms.enums})),e.parser.transforms.readWrite!==void 0&&(t.transforms.readWrite=St({defaultValue:{...t.transforms.readWrite,enabled:!!e.parser.transforms.readWrite},mappers:{boolean:r=>({enabled:r}),object:r=>({...r,requests:St({defaultValue:t.transforms.readWrite.requests,mappers:{string:n=>({name:n})},value:r.requests}),responses:St({defaultValue:t.transforms.readWrite.responses,mappers:{string:n=>({name:n})},value:r.responses})})},value:e.parser.transforms.readWrite}))),e.parser.validate_EXPERIMENTAL&&(t.validate_EXPERIMENTAL=e.parser.validate_EXPERIMENTAL===true?"warn":e.parser.validate_EXPERIMENTAL)),t};var st={baseUrl:true,bundle:true,exportFromIndex:false},ot={dependencies:["@hey-api/typescript"],output:"client",tags:["client"]};var Lt=/^[^$_\p{ID_Start}]+/u,ae=/^-?\d+(\.\d+)?$/,Ws=/^(document|history|location|navigator|window)$/g,Hs=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,pe=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,Us=/^(global|process|Buffer)$/g,zs=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,xe=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var Ue=e=>(e||e==="")&&(xe.lastIndex=0,!xe.test(e))?`'${e}'`:e,cr=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,F=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>os$1.EOL+r.trim());var up=x__default.default.createPrinter({newLine:x__default.default.NewLineKind.LineFeed,removeComments:false}),Qs=e=>x__default.default.createSourceFile("",e,x__default.default.ScriptTarget.ESNext,false,x__default.default.ScriptKind.TS),dp=Qs(""),yp=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function Ae({node:e,unescape:t=false}){let r=up.printNode(x__default.default.EmitHint.Unspecified,e,dp);if(!t)return r;try{return yp(r)}catch{return T().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}function Xs(e){return Qs(e).statements[0]}var O=({text:e})=>x__default.default.factory.createIdentifier(e),Js=()=>x__default.default.factory.createThis(),V=({keyword:e})=>{let t=Qn({keyword:e});return x__default.default.factory.createModifier(t)},Gs=({initializer:e,modifier:t,name:r,type:n})=>x__default.default.factory.createPropertyDeclaration(t?[V({keyword:t})]:void 0,r,void 0,n,e),re={boolean:e=>e?x__default.default.factory.createTrue():x__default.default.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let n=O({text:r});if(e){let o=O({text:e});return x__default.default.factory.createExportSpecifier(t,n,o)}return x__default.default.factory.createExportSpecifier(t,void 0,n)},import:({alias:e,asType:t=false,name:r})=>{let n=O({text:r});if(e){let o=O({text:e});return x__default.default.factory.createImportSpecifier(t,n,o)}return x__default.default.factory.createImportSpecifier(t,void 0,n)},number:e=>e<0?x__default.default.factory.createPrefixUnaryExpression(x__default.default.SyntaxKind.MinusToken,x__default.default.factory.createNumericLiteral(Math.abs(e))):x__default.default.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=cr(r));let n=r.includes("'")&&r.includes('"'),o=r.includes(`
`),i=r.startsWith("`"),a=r.startsWith("\\`")&&r.endsWith("\\`");return (o||n||i)&&!a&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?O({text:r}):Tt({text:r})}},Rt=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",it=e=>e!==void 0,gp=({commentObject:e,node:t})=>{let r=e.lines.filter(a=>!!a||a==="");if(!r.length)return;if(!e.jsdoc){for(let a of r)x__default.default.addSyntheticLeadingComment(t,x__default.default.SyntaxKind.SingleLineCommentTrivia,` ${a}`,true);return}let n=r.map((a,p)=>{let c=a;return p!==r.length&&(c=`${c}
`),x__default.default.factory.createJSDocText(c)}),o=x__default.default.factory.createJSDocComment(x__default.default.factory.createNodeArray(n),void 0),i=Ae({node:o,unescape:true}).replace("/*","").replace("*  */","");x__default.default.addSyntheticLeadingComment(t,x__default.default.SyntaxKind.MultiLineCommentTrivia,i,true);},U=({comments:e=[],node:t})=>{let r=!!e.find(o=>typeof o=="object"&&o),n=e;r||(n=[{jsdoc:true,lines:e}]);for(let o of n)gp({commentObject:o,node:t});};var z=(e,t)=>x__default.default.isTypeNode(e)?e:typeof e=="number"?x__default.default.factory.createLiteralTypeNode(re.number(e)):ce({typeArguments:t?.map(r=>z(r)),typeName:e}),Xn=({expression:e,name:t})=>x__default.default.factory.createPropertyAccessChain(e,x__default.default.factory.createToken(x__default.default.SyntaxKind.QuestionDotToken),t),je=({expression:e,isOptional:t,name:r})=>{let n=typeof e=="string"?O({text:e}):e;if(t&&typeof r!="number")return Xn({expression:n,name:r});if(typeof r=="string"){if(xe.lastIndex=0,!xe.test(r)){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let i=O({text:r});return x__default.default.factory.createElementAccessExpression(n,i)}let o=O({text:r});return x__default.default.factory.createPropertyAccessExpression(n,o)}if(typeof r=="number"){let o=x__default.default.factory.createNumericLiteral(r);return x__default.default.factory.createElementAccessExpression(n,o)}return x__default.default.factory.createPropertyAccessExpression(n,r)},Jn=()=>x__default.default.factory.createNull(),Pe=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:n,value:o})=>{if(o===null)return Jn();if(Array.isArray(o))return Gn({elements:o});if(typeof o=="object")return Lr({identifiers:e,obj:o,shorthand:r});if(typeof o=="number")return re.number(o);if(typeof o=="boolean")return re.boolean(o);if(typeof o=="string"){if(t){let i=o.split(".");return je({expression:i[0],name:i[1]})}return re.string(o,n)}},mr=e=>e.map(t=>{if("destructure"in t)return Dt({name:x__default.default.factory.createObjectBindingPattern(t.destructure.map(n=>"destructure"in n?void 0:x__default.default.factory.createBindingElement(void 0,void 0,O({text:n.name}),void 0)).filter(Boolean)),type:t.type!==void 0?z(t.type):void 0});let r=t.accessLevel?[V({keyword:t.accessLevel})]:[];return t.isReadOnly&&r.push(V({keyword:"readonly"})),Dt({initializer:t.default!==void 0?Pe({value:t.default}):void 0,modifiers:r,name:O({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?z(t.type):void 0})}),Qn=({keyword:e})=>{switch(e){case "any":return x__default.default.SyntaxKind.AnyKeyword;case "async":return x__default.default.SyntaxKind.AsyncKeyword;case "boolean":return x__default.default.SyntaxKind.BooleanKeyword;case "export":return x__default.default.SyntaxKind.ExportKeyword;case "never":return x__default.default.SyntaxKind.NeverKeyword;case "number":return x__default.default.SyntaxKind.NumberKeyword;case "private":return x__default.default.SyntaxKind.PrivateKeyword;case "protected":return x__default.default.SyntaxKind.ProtectedKeyword;case "public":return x__default.default.SyntaxKind.PublicKeyword;case "readonly":return x__default.default.SyntaxKind.ReadonlyKeyword;case "static":return x__default.default.SyntaxKind.StaticKeyword;case "string":return x__default.default.SyntaxKind.StringKeyword;case "undefined":return x__default.default.SyntaxKind.UndefinedKeyword;case "unknown":return x__default.default.SyntaxKind.UnknownKeyword;case "void":return x__default.default.SyntaxKind.VoidKeyword;default:throw new Error(`unsupported syntax kind keyword "${e}"`)}},It=({keyword:e})=>{let t=Qn({keyword:e});return x__default.default.factory.createKeywordTypeNode(t)},fr=e=>e.map(t=>x__default.default.isTypeParameterDeclaration(t)?t:lr({constraint:t.extends?typeof t.extends=="string"?It({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?Rt(t.default)?t.default:x__default.default.factory.createLiteralTypeNode(t.default?x__default.default.factory.createTrue():x__default.default.factory.createFalse()):void 0,name:t.name})),Zs=({operator:e,type:t})=>{let r=e==="keyof"?x__default.default.SyntaxKind.KeyOfKeyword:e==="readonly"?x__default.default.SyntaxKind.ReadonlyKeyword:x__default.default.SyntaxKind.UniqueKeyword;return x__default.default.factory.createTypeOperatorNode(r,t)},lr=({constraint:e,defaultType:t,modifiers:r,name:n})=>x__default.default.factory.createTypeParameterDeclaration(r,n,e,t),Mr=({members:e,nameType:t,questionToken:r,readonlyToken:n,type:o,typeParameter:i})=>x__default.default.factory.createMappedTypeNode(n,i,t,r,o,e),Ys=({literal:e})=>x__default.default.factory.createLiteralTypeNode(e),Fr=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:o,statements:i=[],types:a=[]})=>{let p=x__default.default.factory.createArrowFunction(e?[V({keyword:"async"})]:void 0,a?fr(a):void 0,mr(n),o?z(o):void 0,void 0,Array.isArray(i)?me({multiLine:r,statements:i}):i);return U({comments:t,node:p}),p},eo=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:o,statements:i=[],types:a=[]})=>{let p=x__default.default.factory.createFunctionExpression(e?[V({keyword:"async"})]:void 0,void 0,void 0,a?fr(a):void 0,mr(n),o?z(o):void 0,me({multiLine:r,statements:i}));return U({comments:t,node:p}),p},Gn=({elements:e,multiLine:t=false})=>x__default.default.factory.createArrayLiteralExpression(e.map(n=>Rt(n)?n:Pe({value:n})).filter(it),t||!Array.isArray(e[0])&&typeof e[0]=="object"),to=({expression:e})=>x__default.default.factory.createAwaitExpression(e),ro=({parameters:e=[],returnType:t,typeParameters:r})=>x__default.default.factory.createFunctionTypeNode(r,e,t),Lr=({comments:e,identifiers:t=[],multiLine:r=true,obj:n,shorthand:o,unescape:i=false})=>{let a=Array.isArray(n)?n.map(c=>{let m=false;if("key"in c){let{key:l}=c;m=l===c.value,(l.match(/^[0-9]/)&&l.match(/\D+/g)||l.match(/\W/g)||l==="")&&!l.startsWith("'")&&!l.endsWith("'")&&(c.key=`'${l}'`);}let f;if("spread"in c){let l=Rt(c.spread)?c.spread:O({text:c.spread});f=x__default.default.factory.createSpreadAssignment(c.assertion?dr({expression:l,type:typeof c.assertion=="string"?It({keyword:c.assertion}):c.assertion}):l);}else if(c.shorthand||o&&m)f=x__default.default.factory.createShorthandPropertyAssignment(c.value);else {let l=Rt(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?Lr({multiLine:r,obj:c.value,shorthand:o,unescape:i}):Pe({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:o,unescape:i,value:c.value});if(!l)return;t.includes(c.key)&&!x__default.default.isObjectLiteralExpression(l)&&(l=O({text:c.value})),f=qr({initializer:l,name:c.key});}return U({comments:c.comments,node:f}),f}).filter(it):Object.entries(n).map(([c,m])=>{let f=Pe({identifiers:t.includes(c)?Object.keys(m):[],shorthand:o,unescape:i,value:m});if(!f)return;t.includes(c)&&!x__default.default.isObjectLiteralExpression(f)&&(f=O({text:m}));let l=c===m;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),o&&l?x__default.default.factory.createShorthandPropertyAssignment(m):qr({initializer:f,name:c})}).filter(it),p=x__default.default.factory.createObjectLiteralExpression(a,r);return U({comments:e,node:p}),p},no=({comments:e={},leadingComment:t,name:r,obj:n})=>{let o=Array.isArray(n)?n.map(a=>{let p=xp({initializer:Pe({value:a.value}),name:a.key});return U({comments:a.comments,node:p}),p}):Object.entries(n).map(([a,p])=>{let c=x__default.default.factory.createEnumMember(a,Pe({unescape:true,value:p}));return U({comments:e[a],node:c}),c}),i=x__default.default.factory.createEnumDeclaration([V({keyword:"export"})],O({text:r}),o);return U({comments:t,node:i}),i},xp=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.includes("'")?r=Tt({isSingleQuote:false,text:r}):r=Ue(r)),x__default.default.factory.createEnumMember(r,e)},so=({name:e,statements:t})=>x__default.default.factory.createModuleDeclaration([V({keyword:"export"})],O({text:e}),x__default.default.factory.createModuleBlock(t),x__default.default.NodeFlags.Namespace),oo=({indexType:e,objectType:t})=>x__default.default.factory.createIndexedAccessTypeNode(t,e),Tt=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),x__default.default.factory.createStringLiteral(t,e)),io=({condition:e,whenFalse:t,whenTrue:r})=>x__default.default.factory.createConditionalExpression(e,x__default.default.factory.createToken(x__default.default.SyntaxKind.QuestionToken),r,x__default.default.factory.createToken(x__default.default.SyntaxKind.ColonToken),t),ao=({text:e})=>x__default.default.factory.createTypeOfExpression(O({text:e})),po=({comment:e,exportType:t,name:r,type:n,typeParameters:o=[]})=>{let i=x__default.default.factory.createTypeAliasDeclaration(t?[V({keyword:"export"})]:void 0,O({text:r}),fr(o),z(n));return U({comments:e,node:i}),i},ce=({typeArguments:e,typeName:t})=>x__default.default.factory.createTypeReferenceNode(t,e),co=({type:e})=>x__default.default.factory.createParenthesizedType(e),Dt=({initializer:e,modifiers:t,name:r,required:n=true,type:o})=>x__default.default.factory.createParameterDeclaration(t,void 0,r,n?void 0:x__default.default.factory.createToken(x__default.default.SyntaxKind.QuestionToken),o,e),ur=({argumentsArray:e,expression:t,typeArguments:r})=>x__default.default.factory.createNewExpression(t,r,e),mo=({awaitModifier:e,expression:t,initializer:r,statement:n})=>x__default.default.factory.createForOfStatement(e,r,t,n),fo=({left:e,right:t})=>x__default.default.factory.createAssignment(e,t),me=({multiLine:e=true,statements:t})=>x__default.default.factory.createBlock(t,e),qr=({initializer:e,name:t})=>x__default.default.factory.createPropertyAssignment(t,e),lo=({flags:e=[],text:t})=>{let r=t.startsWith("/")&&t.endsWith("/")?t:`/${t}/`;return x__default.default.factory.createRegularExpressionLiteral(`${r}${e.join("")}`)},dr=({expression:e,type:t})=>x__default.default.factory.createAsExpression(e,t),uo=({value:e})=>{let t=[],r="";for(let o of e.slice(0).reverse())if(typeof o=="string")r=`${o}${r}`;else {let i=t.length?x__default.default.factory.createTemplateMiddle(r):x__default.default.factory.createTemplateTail(r),a=x__default.default.factory.createTemplateLiteralTypeSpan(o,i);t.push(a),r="";}return x__default.default.factory.createTemplateLiteralType(x__default.default.factory.createTemplateHead(r),t.reverse())};var yo=({module:e})=>x__default.default.factory.createExportDeclaration(void 0,false,void 0,re.string(e)),Ce=({functionName:e,parameters:t=[],types:r})=>{let n=typeof e=="string"?O({text:e}):e,o=t.filter(a=>a!==void 0).map(a=>typeof a=="string"?O({text:a}):a);return x__default.default.factory.createCallExpression(n,r,o)},go=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(c=>typeof c!="object"||!c.asType),o=r.map(c=>{let m=typeof c=="string"?{name:c}:c;return re.export({alias:m.alias,asType:n&&m.asType,name:m.name})}),i=x__default.default.factory.createNamedExports(o),a=re.string(t);return x__default.default.factory.createExportDeclaration(void 0,!n,i,a)},ho=({assertion:e,comment:t,destructure:r,exportConst:n,expression:o,name:i,typeName:a})=>{let p=e?dr({expression:o,type:typeof e=="string"?ce({typeName:e}):e}):o,c=O({text:i}),m=x__default.default.factory.createVariableDeclaration(r?x__default.default.factory.createObjectBindingPattern([x__default.default.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,a?typeof a=="string"?ce({typeName:a}):a:void 0,p),f=x__default.default.factory.createVariableStatement(n?[V({keyword:"export"})]:void 0,x__default.default.factory.createVariableDeclarationList([m],x__default.default.NodeFlags.Const));return U({comments:t,node:f}),f},xo=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(f=>typeof f!="object"||!f.asType),o,i=[];r.forEach(f=>{let l=typeof f=="string"?{name:f}:f;l.name==="*"&&l.alias?o=l:i.push(re.import({alias:l.alias,asType:n&&l.asType,name:l.name}));});let a=o?x__default.default.factory.createNamespaceImport(O({text:o.alias})):x__default.default.factory.createNamedImports(i),p=x__default.default.factory.createImportClause(!n,void 0,a),c=re.string(t);return x__default.default.factory.createImportDeclaration(void 0,p,c)};var bo=({accessLevel:e,comment:t,multiLine:r=true,parameters:n=[],statements:o=[]})=>{let i=e?[V({keyword:e})]:void 0,a=x__default.default.factory.createConstructorDeclaration(i,mr(n),me({multiLine:r,statements:o}));return U({comments:t,node:a}),a},Oo=({accessLevel:e,comment:t,isStatic:r=false,multiLine:n=true,name:o,parameters:i=[],returnType:a,statements:p=[],types:c=[]})=>{let m=e?[V({keyword:e})]:[];r&&m.push(V({keyword:"static"}));let f=x__default.default.factory.createMethodDeclaration(m,void 0,O({text:o}),void 0,c?fr(c):void 0,mr(i),a?z(a):void 0,me({multiLine:n,statements:p}));return U({comments:t,node:f}),f},So=({decorator:e,exportClass:t,extendedClasses:r,name:n,nodes:o})=>{let i=[];t&&i.push(V({keyword:"export"})),e&&i.unshift(x__default.default.factory.createDecorator(Ce({functionName:e.name,parameters:e.args.map(p=>Pe({value:p})).filter(it)})));let a=[];if(r)for(let p of r)a.push(x__default.default.factory.createHeritageClause(x__default.default.SyntaxKind.ExtendsKeyword,[x__default.default.factory.createExpressionWithTypeArguments(O({text:p}),void 0)]));return x__default.default.factory.createClassDeclaration(i,O({text:n}),void 0,a,o)};var Pt=({expression:e})=>x__default.default.factory.createExpressionStatement(e);var Dr=({expression:e})=>x__default.default.factory.createReturnStatement(e),To=({args:e=[],name:t,types:r=[]})=>{let n=r.map(p=>ce({typeName:p})),o=e.map(p=>x__default.default.isExpression(p)?p:O({text:p})).filter(it),i=Ce({functionName:t,parameters:o,types:n});return Dr({expression:i})},Io=({expression:e})=>Dr({expression:typeof e=="string"?O({text:e}):e});var Vt=e=>e.slice(1).reduce((t,r)=>(xe.lastIndex=0,xe.test(r)?Xn({expression:t,name:r}):x__default.default.factory.createElementAccessChain(t,x__default.default.factory.createToken(x__default.default.SyntaxKind.QuestionDotToken),O({text:r}))),O({text:e[0]})),Vr=e=>e.slice(1).reduce((t,r)=>je({expression:t,name:r}),O({text:e[0]})),Ao=({expressions:e})=>e.reduce((r,n)=>je({expression:r,name:n})),_r=({left:e,operator:t="=",right:r})=>x__default.default.factory.createBinaryExpression(e,t==="="?x__default.default.SyntaxKind.EqualsToken:t==="==="?x__default.default.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?x__default.default.SyntaxKind.QuestionQuestionToken:x__default.default.SyntaxKind.InKeyword,typeof r=="string"?O({text:r}):r),_t=({elseStatement:e,expression:t,thenStatement:r})=>x__default.default.factory.createIfStatement(t,r,e),Po=({path:e})=>{let t=Vt(e),r=Vr(e),n=me({statements:[Pt({expression:_r({left:r,right:ur({argumentsArray:[r],expression:O({text:"Date"})})})})]});return _t({expression:t,thenStatement:n})},jo=({path:e,transformerName:t})=>{let r=Vt(e),n=Vr(e),o=me({statements:[Pt({expression:Ce({functionName:t,parameters:[n]})})]});return [_t({expression:r,thenStatement:o})]},Co=({path:e,transformerName:t})=>{let r=Vt(e),n=Vr(e);return _t({expression:Ce({functionName:je({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:me({statements:[Pt({expression:x__default.default.factory.createCallChain(je({expression:n,name:"forEach"}),void 0,void 0,[O({text:t})])})]})})},ko=({parameterName:e})=>{let t=O({text:"Date"});return ur({argumentsArray:[O({text:e})],expression:t})},Eo=({path:e,transformExpression:t})=>{let r=Vt(e),n=Vr(e);return _t({expression:Ce({functionName:je({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:me({statements:[Pt({expression:_r({left:n,right:x__default.default.factory.createCallChain(je({expression:n,name:"map"}),void 0,void 0,[Fr({parameters:[{name:"item"}],statements:t})])})})]})})};var Pp=ce({typeName:"null"}),Kt=({isNullable:e,node:t})=>e?x__default.default.factory.createUnionTypeNode([t,Pp]):t,Zn=({indexKey:e,indexProperty:t,isNullable:r,properties:n,useLegacyResolution:o})=>{let a=n.map(m=>{let f=m.isReadOnly?[V({keyword:"readonly"})]:void 0,l=m.isRequired!==false?void 0:x__default.default.factory.createToken(x__default.default.SyntaxKind.QuestionToken),u=z(m.type);let d=x__default.default.factory.createPropertySignature(f,o||typeof m.name=="string"&&m.name.match(xe)||typeof m.name!="string"&&x__default.default.isPropertyName(m.name)?m.name:Tt({text:m.name}),l,u);return U({comments:m.comment,node:d}),d}),p=false;if(t)if(!n.length&&e){let m=Mr({questionToken:x__default.default.factory.createToken(x__default.default.SyntaxKind.QuestionToken),type:t.type??It({keyword:"string"}),typeParameter:lr({constraint:ce({typeName:e}),name:O({text:String(t.name)})})});a.push(m),p=true;}else {let m=t.isReadOnly?[V({keyword:"readonly"})]:void 0,f=x__default.default.factory.createIndexSignature(m,[Dt({name:O({text:String(t.name)}),type:It({keyword:"string"})})],z(t.type));a.push(f);}let c=p?a[0]:x__default.default.factory.createTypeLiteralNode(a);return Kt({isNullable:r,node:c})},yr=({isNullable:e,types:t})=>{let r=t.map(o=>z(o)),n=x__default.default.factory.createUnionTypeNode(r);return Kt({isNullable:e,node:n})},No=({isNullable:e,types:t})=>{let r=t.map(o=>z(o)),n=x__default.default.factory.createIntersectionTypeNode(r);return Kt({isNullable:e,node:n})},vo=({isNullable:e=false,types:t})=>{let r=t.map(o=>z(o)),n=x__default.default.factory.createTupleTypeNode(r);return Kt({isNullable:e,node:n})},wo=(e,t,r=false,n=true)=>{let o=yr({types:e}),i=yr({types:t}),a=Zn({properties:[{name:`[key: ${Ae({node:o,unescape:true})}]`,type:i}],useLegacyResolution:n});return Kt({isNullable:r,node:a})},$o=(e,t=false)=>{let r=ce({typeArguments:[Array.isArray(e)?yr({types:e}):e],typeName:"Array"});return Kt({isNullable:t,node:r})};var s={anonymousFunction:eo,arrayLiteralExpression:Gn,arrowFunction:Fr,asExpression:dr,assignment:fo,awaitExpression:to,binaryExpression:_r,block:me,callExpression:Ce,classDeclaration:So,conditionalExpression:io,constVariable:ho,constructorDeclaration:bo,enumDeclaration:no,exportAllDeclaration:yo,exportNamedDeclaration:go,expressionToStatement:Pt,forOfStatement:mo,functionTypeNode:ro,identifier:O,ifStatement:_t,indexedAccessTypeNode:oo,isTsNode:Rt,keywordTypeNode:It,literalTypeNode:Ys,mappedTypeNode:Mr,methodDeclaration:Oo,namedImportDeclarations:xo,namespaceDeclaration:so,newExpression:ur,nodeToString:Ae,null:Jn,objectExpression:Lr,ots:re,parameterDeclaration:Dt,propertyAccessExpression:je,propertyAccessExpressions:Ao,propertyAssignment:qr,propertyDeclaration:Gs,regularExpressionLiteral:lo,returnFunctionCall:To,returnStatement:Dr,returnVariable:Io,safeAccessExpression:Vt,stringLiteral:Tt,stringToTsNodes:Xs,templateLiteralType:uo,this:Js,transformArrayMap:Eo,transformArrayMutation:Co,transformDateMutation:Po,transformFunctionMutation:jo,transformNewDate:ko,typeAliasDeclaration:po,typeArrayNode:$o,typeInterfaceNode:Zn,typeIntersectionNode:No,typeNode:z,typeOfExpression:ao,typeOperatorNode:Zs,typeParameterDeclaration:lr,typeParenthesizedNode:co,typeRecordNode:wo,typeReferenceNode:ce,typeTupleNode:vo,typeUnionNode:yr,valueToExpression:Pe};var Kr=e=>{qo__default.default.existsSync(e)||qo__default.default.mkdirSync(e,{recursive:true});};var Bt=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var kp=url.fileURLToPath((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (_documentCurrentScript && _documentCurrentScript.tagName.toUpperCase() === 'SCRIPT' && _documentCurrentScript.src || new URL('internal.cjs', document.baseURI).href)));Wt__default.default.dirname(kp);var Ep=e=>{let t=e.split(Wt__default.default.sep);return t.slice(0,t.length-1).join(Wt__default.default.sep)},K=({config:e,sourceOutput:t})=>{let r=j(e);if("bundle"in r.config&&r.config.bundle)return Bt({moduleOutput:"client",sourceOutput:t});if(Wt__default.default.isAbsolute(r.name)){let n=Ep(r.name),o=Wt__default.default.resolve(e.output.path);return Wt__default.default.relative(o,n).replace(/\\/g,"/")}return r.name},D={Options:{asType:true,name:"Options"},OptionsLegacyParser:{asType:true,name:"OptionsLegacyParser"}};var Mo=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,ke=e=>{let t={host:"",path:"",port:"",protocol:""};Mo.lastIndex=0;let r=e.match(Mo);if(!r)return t;let n=r[5]||"";if(n==="."||n==="..")return t;let o=r[8]||"",i=r[2]||"";return i.length===1?t:{host:n,path:o==="/"?"":o,port:r[7]||"",protocol:i}};var Np=/~1/g,vp=/~0/g,Ht="#/ir/",Br=e=>{let t=Oe(e);return t.length===3&&t[0]==="components"},Q=e=>{let t=Oe(e),r=t[t.length-1];return decodeURI(r)},wp=e=>String(e).replace(/~/g,"~0").replace(/\//g,"~1"),Oe=e=>{let t=e.trim();return t.startsWith("#")&&(t=t.slice(1)),t.startsWith("/")&&(t=t.slice(1)),t?t.split("/").map(r=>r.replace(Np,"/").replace(vp,"~")):[]},Fo=e=>{let t=e.trim();return t.startsWith("#")||(t=`#${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1)),t=t.replace(/\/+/g,"/"),t},Lo=e=>{let t=e.map(wp).join("/");return "#"+(t?`/${t}`:"")},Yn=({$ref:e,spec:t})=>{let r=Oe(decodeURI(e)),n=t;for(let o of r){let i=o;if(n[i]===void 0)throw new Error(`Reference not found: ${e}`);n=n[i];}return n};var Do=/[\p{Lu}]/u,es=/[\p{Ll}]/u,_o=/([\p{Alpha}\p{N}_]|$)/u,Ut=/[_.\- `\\[\]{}\\/]+/,$p=new RegExp(`^${Ut.source}`),ts=new RegExp(`${Ut.source}${_o.source}`,"gu"),Vo=new RegExp(`\\d+${_o.source}`,"gu"),qp=({case:e,string:t})=>{let r=false,n=false,o=false,i=false,a=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let p=0;p<t.length;p++){let c=t[p];i=p>2?t[p-3]===a:true;let m=p+1,f=t[m];for(Ut.lastIndex=0;f&&Ut.test(f);)m+=1,f=t[m];let l=m!==p+1;if(es.lastIndex=0,Do.lastIndex=0,Do.test(c)&&(r||f&&!l&&f!=="s"&&es.test(f)))t=`${t.slice(0,p)}${a}${t.slice(p)}`,p++,o=n,r=false,n=true;else if(n&&o&&es.test(c)&&!i&&!(c==="s"&&(!f||f.toLocaleLowerCase()!==f)))t=`${t.slice(0,p-1)}${a}${t.slice(p-1)}`,o=n,r=true,n=false;else {let u=c.toLocaleLowerCase(),d=c.toLocaleUpperCase();o=n,r=u===c&&d!==c,n=d===c&&u!==c;}}return t},A=({case:e,stripLeadingSeparators:t=true,value:r})=>{let n=r.trim();return n.length?!e||e==="preserve"?n:n.length===1?(Ut.lastIndex=0,Ut.test(n)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase()):(n!==n.toLocaleLowerCase()&&(n=qp({case:e,string:n})),(t||n[0]!==r[0])&&(n=n.replace($p,"")),n=e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase(),e==="PascalCase"&&(n=`${n.charAt(0).toLocaleUpperCase()}${n.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(n=n.replaceAll(ts,(i,a,p)=>p===0&&!t?i:`_${a}`),n[n.length-1]==="_"&&(n=n.slice(0,n.length-1))):(ts.lastIndex=0,Vo.lastIndex=0,n=n.replaceAll(Vo,(i,a,p)=>["_","-","."].includes(n.charAt(p+i.length))?i:i.toLocaleUpperCase()),n=n.replaceAll(ts,(i,a,p)=>p===0&&!t&&i[0]&&r.startsWith(i[0])?i:a.toLocaleUpperCase())),n):""};var Y=({case:e="PascalCase",config:t,id:r,parameterId:n,type:o})=>{let i="";switch(o){case "data":case "error":case "errors":case "parameter":case "response":case "responses":i=`${(o[0]??"").toLocaleUpperCase()}${o.slice(1)}`;break}let a=true;t.plugins["@hey-api/typescript"]?.config.case==="preserve"&&(a=false);let p=a?"-":"",c=[Ht,A({case:e,value:r}),p,i];return n&&c.push(p,A({case:e,value:n})),c.join("")};var P="types";function Mp(e,t){return {...e,get name(){return t?.(e),e.name}}}var Se=({context:e,file:t,operation:r,type:n})=>{let o=e.file({id:P}).identifier({$ref:Y({config:e.config,id:r.id,type:n}),namespace:"type"});return Mp(o,i=>{i.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:P}),name:i.name});})};var Fp=({plugin:e})=>{let{baseUrl:t}=e.config;if(t===false)return;if(typeof t=="string")return t;let{servers:r}=e.context.ir;if(r)return r[typeof t=="number"?t:0]?.url},Ko=({plugin:e})=>{let t=e.context.file({id:Ie}),r=K({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({module:r,name:"createClient"}),o=t.import({module:r,name:"createConfig"}),i=t.import({asType:true,module:t.relativePathToFile({context:e.context,id:P}),name:"ClientOptions"}),a=e.config.runtimeConfigPath?t.import({module:t.relativePathToFile({context:e.context,id:e.config.runtimeConfigPath}),name:"createClientConfig"}):void 0,p=[],c=Fp({plugin:e});if(c){let l=ke(c);if(l.protocol&&l.host&&!c.includes("{"))p.push({key:te(e.context.config),value:c});else if(c!=="/"&&c.startsWith("/")){let u=c.endsWith("/")?c.slice(0,-1):c;p.push({key:te(e.context.config),value:u});}}"throwOnError"in e.config&&e.config.throwOnError&&p.push({key:"throwOnError",value:true});let m=[s.callExpression({functionName:o.name,parameters:p.length?[s.objectExpression({obj:p})]:void 0,types:[s.typeReferenceNode({typeName:i.name})]})],f=s.constVariable({exportConst:true,expression:s.callExpression({functionName:n.name,parameters:a?[s.callExpression({functionName:a.name,parameters:m})]:m}),name:"client"});t.add(f);};var Bo=({plugin:e})=>{let t=e.context.file({id:Ie}),r=K({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({asType:true,module:t.relativePathToFile({context:e.context,id:P}),name:"ClientOptions"}),o=t.import({asType:true,module:r,name:"Config"}),i=t.import({alias:"DefaultClientOptions",asType:true,module:r,name:"ClientOptions"}),a=s.typeReferenceNode({typeName:i.name}),p=s.typeReferenceNode({typeName:"T"}),c=s.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:"CreateClientConfig",type:s.functionTypeNode({parameters:[s.parameterDeclaration({name:"override",required:false,type:s.typeReferenceNode({typeArguments:[s.typeIntersectionNode({types:[a,p]})],typeName:o.name})})],returnType:s.typeReferenceNode({typeArguments:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeArguments:[a],typeName:"Required"}),p]})],typeName:o.name})}),typeParameters:[{default:s.typeReferenceNode({typeName:n.name}),extends:a,name:"T"}]});t.add(c);};var at=({plugin:e})=>{e.createFile({id:Ie,path:e.output}),Bo({plugin:e}),Ko({plugin:e});};var Wr={...ot,config:{...st,throwOnError:false},handler:at,name:"@hey-api/client-axios"};var Hr={...ot,config:{...st,throwOnError:false},handler:at,name:"@hey-api/client-fetch"};var Ur={...ot,config:{...st,throwOnError:false},handler:at,name:"@hey-api/client-next"};var zr={...ot,config:st,handler:at,name:"@hey-api/client-nuxt"};var Qr={config:{},handler:()=>{},name:"legacy/angular",output:"client",tags:["client"]};var Xr={config:{},handler:()=>{},name:"legacy/axios",output:"client",tags:["client"]};var Jr={config:{},handler:()=>{},name:"legacy/fetch",output:"client",tags:["client"]};var Gr={config:{},handler:()=>{},name:"legacy/node",output:"client",tags:["client"]};var Zr={config:{},handler:()=>{},name:"legacy/xhr",output:"client",tags:["client"]};var zp=[pe,zs,Hs,Us,Ws],Yr=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(Lt.lastIndex=0,Lt.test(t))return `_${t}`;for(let r of zp){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var en="schemas",rs=({plugin:e,schema:t})=>{e.config.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},zt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>zt({context:e,plugin:t,schema:o}));let n=structuredClone(r);if(n.$ref)return n.$ref=decodeURI(n.$ref),n;if(rs({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=zt({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>zt({context:e,plugin:t,schema:o}))),n.items&&(n.items=zt({context:e,plugin:t,schema:n.items})),n.properties)for(let o in n.properties){let i=n.properties[o];typeof i!="boolean"&&(n.properties[o]=zt({context:e,plugin:t,schema:i}));}return n},pt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>pt({context:e,plugin:t,schema:o}));let n=structuredClone(r);if("$ref"in n)return n.$ref=decodeURI(n.$ref),n;if(rs({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=pt({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>pt({context:e,plugin:t,schema:o}))),n.anyOf&&(n.anyOf=n.anyOf.map(o=>pt({context:e,plugin:t,schema:o}))),n.items&&(n.items=pt({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(o=>pt({context:e,plugin:t,schema:o}))),n.properties)for(let o in n.properties){let i=n.properties[o];typeof i!="boolean"&&(n.properties[o]=pt({context:e,plugin:t,schema:i}));}return n},ze=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(o=>ze({context:e,plugin:t,schema:o}));let n=structuredClone(r);if(rs({plugin:t,schema:n}),n.$ref&&(n.$ref=decodeURI(n.$ref)),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=ze({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(o=>ze({context:e,plugin:t,schema:o}))),n.anyOf&&(n.anyOf=n.anyOf.map(o=>ze({context:e,plugin:t,schema:o}))),n.items&&(n.items=ze({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(o=>ze({context:e,plugin:t,schema:o}))),n.prefixItems&&(n.prefixItems=n.prefixItems.map(o=>ze({context:e,plugin:t,schema:o}))),n.properties)for(let o in n.properties){let i=n.properties[o];typeof i!="boolean"&&(n.properties[o]=ze({context:e,plugin:t,schema:i}));}return n},ns=({name:e,plugin:t,schema:r})=>{let n="";return t.config.nameBuilder&&(typeof t.config.nameBuilder=="function"?n=t.config.nameBuilder(e,r):n=t.config.nameBuilder.replace("{{name}}",e)),n||(n=`${e}Schema`),Yr(n)},Qp=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let n=e.spec.definitions[r],o=zt({context:e,plugin:t,schema:n}),i=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:o}),name:ns({name:r,plugin:t,schema:n})});e.file({id:en}).add(i);}},Xp=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],o=pt({context:e,plugin:t,schema:n}),i=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:o}),name:ns({name:r,plugin:t,schema:n})});e.file({id:en}).add(i);}},Jp=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],o=ze({context:e,plugin:t,schema:n}),i=s.constVariable({assertion:"const",exportConst:true,expression:s.objectExpression({obj:o}),name:ns({name:r,plugin:t,schema:n})});e.file({id:en}).add(i);}},Wo=({plugin:e})=>{if(e.createFile({id:en,path:e.output}),"swagger"in e.context.spec){Qp({context:e.context,plugin:e});return}switch(e.context.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":Xp({context:e.context,plugin:e});break;case "3.1.0":case "3.1.1":Jp({context:e.context,plugin:e});break;default:throw new Error("Unsupported OpenAPI specification")}};var Ee=class{_exportFromIndex;_headers=[];_id;_identifierCase;_imports=new Map;_items=[];_name;_path;identifiers={};constructor({dir:t,exportFromIndex:r=false,header:n=true,id:o,identifierCase:i,name:a}){this._exportFromIndex=r,this._id=o,this._identifierCase=i,this._name=this._setName(a),this._path=Wt__default.default.resolve(t,this._name),n&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}blockIdentifier({$ref:t,namespace:r}){let{name:n,ref:o}=Uo(t),i=this.identifiers[n.toLocaleLowerCase()]?.[r]?.[o];if(!i)throw new Error(`Identifier for $ref ${t} in namespace ${r} not found`);return i.name=false,{created:false,name:i.name}}get exportFromIndex(){return this._exportFromIndex}get id(){return this._id}identifier(t){return os({case:t.case??this._identifierCase,identifiers:this.identifiers,...t})}import({module:t,...r}){let n=this._imports.get(t);n||(n=new Map,this._imports.set(t,n));let o=n.get(r.name);return o?{...o,name:o.alias||o.name}:(n.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=ss(this._name);return t}relativePathToFile({context:t,id:r}){let n="";if(r.startsWith(".")){let m=[];if(t.config.configFile){let f=t.config.configFile.split("/");m=f.slice(0,f.length-1);}n=Wt__default.default.resolve(process.cwd(),...m,r);}else {let m=t.file({id:r});if(!m)throw new Error(`File with id ${r} does not exist`);n=m._path;}let o=this._path.split(Wt__default.default.sep),i=n.split(Wt__default.default.sep),a=-1,p="";for(let m of o)if(a+=1,i[a]!==m){let f=Array.from({length:o.length-a}).fill(""),l=i.slice(a),u=l.slice(0,l.length-1);u.length&&u.push(""),p=(f.join("../")||"./")+u.join("/");break}let c=i[i.length-1];return `${p}${ss(c).name}`}remove(t){qo__default.default.rmSync(this._path,t);}removeNode(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:n}=ss(t);return [n,"gen",r].filter(Boolean).join(".")}_toString(t,r){let n=[];this._headers.length&&n.push(this._headers.join(`
`));let o=r?.options.moduleResolution===x__default.default.ModuleResolutionKind.NodeNext,i=[];for(let[a,p]of this._imports.entries()){let c=Array.from(p.values()),m=a;o&&(m.startsWith("./")||m.startsWith("../"))&&(m==="./client"?m="./client/index.js":m=`${m}.js`);let f=s.namedImportDeclarations({imports:c,module:m});i.push(Ae({node:f}));}return i.length&&n.push(i.join(`
`)),n=n.concat(this._items.map(a=>typeof a=="string"?a:Ae({node:a,unescape:true}))),n.join(t)}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let n=this._path;if(typeof this._path=="string"){let o=this._path.split(Wt__default.default.sep);n=o.slice(0,o.length-1).join(Wt__default.default.sep);}Kr(n),qo__default.default.writeFileSync(this._path,this._toString(t,r));}},Uo=e=>{let t=e,r=[],n=t.split("/"),o=n[n.length-1]||"",i=n.indexOf("properties");if(i!==-1)for(t=n.slice(0,i).join("/"),o=n[i-1]||"";i+1<n.length;){let a=n[i+1];if(!a)throw new Error(`Invalid $ref: ${e}`);r.push(a),i+=2;}return {name:o,properties:r,ref:t}},Zp=(e,t,r)=>{if(typeof t=="function")return t(e);let n=r==="preserve"?"":"-";return t.replace("{{name}}",`${n}${e}${n}`)},os=({$ref:e,case:t,count:r=1,create:n=false,identifiers:o,nameTransformer:i,namespace:a})=>{let{name:p,properties:c,ref:m}=Uo(e);if(!p)return {created:false,name:""};let f=A({case:t,value:i?Zp(p,i,t):p});r>1&&(f=`${f}${r}`);let l=f.toLocaleLowerCase();o[l]||(o[l]={});let u=o[l];if(a==="enum"&&(u.type||u.value)||a!=="enum"&&u.enum)return os({$ref:m,case:t,count:r+1,create:n,identifiers:o,nameTransformer:i,namespace:a});u[a]||(u[a]={});let d=u[a],g=d[m];if(g){let S=g.name;return c.length&&(S+=c.map(b=>`['${b}']`).join("")),{created:false,name:S}}let h=d[f];return h?h.$ref===m?{created:false,name:h.name}:os({$ref:m,case:t,count:r+1,create:n,identifiers:o,nameTransformer:i,namespace:a}):n?(h={$ref:m,name:Yr(f)},d[f]=h,d[h.$ref]=h,{created:true,name:h.name}):(delete u[a],{created:false,name:""})},ss=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",n=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:n}};var tc=url.fileURLToPath((typeof document === 'undefined' ? require('u' + 'rl').pathToFileURL(__filename).href : (_documentCurrentScript && _documentCurrentScript.tagName.toUpperCase() === 'SCRIPT' && _documentCurrentScript.src || new URL('internal.cjs', document.baseURI).href)));Wt__default.default.dirname(tc);process.stdin.isTTY&&process.stdout.isTTY;var tn=class extends Error{args;event;pluginName;constructor({args:t,error:r,event:n,name:o,pluginName:i}){let a=r instanceof Error?r.message:"Unknown error";super(a),this.args=t,this.cause=r.cause,this.event=n,this.name=o||r.name,this.pluginName=i,this.stack=r.stack;}};var rn=class{api;config;context;dependencies=[];handler;name;output;constructor(t){this.api=t.api??{},this.config=t.config,this.context=t.context,this.dependencies=t.dependencies,this.handler=t.handler,this.name=t.name,this.output=t.output;}createFile(t){return this.context.createFile({exportFromIndex:this.config.exportFromIndex,...t})}forEach(...t){let r=t.slice(0,-1),n=t[t.length-1],o=new Set(r.length?r:["operation","parameter","requestBody","schema","server"]);if(o.has("server")&&this.context.ir.servers)for(let i of this.context.ir.servers){let a={server:i,type:"server"};try{n(a);}catch(p){this.forEachError(p,a);}}if(o.has("schema")&&this.context.ir.components?.schemas)for(let i in this.context.ir.components.schemas){let a={$ref:`#/components/schemas/${i}`,name:i,schema:this.context.ir.components.schemas[i],type:"schema"};try{n(a);}catch(p){this.forEachError(p,a);}}if(o.has("parameter")&&this.context.ir.components?.parameters)for(let i in this.context.ir.components.parameters){let a={$ref:`#/components/parameters/${i}`,name:i,parameter:this.context.ir.components.parameters[i],type:"parameter"};try{n(a);}catch(p){this.forEachError(p,a);}}if(o.has("requestBody")&&this.context.ir.components?.requestBodies)for(let i in this.context.ir.components.requestBodies){let a={$ref:`#/components/requestBodies/${i}`,name:i,requestBody:this.context.ir.components.requestBodies[i],type:"requestBody"};try{n(a);}catch(p){this.forEachError(p,a);}}if(o.has("operation")&&this.context.ir.paths)for(let i in this.context.ir.paths){let a=this.context.ir.paths[i];for(let p in a){let c=p,m={method:c,operation:a[c],path:i,type:"operation"};try{n(m);}catch(f){this.forEachError(f,m);}}}}forEachError(t,r){let n=t instanceof Error?t:new Error(String(t));throw new tn({args:[r],error:n,event:r.type,name:"Error",pluginName:this.name})}getPlugin(t){return this.context.plugins[t]}async run(){await this.handler({plugin:this});}};var nn=class{config;files={};ir={};plugins={};spec;constructor({config:t,spec:r}){this.config=t,this.spec=r;}createFile(t){let r=t.path.split("/"),n=Wt__default.default.resolve(this.config.output.path,...r.slice(0,r.length-1)),o=new Ee({dir:n,exportFromIndex:t.exportFromIndex,id:t.id,identifierCase:t.identifierCase,name:`${r[r.length-1]}.ts`});return this.files[t.id]=o,o}dereference(t){let r=this.resolveRef(t.$ref),n={...t,...r};return delete n.$ref,n}file({id:t}){return this.files[t]}registerPlugin(t){let r=this.config.plugins[t],n=new rn({api:r.api,config:r.config,context:this,dependencies:r.dependencies??[],handler:r.handler,name:r.name,output:r.output});return this.plugins[n.name]=n,n}registerPlugins(){return this.config.pluginOrder.map(t=>this.registerPlugin(t))}resolveIrRef(t){return Yn({$ref:t,spec:this.ir})}resolveRef(t){return Yn({$ref:t,spec:this.spec})}};var sn=({context:e,parameter:t})=>{if(!t.pagination)return;if(t.pagination===true)return t.schema;let r=t.schema;return r.$ref&&(r=e.resolveIrRef(r.$ref)),r.properties[t.pagination]},ct=e=>{for(let t in e)if(e[t].required)return  true;return  false},zo=e=>e?!!(ct(e.cookie)||ct(e.header)||ct(e.path)||ct(e.query)):false,is=({context:e,parameters:t})=>{if(t){for(let r in t.cookie){let n=t.cookie[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:sn({context:e,parameter:n})}}for(let r in t.header){let n=t.header[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:sn({context:e,parameter:n})}}for(let r in t.path){let n=t.path[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:sn({context:e,parameter:n})}}for(let r in t.query){let n=t.query[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:sn({context:e,parameter:n})}}}};var ne=({detectFormat:e=true,schema:t})=>{if(!t.items)return t;let r=[],n=[];for(let i of t.items){if(!i.type&&i.items||t.type==="tuple"){r.push(i);continue}if(!i.type||i.type==="boolean"||i.type==="integer"||i.type==="null"||i.type==="number"||i.type==="string"||i.type==="unknown"||i.type==="void"){let a=i.const!==void 0?`const-${i.const}`:"",p=i.format!==void 0&&e?`format-${i.format}`:"",c=`${i.$ref??""}${i.type??""}${a}${p}`;n.includes(c)||(n.push(c),r.push(i));continue}r.push(i);}let o={...t};if(o.items=r,o.items.length<=1&&o.type!=="array"&&o.type!=="enum"&&o.type!=="tuple"){let i=o.items[0];delete o.logicalOperator,delete o.items,o={...o,...i};}return o.type==="unknown"?{}:o};var gr=e=>JSON.parse(JSON.stringify(e)),k=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let n of t)r.add(n);return r.size>e.length?Array.from(r):e};var as=({items:e,schema:t})=>{for(let r of e)t.accessScopes=k(t.accessScopes,r.accessScopes);t.items=e;},M=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:n})=>e.length?n.type==="tuple"?(as({items:e,schema:n}),n):e.length!==1?(as({items:e,schema:n}),n.logicalOperator=t,n):r?(n={...n,...e[0]},n):(as({items:e,schema:n}),n):n;var on=e=>!!(zo(e.parameters)||e.body?.required),N=({method:e,path:t})=>`${e.toUpperCase()} ${t}`,Qo=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return is({context:e,parameters:t.parameters});if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let n=r.schema,o=n.$ref?e.resolveIrRef(n.$ref):n,a=("schema"in o?o.schema:o)?.properties?.[r.pagination];return a?{in:"body",name:r.pagination,schema:a}:is({context:e,parameters:t.parameters})},ps=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},Ne=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},n={properties:{},type:"object"},o;for(let p in e.responses){let c=e.responses[p];switch(ps({statusCode:p})){case "1XX":case "3XX":break;case "2XX":n.properties[p]=c.schema;break;case "4XX":case "5XX":r.properties[p]=c.schema;break;case "default":o=c;break}}if(o){let p=false;Object.keys(n.properties).length||(n.properties.default=o.schema,p=true);let c=(o.schema.description??"").toLocaleLowerCase(),m=(o.schema.$ref??"").toLocaleLowerCase();["success"].some(u=>c.includes(u)||m.includes(u))&&(n.properties.default=o.schema,p=true),["error","problem"].some(u=>c.includes(u)||m.includes(u))&&(r.properties.default=o.schema,p=true),p||(r.properties.default=o.schema);}let i=Object.keys(r.properties);if(i.length){r.required=i,t.errors=r;let p=M({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});p=ne({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.error=p);}let a=Object.keys(n.properties);if(a.length){n.required=a,t.responses=n;let p=M({items:Object.values(n.properties),mutateSchemaOneItem:true,schema:{}});p=ne({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.response=p);}return t};var jt=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return Lt.lastIndex=0,Lt.test(t)?`_${t}`:t},mt=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),cs=e=>{let t=e.replace("[]","Array");return mt(t)};var H=["delete","get","head","options","patch","post","put","trace"],Ct=({context:e,count:t=1,id:r,method:n,path:o,state:i})=>{let a;if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].config.operationId))a=A({case:"camelCase",value:mt(r)});else {let p=o.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");a=A({case:"camelCase",value:`${n}-${p}`});}return t>1&&(a=`${a}${t}`),i.ids.has(a)?Ct({context:e,count:t+1,id:r,method:n,path:o,state:i}):(i.ids.set(a,N({method:n,path:o})),a)};var Xo="/",I=(e,t="")=>`${e}${Xo}${t}`,B=e=>{let t=e.indexOf(Xo);return {name:e.slice(t+1),namespace:e.slice(0,t)}},Jo=e=>{switch(e){case "parameters":return "parameter";case "requestBodies":return "body";case "responses":return "response";case "definitions":case "schemas":return "schema";default:return "unknown"}},ve=(e,t)=>{let r=[],n=[];if(t)for(let o of t)o.startsWith("/")&&o.endsWith("/")?n.push(new RegExp(o.slice(1,o.length-1))):r.push(I(e,o));return {regexps:n,set:new Set(r)}},nc=({excludeOperations:e,excludeSchemas:t,includeOperations:r,includeSchemas:n,spec:o})=>{if((e.regexps.length||r.regexps.length)&&o.paths)for(let i of Object.entries(o.paths)){let a=i[0],p=i[1];for(let c of H){if(!p[c])continue;let f=N({method:c,path:a});e.regexps.some(l=>l.test(f))&&e.set.add(I("operation",f)),r.regexps.some(l=>l.test(f))&&r.set.add(I("operation",f));}}if(o.definitions&&(t.regexps.length||n.regexps.length))for(let i of Object.keys(o.definitions))t.regexps.some(a=>a.test(i))&&t.set.add(I("schema",i)),n.regexps.some(a=>a.test(i))&&n.set.add(I("schema",i));},sc=({excludeOperations:e,excludeParameters:t,excludeRequestBodies:r,excludeResponses:n,excludeSchemas:o,includeOperations:i,includeParameters:a,includeRequestBodies:p,includeResponses:c,includeSchemas:m,spec:f})=>{if((e.regexps.length||i.regexps.length)&&f.paths)for(let l of Object.entries(f.paths)){let u=l[0],d=l[1];for(let g of H){if(!d[g])continue;let S=N({method:g,path:u});e.regexps.some(b=>b.test(S))&&e.set.add(I("operation",S)),i.regexps.some(b=>b.test(S))&&i.set.add(I("operation",S));}}if(f.components){if((t.regexps.length||a.regexps.length)&&f.components.parameters)for(let l of Object.keys(f.components.parameters))t.regexps.some(u=>u.test(l))&&t.set.add(I("parameter",l)),a.regexps.some(u=>u.test(l))&&a.set.add(I("parameter",l));if((r.regexps.length||p.regexps.length)&&f.components.requestBodies)for(let l of Object.keys(f.components.requestBodies))r.regexps.some(u=>u.test(l))&&r.set.add(I("body",l)),p.regexps.some(u=>u.test(l))&&p.set.add(I("body",l));if((n.regexps.length||c.regexps.length)&&f.components.responses)for(let l of Object.keys(f.components.responses))n.regexps.some(u=>u.test(l))&&n.set.add(I("response",l)),c.regexps.some(u=>u.test(l))&&c.set.add(I("response",l));if((o.regexps.length||m.regexps.length)&&f.components.schemas)for(let l of Object.keys(f.components.schemas))o.regexps.some(u=>u.test(l))&&o.set.add(I("schema",l)),m.regexps.some(u=>u.test(l))&&m.set.add(I("schema",l));}},oc=({spec:e,...t})=>{"swagger"in e?nc({...t,spec:e}):sc({...t,spec:e});},Xt=(e,t)=>{let r=ve("operation",e?.operations?.exclude),n=ve("operation",e?.operations?.include),o=ve("parameter",e?.parameters?.exclude),i=ve("parameter",e?.parameters?.include),a=ve("body",e?.requestBodies?.exclude),p=ve("body",e?.requestBodies?.include),c=ve("response",e?.responses?.exclude),m=ve("response",e?.responses?.include),f=ve("schema",e?.schemas?.exclude),l=ve("schema",e?.schemas?.include);return oc({excludeOperations:r,excludeParameters:o,excludeRequestBodies:a,excludeResponses:c,excludeSchemas:f,includeOperations:n,includeParameters:i,includeRequestBodies:p,includeResponses:m,includeSchemas:l,spec:t}),{deprecated:e?.deprecated??true,operations:{exclude:r.set,include:n.set},orphans:e?.orphans??false,parameters:{exclude:o.set,include:i.set},preserveOrder:e?.preserveOrder??false,requestBodies:{exclude:a.set,include:p.set},responses:{exclude:c.set,include:m.set},schemas:{exclude:f.set,include:l.set},tags:{exclude:new Set(e?.tags?.exclude),include:new Set(e?.tags?.include)}}},Jt=e=>e?e.orphans===false||e.deprecated===false?true:!!(e.operations?.exclude?.length||e.operations?.include?.length||e.parameters?.exclude?.length||e.parameters?.include?.length||e.requestBodies?.exclude?.length||e.requestBodies?.include?.length||e.responses?.exclude?.length||e.responses?.include?.length||e.schemas?.exclude?.length||e.schemas?.include?.length||e.tags?.exclude?.length||e.tags?.include?.length):false,ic=({filters:e,parameters:t,requestBodies:r,resourceMetadata:n,responses:o,schemas:i})=>{let a=new Set,c=[...e.operations.include.size?e.operations.include:new Set(n.operations.keys())];for(;c.length;){let m=c.pop();if(e.operations.exclude.has(m)||a.has(m))continue;let f=n.operations.get(m);f&&(!e.deprecated&&f.deprecated||e.tags.exclude.size&&f.tags.size&&[...e.tags.exclude].some(l=>f.tags.has(l))||e.tags.include.size&&!new Set([...e.tags.include].filter(l=>f.tags.has(l))).size||[...f.dependencies].some(l=>{let{namespace:u}=B(l);switch(u){case "body":return !r.has(l);case "parameter":return !t.has(l);case "response":return !o.has(l);case "schema":return !i.has(l);default:return  false}})||a.add(m));}return {operations:a}},ac=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,i=[...e.parameters.include.size?e.parameters.include:new Set(t.parameters.keys())];for(;i.length;){let a=i.pop();if(e.parameters.exclude.has(a)||n.has(a))continue;let p=t.parameters.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=B(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {parameters:n}},pc=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,i=[...e.requestBodies.include.size?e.requestBodies.include:new Set(t.requestBodies.keys())];for(;i.length;){let a=i.pop();if(e.requestBodies.exclude.has(a)||n.has(a))continue;let p=t.requestBodies.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=B(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {requestBodies:n}},cc=({filters:e,resourceMetadata:t,schemas:r})=>{let n=new Set,i=[...e.responses.include.size?e.responses.include:new Set(t.responses.keys())];for(;i.length;){let a=i.pop();if(e.responses.exclude.has(a)||n.has(a))continue;let p=t.responses.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:m}=B(c);switch(m){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||i.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {responses:n}},mc=({filters:e,resourceMetadata:t})=>{let r=new Set,o=[...e.schemas.include.size?e.schemas.include:new Set(t.schemas.keys())];for(;o.length;){let i=o.pop();if(e.schemas.exclude.has(i)||r.has(i))continue;let a=t.schemas.get(i);if(a&&!(!e.deprecated&&a.deprecated)&&(r.add(i),!!a.dependencies.size))for(let p of a.dependencies){let{namespace:c}=B(p);switch(c){case "schema":{!r.has(p)&&!e.schemas.exclude.has(p)&&o.push(p);break}}}}return {schemas:r}},fc=({filters:e,parameters:t,resourceMetadata:r})=>{if(e.parameters.exclude.size)for(let n of t){let o=r.parameters.get(n);if(o?.dependencies.size){for(let i of e.parameters.exclude)if(o.dependencies.has(i)){t.delete(n);break}}}},lc=({filters:e,requestBodies:t,resourceMetadata:r})=>{if(e.requestBodies.exclude.size)for(let n of t){let o=r.requestBodies.get(n);if(o?.dependencies.size){for(let i of e.requestBodies.exclude)if(o.dependencies.has(i)){t.delete(n);break}}}},uc=({filters:e,resourceMetadata:t,responses:r})=>{if(e.responses.exclude.size)for(let n of r){let o=t.responses.get(n);if(o?.dependencies.size){for(let i of e.responses.exclude)if(o.dependencies.has(i)){r.delete(n);break}}}},dc=({filters:e,resourceMetadata:t,schemas:r})=>{if(e.schemas.exclude.size)for(let n of r){let o=t.schemas.get(n);if(o?.dependencies.size){for(let i of e.schemas.exclude)if(o.dependencies.has(i)){r.delete(n);break}}}},yc=({operationDependencies:e,parameters:t,requestBodies:r,responses:n,schemas:o})=>{for(let i of o)e.has(i)||o.delete(i);for(let i of t)e.has(i)||t.delete(i);for(let i of r)e.has(i)||r.delete(i);for(let i of n)e.has(i)||n.delete(i);},gc=({operations:e,resourceMetadata:t})=>{let r=new Set,o=[...new Set([...e].flatMap(i=>[...t.operations.get(i)?.dependencies??[]]))];for(;o.length;){let i=o.pop();if(r.has(i))continue;r.add(i);let{namespace:a}=B(i),p;if(a==="body"?p=t.requestBodies.get(i)?.dependencies:a==="operation"?p=t.operations.get(i)?.dependencies:a==="parameter"?p=t.parameters.get(i)?.dependencies:a==="response"?p=t.responses.get(i)?.dependencies:a==="schema"&&(p=t.schemas.get(i)?.dependencies),!!p?.size)for(let c of p)r.has(c)||o.push(c);}return {operationDependencies:r}},Gt=({filters:e,resourceMetadata:t})=>{let{schemas:r}=mc({filters:e,resourceMetadata:t}),{parameters:n}=ac({filters:e,resourceMetadata:t,schemas:r}),{requestBodies:o}=pc({filters:e,resourceMetadata:t,schemas:r}),{responses:i}=cc({filters:e,resourceMetadata:t,schemas:r});dc({filters:e,resourceMetadata:t,schemas:r}),fc({filters:e,parameters:n,resourceMetadata:t}),lc({filters:e,requestBodies:o,resourceMetadata:t}),uc({filters:e,resourceMetadata:t,responses:i});let{operations:a}=ic({filters:e,parameters:n,requestBodies:o,resourceMetadata:t,responses:i,schemas:r});if(!e.orphans&&a.size){let{operationDependencies:p}=gc({operations:a,resourceMetadata:t});yc({operationDependencies:p,parameters:n,requestBodies:o,responses:i,schemas:r});}return {operations:a,parameters:n,requestBodies:o,responses:i,schemas:r}};var Zt=e=>{let t={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},r=n=>{let o=new Set,i=e.allDependencies.get(n);if(i?.size)for(let a of i){let p=Oe(a),c=p[p.length-2],m=p[p.length-1];if(c&&m){let f=Jo(c);f==="unknown"&&console.warn(`unsupported type: ${c}`),o.add(I(f,m));}}return o};for(let[n,o]of e.nodes){let i=Oe(n);if(i[0]==="components"){if(i.length===3){if(i[1]==="schemas"){let a=i[i.length-1];t.schemas.set(I("schema",a),{dependencies:r(n),deprecated:o.deprecated??false});}else if(i[1]==="parameters"){let a=i[i.length-1];t.parameters.set(I("parameter",a),{dependencies:r(n),deprecated:o.deprecated??false});}else if(i[1]==="requestBodies"){let a=i[i.length-1];t.requestBodies.set(I("body",a),{dependencies:r(n),deprecated:o.deprecated??false});}else if(i[1]==="responses"){let a=i[i.length-1];t.responses.set(I("response",a),{dependencies:r(n),deprecated:o.deprecated??false});}}continue}if(i[0]==="paths"){if(i.length===3&&H.includes(i[2])){let a=i[i.length-1],p=i.slice(1,-1).join("/"),c=N({method:a,path:p});t.operations.set(I("operation",c),{dependencies:r(n),deprecated:o.deprecated??false,tags:o.tags??new Set});}continue}if(i[0]==="definitions"){if(i.length===2){let a=i[i.length-1];t.schemas.set(I("schema",a),{dependencies:r(n),deprecated:o.deprecated??false});}continue}}return {resourceMetadata:t}};var hr=({config:e,name:t})=>(typeof e.name=="function"?t=e.name(t):t=e.name.replace("{{name}}",t),A({case:e.case,value:t}));var ft=[["additionalProperties","single"],["allOf","array"],["anyOf","array"],["contains","single"],["dependentSchemas","objectMap"],["else","single"],["if","single"],["items","singleOrArray"],["oneOf","array"],["patternProperties","objectMap"],["properties","objectMap"],["propertyNames","single"],["then","single"]];var xr=e=>{if(an(e))return e.components.schemas;if(pn(e))return e.definitions},an=e=>typeof e=="object"&&e!==null&&"components"in e&&typeof e.components=="object"&&e.components!==null&&"schemas"in e.components&&typeof e.components.schemas=="object"&&e.components.schemas!==null,pn=e=>typeof e=="object"&&e!==null&&"definitions"in e&&typeof e.definitions=="object"&&e.definitions!==null;var Go=(e,t)=>e instanceof Set?e.has(t):e instanceof Array?e.includes(t):t in e,br=({base:e,components:t,extraComponents:r})=>{let n=2,o=e.replace(/\d+$/,""),i=o;for(;Go(t,i)||r&&Go(r,i);)i=`${o}${n}`,n+=1;return i},cn=e=>e.length===3&&e[0]==="components"&&e[1]==="schemas"||e.length===2&&e[0]==="definitions",Yt=e=>{if(e&&typeof e=="object"){if("swagger"in e)return "#/definitions/";if("openapi"in e)return "#/components/schemas/"}return ""};var ms=e=>{if(!e||typeof e!="object"||!("enum"in e)||!(e.enum instanceof Array))return;let t=("type"in e?e.type:void 0)||"",r=[...e.enum].sort();return JSON.stringify({type:t,values:r})},fs=({key:e,node:t,parent:r,path:n,visitor:o})=>{if(!t||typeof t!="object"||t instanceof Array)return;let i=t;("type"in i||"enum"in i||ft.some(([a])=>a in i))&&o({key:e,node:t,parent:r,path:n});for(let[a,p]of Object.entries(i))typeof p=="object"&&p!==null&&(p instanceof Array?p.forEach((c,m)=>fs({key:m,node:c,parent:p,path:[...n,a,m],visitor:o})):fs({key:a,node:p,parent:t,path:[...n,a],visitor:o}));},hc=({spec:e})=>{let t=xr(e);if(!t)return;let r=Yt(e),n={};for(let[i,a]of Object.entries(t))ms(a)&&(n[`${r}${i}`]=a);let o=i=>{if(i instanceof Array)i.forEach(o);else if(i&&typeof i=="object")for(let[a,p]of Object.entries(i))a==="$ref"&&typeof p=="string"&&p in n?(Object.assign(i,gr(n[p])),delete i.$ref):o(p);};o(e);for(let i of Object.keys(n)){let a=Oe(i),p=a[a.length-1];p&&delete t[p];}},xc=({config:e,spec:t})=>{let r=xr(t);if(!r)return;let n={};for(let[c,m]of Object.entries(r)){let f=ms(m);f&&(n[f]=c);}let o=[];fs({key:null,node:t,parent:null,path:[],visitor:c=>{if(!cn(c.path)){let m=ms(c.node);m&&o.push({...c,signature:m});}}});let i={},a={};for(let{key:c,node:m,signature:f}of o){if(f in i)continue;if(f in n){i[f]=n[f];continue}let l=hr({config:e,name:typeof m=="object"&&m&&"title"in m&&typeof m.title=="string"?m.title:String(c)}),u=br({base:l,components:r,extraComponents:Object.values(i)});i[f]=u,a[f]=m;}for(let[c,m]of Object.entries(i)){let f=a[c];m&&!(m in r)&&f&&typeof f=="object"&&(r[m]=f);}let p=Yt(t);for(let{key:c,parent:m,signature:f}of o){let l=i[f];l&&c!=null&&m&&typeof m=="object"&&(m[c]={$ref:`${p}${l}`});}},Zo=({config:e,spec:t})=>{if(e.mode==="inline"){hc({spec:t});return}if(e.mode==="root"){xc({config:e,spec:t});return}};var bc=e=>{for(let[,t]of e)if(!t.scopes&&t.parentPointer){let r=e.get(t.parentPointer);r?.scopes&&(t.scopes=new Set(r.scopes));}},us=({graph:e,pointer:t,visited:r})=>{if(r.has(t))return new Set;if(r.add(t),!e.nodes.get(t))return new Set;let o=new Set,i=e.dependencies.get(t);if(i)for(let a of i){o.add(a);let p=us({graph:e,pointer:a,visited:r});for(let c of p)o.add(c);}for(let[a,p]of e.nodes)if(p.parentPointer===t){let c=us({graph:e,pointer:a,visited:r});for(let m of c)o.add(m);}return o},Oc=e=>{let t=new Set(Array.from(e.nodes.entries()).filter(([,o])=>o.scopes&&o.scopes.size>0).map(([o])=>o)),r=(o,i,a)=>{i.parentPointer&&t.add(i.parentPointer);let p=e.reverseDependencies.get(o);if(p)for(let c of p)t.add(c);if(a){let c=a.match(/(.*)\/(allOf|anyOf|oneOf)\/\d+$/);if(c){let m=c[1];m&&t.add(m);}}},n=(o,i,a)=>{if(!i?.scopes)return;let p=e.nodes.get(a);if(!p?.scopes)return;ls(p,i)&&r(o,i,a);};for(;t.size>0;){let o=t.values().next().value;t.delete(o);let i=e.nodes.get(o);if(!i)continue;i.scopes||(i.scopes=new Set);let a=i.node;for(let[c,m]of ft){if(!a||typeof a!="object"||!(c in a))continue;let f=a[c];if(m==="array"&&f instanceof Array)for(let l=0;l<f.length;l++){let u=`${o}/${c}/${l}`;n(o,i,u);}else if(m==="objectMap"&&typeof f=="object"&&f!==null&&!(f instanceof Array))for(let l of Object.keys(f)){let u=`${o}/${c}/${l}`;n(o,i,u);}else if(m==="single"&&typeof f=="object"&&f!==null){let l=`${o}/${c}`;n(o,i,l);}else if(m==="singleOrArray"){if(f instanceof Array)for(let l=0;l<f.length;l++){let u=`${o}/${c}/${l}`;n(o,i,u);}else if(typeof f=="object"&&f!==null){let l=`${o}/${c}`;n(o,i,l);}}}let p=e.dependencies.get(o);if(p)for(let c of p){let m=e.nodes.get(c);m?.scopes&&ls(m,i)&&r(o,i);}if(i.parentPointer){let c=e.nodes.get(i.parentPointer);c&&ls(i,c)&&r(i.parentPointer,c);}}},ls=(e,t)=>{if(!e.scopes)return  false;t.scopes||(t.scopes=new Set);let r=false;for(let n of e.scopes)t.scopes.has(n)||(t.scopes.add(n),r=true);return r},Sc=e=>{for(let[t,r]of e){let{node:n}=r;typeof n!="object"||n===null||n instanceof Array||("readOnly"in n&&n.readOnly===true?r.scopes=new Set(["read"]):"writeOnly"in n&&n.writeOnly===true?r.scopes=new Set(["write"]):t.match(/\/properties\/[^/]+$/)&&(r.scopes=new Set(["normal"])));}},lt=e=>{let t={allDependencies:new Map,dependencies:new Map,nodes:new Map,reverseDependencies:new Map},r=({key:n,node:o,parentPointer:i,path:a})=>{if(typeof o!="object"||o===null)return;let p=Lo(a),c,m;if(typeof o=="object"&&o!==null){if("deprecated"in o&&typeof o.deprecated=="boolean"&&(c=!!o.deprecated),"$ref"in o&&typeof o.$ref=="string"){let f=Fo(o.$ref);t.dependencies.has(p)||t.dependencies.set(p,new Set),t.dependencies.get(p).add(f);}"tags"in o&&o.tags instanceof Array&&(m=new Set(o.tags.filter(f=>typeof f=="string")));}if(t.nodes.set(p,{deprecated:c,key:n,node:o,parentPointer:i,tags:m}),o instanceof Array)o.forEach((f,l)=>r({key:l,node:f,parentPointer:p,path:[...a,l]}));else for(let[f,l]of Object.entries(o))r({key:f,node:l,parentPointer:p,path:[...a,f]});};r({key:null,node:e,parentPointer:null,path:[]});for(let[n,o]of t.dependencies)for(let i of o)t.reverseDependencies.has(i)||t.reverseDependencies.set(i,new Set),t.reverseDependencies.get(i).add(n);Sc(t.nodes),Oc(t),bc(t.nodes);for(let n of t.nodes.keys()){let o=us({graph:t,pointer:n,visited:new Set});t.allDependencies.set(n,o);}return {graph:t}};var Rc=new Set(["additionalProperties","allOf","anyOf","items","not","oneOf","patternProperties","properties","schema"]),Tc=e=>{if(e.length===3&&e[0]==="components"){let t=e[1];if(t==="parameters"||t==="requestBodies")return "write";if(t==="responses"||t==="headers")return "read"}if(e.length===2){let t=e[0];if(t==="parameters")return "write";if(t==="responses")return "read"}},Ic=e=>{let t={};if(an(e))for(let[r,n]of Object.entries(e.components.schemas))t[`#/components/schemas/${r}`]=n;else if(pn(e))for(let[r,n]of Object.entries(e.definitions))t[`#/definitions/${r}`]=n;return t},Ac=(e,t)=>{an(e)?Object.assign(e.components.schemas,t.schemas):pn(e)&&Object.assign(e.definitions,t.schemas);},kt=(e,t,r)=>{if(t&&typeof t=="object"){if("$ref"in t&&typeof t.$ref=="string"){let n=t.$ref,o=e.nodes.get(n);if(o?.scopes&&(r==="writeOnly"&&o.scopes.size===1&&o.scopes.has("write")||r==="readOnly"&&o.scopes.size===1&&o.scopes.has("read"))&&(delete t.$ref,!ft.some(([i])=>i in t)))return  true}for(let[n,o]of ft){if(!(n in t))continue;let i=t[n];if(o==="array"&&i instanceof Array){for(let a=i.length-1;a>=0;a--){let p=i[a];(p&&typeof p=="object"&&p[r]===true||kt(e,p,r))&&i.splice(a,1);}i.length||delete t[n];}else if(o==="objectMap"&&typeof i=="object"&&i!==null&&!(i instanceof Array)){let a=i;for(let p of Object.keys(a)){let c=a[p];(c&&typeof c=="object"&&c[r]===true||kt(e,c,r))&&delete a[p];}Object.keys(a).length||delete t[n];}else if(o==="single"&&typeof i=="object"&&i!==null)(i[r]===true||kt(e,i,r))&&delete t[n];else if(o==="singleOrArray")if(i instanceof Array){for(let a=i.length-1;a>=0;a--){let p=i[a];(p&&typeof p=="object"&&p[r]===true||kt(e,p,r))&&i.splice(a,1);}i.length||delete t[n];}else typeof i=="object"&&i!==null&&(i[r]===true||kt(e,i,r))&&delete t[n];}if(t.type==="object"&&!ft.some(([n])=>n in t))return  true}return  false},Pc=({originalSchemas:e,spec:t,split:r})=>{let n=xr(t);for(let o of Object.keys(r.mapping)){let i=Oe(o),a=i[i.length-1];typeof a=="string"&&n&&Object.prototype.hasOwnProperty.call(n,a)&&n[a]===e[o]&&delete n[a];}},jc=({config:e,graph:t,spec:r})=>{let n=new Set,o={mapping:{},reverseMapping:{},schemas:{}},i=Yt(r),a=i.split("/").length-1,p=c=>{if(c.startsWith(i)){let m=Oe(c);if(m.length===a)return m[a-1]||""}return ""};for(let c of t.nodes.keys()){let m=p(c);m&&n.add(m);}for(let[c,m]of t.nodes){let f=p(c);if(!f||!(m.scopes?.has("read")&&m.scopes?.has("write")))continue;let l=gr(m.node);kt(t,l,"writeOnly");let u=hr({config:e.responses,name:f}),d=u===f?u:br({base:u,components:n});n.add(d),o.schemas[d]=l;let g=`${i}${d}`,h=gr(m.node);kt(t,h,"readOnly");let S=hr({config:e.requests,name:f}),b=S===f&&S!==d?S:br({base:S,components:n});n.add(b),o.schemas[b]=h;let L=`${i}${b}`;o.mapping[c]={read:g,write:L},o.reverseMapping[g]=c,o.reverseMapping[L]=c;}return o},Cc=(e,t)=>{let r=Yt(e),n=({context:o,currentPointer:i,inSchema:a,node:p,path:c})=>{if(p instanceof Array)p.forEach((m,f)=>n({context:o,currentPointer:i,inSchema:a,node:m,path:[...c,f]}));else if(p&&typeof p=="object"){let m=i,f=o;if(cn(c)){m=`${r}${c[2]}`;let u=t.reverseMapping[m];if(u){let d=t.mapping[u];d?.read===m?f="read":d?.write===m&&(f="write");}}let l=Tc(c);if(l!==void 0){for(let u in p)Object.prototype.hasOwnProperty.call(p,u)&&n({context:l,currentPointer:m,inSchema:false,node:p[u],path:[...c,u]});return}for(let u in p){if(!Object.prototype.hasOwnProperty.call(p,u))continue;let d=p[u];if(!a){if(u==="requestBody"){n({context:"write",currentPointer:m,inSchema:false,node:d,path:[...c,u]});continue}if(u==="responses"){n({context:"read",currentPointer:m,inSchema:false,node:d,path:[...c,u]});continue}if(u==="parameters"&&Array.isArray(d)){d.forEach((g,h)=>{g&&typeof g=="object"&&"schema"in g&&n({context:"write",currentPointer:m,inSchema:true,node:g.schema,path:[...c,u,h,"schema"]}),g&&typeof g=="object"&&"content"in g&&n({context:"write",currentPointer:m,inSchema:false,node:g.content,path:[...c,u,h,"content"]});});continue}if(u==="headers"&&typeof d=="object"&&d!==null){for(let g in d)Object.prototype.hasOwnProperty.call(d,g)&&n({context:"read",currentPointer:m,inSchema:false,node:d[g],path:[...c,u,g]});continue}}if(Rc.has(u))n({context:f,currentPointer:m,inSchema:true,node:d,path:[...c,u]});else if(u==="$ref"&&typeof d=="string"){let g=t.mapping[d];f==="read"&&g?.read?p[u]=g.read:f==="write"&&g?.write&&(p[u]=g.write);}else n({context:f,currentPointer:m,inSchema:a,node:d,path:[...c,u]});}}};n({context:null,currentPointer:null,inSchema:false,node:e,path:[]});},Yo=({config:e,spec:t})=>{let{graph:r}=lt(t),n=Ic(t),o=jc({config:e,graph:r,spec:t});Ac(t,o),Cc(t,o),Pc({originalSchemas:n,spec:t,split:o});};var er=({context:e})=>{e.config.parser.transforms.enums.enabled&&Zo({config:e.config.parser.transforms.enums,spec:e.spec}),e.config.parser.transforms.readWrite.enabled&&Yo({config:e.config.parser.transforms.readWrite,spec:e.spec});};var $=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var kc=e=>/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(e),Ec=e=>e.map((t,r)=>typeof t=="number"?`[${t}]`:r===0?t:kc(t)?`.${t}`:`['${t.replace(/"/g,"\\'")}']`).join(""),Nc=e=>{let t=Ec(e.path),r=e.severity==="error"?mn__default.default.bold.red:mn__default.default.bold.yellow,n=e.message.replace(/`([^`]+)`/g,(o,i)=>mn__default.default.yellow(`\`${i}\``));return `${r(`[${e.severity.toUpperCase()}]`)} ${mn__default.default.cyan(t)}: ${n}`},vc=({context:e,issue:t})=>e.config.logs.level==="silent"?false:t.severity==="error"?e.config.logs.level!=="warn":true,tr=({context:e,result:t})=>{for(let r of t.issues)vc({context:e,issue:r})&&console.log(Nc(r));t.valid||process.exit(1);};var ei=({operations:e,preserveOrder:t,schemas:r,spec:n})=>{if(n.definitions){let o={};if(t)for(let[i,a]of Object.entries(n.definitions))r.has(I("schema",i))&&(o[i]=a);else for(let i of r){let{name:a}=B(i),p=n.definitions[a];p&&(o[a]=p);}n.definitions=o;}if(n.paths)for(let o of Object.entries(n.paths)){let i=o[0],a=o[1];for(let p of H){if(!a[p])continue;let m=I("operation",N({method:p,path:i}));e.has(m)||delete a[p];}Object.keys(a).length||delete n.paths[i];}};var ti=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,ri=/^application\/(.*\+)?json(;.*)?$/i,ni=/^multipart\/form-data(;.*)?$/i,si=/^text\/[a-z0-9.+-]+(;.*)?$/i,oi=/^application\/x-www-form-urlencoded(;.*)?$/i,ii=/^application\/octet-stream(;.*)?$/i,Qe=({mediaType:e})=>(ti.lastIndex=0,ti.test(e)),rr=({mediaType:e})=>{if(ri.lastIndex=0,ri.test(e))return "json";if(ni.lastIndex=0,ni.test(e))return "form-data";if(si.lastIndex=0,si.test(e))return "text";if(oi.lastIndex=0,oi.test(e))return "url-search-params";if(ii.lastIndex=0,ii.test(e))return "octet-stream"};var ai=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&Qe({mediaType:t})?{...r,format:"binary"}:r:Qe({mediaType:t})?{format:"binary",type:"string"}:void 0},ds=({mimeTypes:e,response:t})=>{let r=[];for(let n of e??[])r.push({mediaType:n,schema:t.schema,type:rr({mediaType:n})});return r};function se(e){let t=`^(${e.keywords.join("|")})$`;return new RegExp(t)}var we=(e,t)=>{let r=[];for(let n in t)t[n]===e&&r.push(n);return r.length?r:[Q(e)]};var Or=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},wc=({irSchema:e,schema:t})=>{t.description&&(e.description=t.description),t.title&&(e.title=t.title);},fn=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=k(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=k(e.accessScopes,["both"]));},$c=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let i=le({context:e,schema:r.items,state:n});if(t.accessScopes=k(t.accessScopes,i.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else if("$ref"in r.items)o.push(i);else {let a=r.items.allOf;a&&a.length>1&&!r.items["x-nullable"]?t={...t,...i}:o.push(i);}}return t=M({items:o,schema:t}),t},qc=({irSchema:e={}})=>(e.type="boolean",e),Mc=({irSchema:e={},schema:t})=>(e.type=t.type,e),Fc=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=le({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=k(t.accessScopes,p.accessScopes),o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=le({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},Lc=({irSchema:e={}})=>(e.type="string",e),nr=({schema:e})=>{let t={};return wc({irSchema:t,schema:e}),t},Dc=({context:e,schema:t,state:r})=>{let n=nr({schema:t}),o=[],i=Or({schema:t}),a=t.allOf;for(let p of a){let c=le({context:e,schema:p,state:r});if(n.accessScopes=k(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),o.push(c),p.$ref){let m=e.resolveRef(p.$ref);if(m.discriminator&&r.$ref){let l=we(r.$ref).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator)&&(u.required=[m.discriminator]),o.push(u);}if(!r.circularReferenceTracker.has(p.$ref)){let f=le({context:e,schema:m,state:{...r,$ref:p.$ref}});n.accessScopes=k(n.accessScopes,f.accessScopes);}}}if(i==="object"){let p=Sr({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=k(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f=m.$ref?e.resolveRef(m.$ref):m;if(Or({schema:f})==="object"){let l=Sr({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=k(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(n=M({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t["x-nullable"]){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},Vc=({context:e,schema:t,state:r})=>{let n=nr({schema:t});n.type="enum";let o=[];for(let[i,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let m=Sr({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=a,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=k(n.accessScopes,m.accessScopes),o.push(m);}return n=M({items:o,schema:n}),n},_c=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),n.$ref=n.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let o=e.resolveRef(t.$ref),i=le({context:e,schema:o,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=k(n.accessScopes,i.accessScopes);}return n},Kc=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=nr({schema:r}));let o={};fn({irSchema:o,schema:r,state:n}),o.default===null&&delete o.default;let i=[Sr({context:e,irSchema:o,schema:r,state:n}),{type:"null"}];return t=M({items:i,schema:t}),t},Bc=({context:e,schema:t,state:r})=>{let n=nr({schema:t});fn({irSchema:n,schema:t,state:r});let o=Or({schema:t});return o?t["x-nullable"]?Kc({context:e,irSchema:n,schema:{...t,type:o},state:r}):Sr({context:e,irSchema:n,schema:{...t,type:o},state:r}):n},Sr=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=nr({schema:r}),fn({irSchema:t,schema:r,state:n})),r.type){case "array":return $c({context:e,irSchema:t,schema:r,state:n});case "boolean":return qc({irSchema:t});case "integer":case "number":return Mc({irSchema:t,schema:r});case "object":return Fc({context:e,irSchema:t,schema:r,state:n});case "string":return Lc({irSchema:t});default:return pi({irSchema:t,schema:r,state:n})}},pi=({irSchema:e,schema:t,state:r})=>(e||(e=nr({schema:t})),e.type="unknown",fn({irSchema:e,schema:t,state:r}),e),le=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?_c({context:e,schema:t,state:r}):t.enum?Vc({context:e,schema:t,state:r}):t.allOf?Dc({context:e,schema:t,state:r}):t.type||t.properties?Bc({context:e,schema:t,state:r}):pi({schema:t,state:r})),ci=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[Q(e)]=le({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Wc=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",ut=({context:e,name:t,schema:r})=>{if(se(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref??"");if("in"in o&&o.in){let i="schema"in o?o.schema:{...o,in:void 0};return ut({context:e,name:t,schema:i})}return ut({context:e,name:t,schema:o})}if("in"in r){if(!r.in)return  false;let o="schema"in r?r.schema:{...r,in:void 0};return ut({context:e,name:t,schema:o})}for(let o in r.properties)if(se(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"&&!("$ref"in a)){let p=Or({schema:a});if(Wc(p))return o}}for(let o of r.allOf??[]){let i=ut({context:e,name:t,schema:o});if(i)return i}return  false};var Hc=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Uc=({context:e,method:t,operation:r,path:n,state:o})=>{let i={id:Ct({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),Hc({irOperation:i,operation:r}),i},zc=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{let a=Uc({context:e,method:t,operation:r,path:n,state:i});r.parameters&&(a.parameters=r.parameters);let p=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},m=[];for(let f of r.requestBody??[]){let l="$ref"in f?e.resolveRef(f.$ref):f,u=l.in==="body"?l.schema:{...l,format:l.type==="file"?"binary":l.format,required:void 0,type:l.type==="file"?"string":l.type},d=ds({mimeTypes:r.consumes,response:{schema:u}}),g=d.find(h=>h.type==="json")||d[0];if(g){let h=ut({context:e,name:"",schema:g.schema&&"$ref"in g.schema?{allOf:[{...g.schema}],description:l.description}:{description:l.description,...g.schema}}),S=le({context:e,schema:"$ref"in l?{allOf:[{...l,$ref:l.$ref,required:[],type:"string"}],description:l.description}:g.schema&&"$ref"in g.schema?{allOf:[{...g.schema}],description:l.description}:{description:l.description,...g.schema},state:void 0});c.mediaType=g.mediaType,l.in==="body"?c.schema=S:(c.schema.properties[l.name]=S,l.required&&m.push(l.name)),h&&(c.pagination=h),g.type&&(c.type=g.type);}l.required&&(p=true);}c.mediaType&&(m.length&&(c.schema.required=m),a.body=c,p&&(a.body.required=p));for(let f in r.responses){a.responses||(a.responses={});let l=r.responses[f],u="$ref"in l?e.resolveRef(l.$ref):l,d=ds({mimeTypes:r.produces?r.produces:["application/json"],response:u}),g=d.find(h=>h.type==="json")||d[0];g?a.responses[f]={mediaType:g.mediaType,schema:le({context:e,schema:{description:u.description,...ai({content:g})},state:void 0})}:a.responses[f]={schema:{description:u.description,type:f==="204"?"void":"unknown"}};}if(r.security){let f=[];for(let l of r.security)for(let u in l){let d=o.get(u);if(!d)continue;let g;if(d.type==="apiKey"&&(g=d),d.type==="basic"&&(g={description:d.description,scheme:"basic",type:"http"}),d.type==="oauth2")switch(g={description:d.description,flows:{},type:"oauth2"},d.flow){case "accessCode":g.flows.authorizationCode={authorizationUrl:d.authorizationUrl,scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "application":g.flows.clientCredentials={scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "implicit":g.flows.implicit={authorizationUrl:d.authorizationUrl,scopes:d.scopes};break;case "password":g.flows.password={scopes:d.scopes,tokenUrl:d.tokenUrl};break}g&&f.push(g);}f.length&&(a.security=f);}return a},dt=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),e.ir.paths[n][t]=zc({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i});};var Qc=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},Xc=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},Xe=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let n={};for(let o of r){let i="$ref"in o?e.dereference(o):o;if(i.in==="body"||i.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(i);continue}n[i.in]||(n[i.in]={}),n[i.in][i.name.toLocaleLowerCase()]=Jc({context:e,parameter:i});}return n},Jc=({context:e,parameter:t})=>{let r=t,n=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},o=ut({context:e,name:t.name,schema:n}),i=Xc(t.in),c={allowReserved:false,explode:Qc(t.collectionFormat),location:t.in,name:t.name,schema:le({context:e,schema:n,state:void 0}),style:i};return t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c};var mi=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",n=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let i=ke(e.config.input.path);t.length||i.protocol&&(t=[i.protocol]),r||(r=`${i.host}${i.port?`:${i.port}`:""}`);}t.length||(t=[""]);let o=t.map(i=>`${i?`${i}://`:""}${r}${n}`).filter(Boolean);o.length&&(e.ir.servers=o.map(i=>({url:i})));};var fi=e=>{let t=[],r=new Map;if(e.paths)for(let n of Object.entries(e.paths)){let o=n[0],i=n[1];for(let a of H){if(a==="trace")continue;let p=i[a];if(!p)continue;let c=N({method:a,path:o});p.operationId&&(r.has(p.operationId)?t.push({code:"duplicate_key",context:{key:"operationId",value:p.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",o,a,"operationId"],severity:"error"}):r.set(p.operationId,c));}}return {issues:t,valid:!t.some(n=>n.severity==="error")}};var ys=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=fi(e.spec);tr({context:e,result:o});}if(Jt(e.config.parser.filters)){let o=Xt(e.config.parser.filters,e.spec),{graph:i}=lt(e.spec),{resourceMetadata:a}=Zt(i),p=Gt({filters:o,resourceMetadata:a});ei({...p,preserveOrder:o.preserveOrder,spec:e.spec});}er({context:e});let r={ids:new Map},n=new Map;for(let o in e.spec.securityDefinitions){let i=e.spec.securityDefinitions[o];n.set(o,i);}if(e.spec.definitions)for(let o in e.spec.definitions){let i=`#/definitions/${o}`,a=e.spec.definitions[o];ci({$ref:i,context:e,schema:a});}mi({context:e});for(let o in e.spec.paths){if(o.startsWith("x-"))continue;let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},c={context:e,operation:{...p,parameters:Xe({context:e,operation:p,parameters:a.parameters})},path:o,securitySchemesMap:n,state:r};if(a.delete){let m=$({source:Xe({context:e,operation:a.delete,parameters:a.delete.parameters}),target:c.operation.parameters});dt({...c,method:"delete",operation:{...c.operation,...a.delete,parameters:m}});}if(a.get){let m=$({source:Xe({context:e,operation:a.get,parameters:a.get.parameters}),target:c.operation.parameters});dt({...c,method:"get",operation:{...c.operation,...a.get,parameters:m}});}if(a.head){let m=$({source:Xe({context:e,operation:a.head,parameters:a.head.parameters}),target:c.operation.parameters});dt({...c,method:"head",operation:{...c.operation,...a.head,parameters:m}});}if(a.options){let m=$({source:Xe({context:e,operation:a.options,parameters:a.options.parameters}),target:c.operation.parameters});dt({...c,method:"options",operation:{...c.operation,...a.options,parameters:m}});}if(a.patch){let m=$({source:Xe({context:e,operation:a.patch,parameters:a.patch.parameters}),target:c.operation.parameters});dt({...c,method:"patch",operation:{...c.operation,...a.patch,parameters:m}});}if(a.post){let m=$({source:Xe({context:e,operation:a.post,parameters:a.post.parameters}),target:c.operation.parameters});dt({...c,method:"post",operation:{...c.operation,...a.post,parameters:m}});}if(a.put){let m=$({source:Xe({context:e,operation:a.put,parameters:a.put.parameters}),target:c.operation.parameters});dt({...c,method:"put",operation:{...c.operation,...a.put,parameters:m}});}}};var li=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:o,schemas:i,spec:a})=>{if(a.components){if(a.components.parameters){let p={};if(r)for(let[c,m]of Object.entries(a.components.parameters))t.has(I("parameter",c))&&(p[c]=m);else for(let c of t){let{name:m}=B(c),f=a.components.parameters[m];f&&(p[m]=f);}a.components.parameters=p;}if(a.components.requestBodies){let p={};if(r)for(let[c,m]of Object.entries(a.components.requestBodies))n.has(I("body",c))&&(p[c]=m);else for(let c of n){let{name:m}=B(c),f=a.components.requestBodies[m];f&&(p[m]=f);}a.components.requestBodies=p;}if(a.components.responses){let p={};if(r)for(let[c,m]of Object.entries(a.components.responses))o.has(I("response",c))&&(p[c]=m);else for(let c of o){let{name:m}=B(c),f=a.components.responses[m];f&&(p[m]=f);}a.components.responses=p;}if(a.components.schemas){let p={};if(r)for(let[c,m]of Object.entries(a.components.schemas))i.has(I("schema",c))&&(p[c]=m);else for(let c of i){let{name:m}=B(c),f=a.components.schemas[m];f&&(p[m]=f);}a.components.schemas=p;}}if(a.paths)for(let p of Object.entries(a.paths)){let c=p[0],m=p[1];for(let f of H){if(!m[f])continue;let u=I("operation",N({method:f,path:c}));e.has(u)||delete m[f];}Object.keys(m).length||delete a.paths[c];}};var ui=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&Qe({mediaType:t})?{...r,format:"binary"}:r:Qe({mediaType:t})?{format:"binary",type:"string"}:void 0},Je=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:rr({mediaType:r})});return t};var Et=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},Gc=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},ln=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=k(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=k(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=k(e.accessScopes,["both"]));},Zc=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let o=[];if(r.items){let i=X({context:e,schema:r.items,state:n});if(t.accessScopes=k(t.accessScopes,i.accessScopes),!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else if("$ref"in r.items)o.push(i);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!r.items.nullable?t={...t,...i}:o.push(i);}}return t=M({items:o,schema:t}),t},Yc=({irSchema:e={}})=>(e.type="boolean",e),em=({irSchema:e={},schema:t})=>(e.type=t.type,e),tm=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=X({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=k(t.accessScopes,p.accessScopes),o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=X({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}return r.required&&(t.required=r.required),t},rm=({irSchema:e={}})=>(e.type="string",e),yt=({schema:e})=>{let t={};return Gc({irSchema:t,schema:e}),t},nm=({context:e,schema:t,state:r})=>{let n=yt({schema:t}),o=[],i=Et({schema:t}),a=t.allOf;for(let p of a){let c=X({context:e,schema:p,state:r});if(n.accessScopes=k(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),o.push(c),"$ref"in p){let m=e.resolveRef(p.$ref);if(m.discriminator&&r.$ref){let l=we(r.$ref,m.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(u.required=[m.discriminator.propertyName]),o.push(u);}if(!r.circularReferenceTracker.has(p.$ref)){let f=X({context:e,schema:m,state:{...r,$ref:p.$ref}});n.accessScopes=k(n.accessScopes,f.accessScopes);}}}if(i==="object"){let p=Nt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=k(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f="$ref"in m?e.resolveRef(m.$ref):m;if(Et({schema:f})==="object"){let l=Nt({context:e,schema:{...f,type:"object"},state:r});if(n.accessScopes=k(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(n=M({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t.nullable){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},sm=({context:e,schema:t,state:r})=>{let n=yt({schema:t}),o=[],i=Et({schema:t}),a=t.anyOf;for(let p of a){let c=X({context:e,schema:p,state:r});if(n.accessScopes=k(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in p){let f=we(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(t.nullable&&o.push({type:"null"}),n=M({items:o,mutateSchemaOneItem:true,schema:n}),i==="object"){let p=Nt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=k(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},om=({context:e,schema:t,state:r})=>{let n=yt({schema:t});n.type="enum";let o=[];for(let[i,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let m=Nt({context:e,schema:{description:t["x-enum-descriptions"]?.[i],title:t["x-enum-varnames"]?.[i]??t["x-enumNames"]?.[i],type:c==="null"?"string":c},state:r});m.const=a,c==="null"&&(m.type=c),m.type==="array"&&(m.type="tuple"),n.accessScopes=k(n.accessScopes,m.accessScopes),o.push(m);}return n=M({items:o,schema:n}),n},im=({context:e,schema:t,state:r})=>{let n=yt({schema:t}),o=[],i=Et({schema:t}),a=t.oneOf;for(let p of a){let c=X({context:e,schema:p,state:r});if(n.accessScopes=k(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in p){let f=we(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(t.nullable&&o.push({type:"null"}),n=M({items:o,mutateSchemaOneItem:true,schema:n}),i==="object"){let p=Nt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=k(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},am=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let o=e.resolveRef(t.$ref),i=X({context:e,schema:o,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=k(n.accessScopes,i.accessScopes);}return n},pm=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=yt({schema:r}));let o={};ln({irSchema:o,schema:r,state:n}),o.default===null&&delete o.default;let i=[Nt({context:e,irSchema:o,schema:r,state:n}),{type:"null"}];return t=M({items:i,schema:t}),t},cm=({context:e,schema:t,state:r})=>{let n=yt({schema:t});ln({irSchema:n,schema:t,state:r});let o=Et({schema:t});return o?t.nullable?pm({context:e,irSchema:n,schema:{...t,type:o},state:r}):Nt({context:e,irSchema:n,schema:{...t,type:o},state:r}):n},Nt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=yt({schema:r}),ln({irSchema:t,schema:r,state:n})),r.type){case "array":return Zc({context:e,irSchema:t,schema:r,state:n});case "boolean":return Yc({irSchema:t});case "integer":case "number":return em({irSchema:t,schema:r});case "object":return tm({context:e,irSchema:t,schema:r,state:n});case "string":return rm({irSchema:t});default:return di({irSchema:t,schema:r,state:n})}},di=({irSchema:e,schema:t,state:r})=>(e||(e=yt({schema:t})),e.type="unknown",ln({irSchema:e,schema:t,state:r}),e),X=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?am({context:e,schema:t,state:r}):t.enum?om({context:e,schema:t,state:r}):t.allOf?nm({context:e,schema:t,state:r}):t.anyOf?sm({context:e,schema:t,state:r}):t.oneOf?im({context:e,schema:t,state:r}):t.type||t.properties?cm({context:e,schema:t,state:r}):di({schema:t,state:r})),yi=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[Q(e)]=X({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var mm=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",vt=({context:e,name:t,schema:r})=>{if(se(e.config.parser.pagination).test(t))return  true;if("$ref"in r){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let i;if("in"in o&&(i=o.schema),!i){let a=Je({content:o.content}),p=a.find(c=>c.type==="json")||a[0];p?.schema&&(i=p.schema);}return i?vt({context:e,name:t,schema:i}):false}return vt({context:e,name:t,schema:o})}for(let o in r.properties)if(se(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"&&!("$ref"in a)){let p=Et({schema:a});if(mm(p))return o}}for(let o of r.allOf??[]){let i=vt({context:e,name:t,schema:o});if(i)return i}return  false};var fm=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},lm=({context:e,method:t,operation:r,path:n,state:o})=>{let i={id:Ct({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),fm({irOperation:i,operation:r}),i},um=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{let a=lm({context:e,method:t,operation:r,path:n,state:i});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=Je({content:p.content}),m=c.find(f=>f.type==="json")||c[0];if(m){let f=vt({context:e,name:"",schema:m.schema&&"$ref"in m.schema?{allOf:[{...m.schema}],description:p.description}:{description:p.description,...m.schema}});a.body={mediaType:m.mediaType,schema:X({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:p.description}:m.schema&&"$ref"in m.schema?{allOf:[{...m.schema}],description:p.description}:{description:p.description,...m.schema},state:void 0})},f&&(a.body.pagination=f),p.required&&(a.body.required=p.required),m.type&&(a.body.type=m.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],m="$ref"in c?e.resolveRef(c.$ref):c,f=Je({content:m.content}),l=f.find(u=>u.type==="json")||f[0];l?a.responses[p]={mediaType:l.mediaType,schema:X({context:e,schema:{description:m.description,...ui({content:l})},state:void 0})}:a.responses[p]={schema:{description:m.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let c of r.security)for(let m in c){let f=o.get(m);f&&p.push(f);}p.length&&(a.security=p);}return a},Ge=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=um({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i});};var dm=e=>{switch(e){case "query":return  false;default:return}},ym=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},gm=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},$e=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let o="$ref"in n?e.dereference(n):n;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=gi({context:e,parameter:o});}return r},gi=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=Je({content:t.content}),f=m.find(l=>l.type==="json")||m[0];f&&(r=f.schema);}let n=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},o=vt({context:e,name:t.name,schema:n}),i=t.style||gm(t.in),a=t.explode!==void 0?t.explode:ym(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:dm(t.in),explode:a,location:t.in,name:t.name,schema:X({context:e,schema:n,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},hi=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[Q(e)]=gi({context:t,parameter:r});};var hm=({context:e,requestBody:t})=>{let r=Je({content:t.content}),n=r.find(p=>p.type==="json")||r[0],o=n?n.schema:void 0,i={description:t.description,...o},a={schema:X({context:e,schema:i,state:void 0})};return t.description&&(a.description=t.description),t.required&&(a.required=t.required),a},xi=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[Q(e)]=hm({context:t,requestBody:r});};var bi=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=ke(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Oi=e=>{let t=[],r=new Map;if(e.paths)for(let n of Object.entries(e.paths)){let o=n[0],i=n[1];for(let a of H){let p=i[a];if(!p)continue;let c=N({method:a,path:o});p.operationId&&(r.has(p.operationId)?t.push({code:"duplicate_key",context:{key:"operationId",value:p.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",o,a,"operationId"],severity:"error"}):r.set(p.operationId,c));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&t.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let n=0;n<e.servers.length;n++){let o=e.servers[n];!o||typeof o!="object"?t.push({code:"invalid_type",context:{actual:typeof o,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",n],severity:"error"}):o.url||t.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",n],severity:"error"});}}return {issues:t,valid:!t.some(n=>n.severity==="error")}};var gs=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=Oi(e.spec);tr({context:e,result:o});}if(Jt(e.config.parser.filters)){let o=Xt(e.config.parser.filters,e.spec),{graph:i}=lt(e.spec),{resourceMetadata:a}=Zt(i),p=Gt({filters:o,resourceMetadata:a});li({...p,preserveOrder:o.preserveOrder,spec:e.spec});}er({context:e});let r={ids:new Map},n=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let i=e.spec.components.securitySchemes[o],a="$ref"in i?e.resolveRef(i.$ref):i;n.set(o,a);}for(let o in e.spec.components.parameters){let i=`#/components/parameters/${o}`,a=e.spec.components.parameters[o],p="$ref"in a?e.resolveRef(a.$ref):a;hi({$ref:i,context:e,parameter:p});}for(let o in e.spec.components.requestBodies){let i=`#/components/requestBodies/${o}`,a=e.spec.components.requestBodies[o],p="$ref"in a?e.resolveRef(a.$ref):a;xi({$ref:i,context:e,requestBody:p});}for(let o in e.spec.components.schemas){let i=`#/components/schemas/${o}`,a=e.spec.components.schemas[o];yi({$ref:i,context:e,schema:a});}}bi({context:e});for(let o in e.spec.paths){let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={context:e,operation:{description:a.description,parameters:$e({context:e,parameters:a.parameters}),security:e.spec.security,servers:a.servers,summary:a.summary},path:o,securitySchemesMap:n,state:r};a.delete&&Ge({...p,method:"delete",operation:{...p.operation,...a.delete,parameters:$({source:$e({context:e,parameters:a.delete.parameters}),target:p.operation.parameters})}}),a.get&&Ge({...p,method:"get",operation:{...p.operation,...a.get,parameters:$({source:$e({context:e,parameters:a.get.parameters}),target:p.operation.parameters})}}),a.head&&Ge({...p,method:"head",operation:{...p.operation,...a.head,parameters:$({source:$e({context:e,parameters:a.head.parameters}),target:p.operation.parameters})}}),a.options&&Ge({...p,method:"options",operation:{...p.operation,...a.options,parameters:$({source:$e({context:e,parameters:a.options.parameters}),target:p.operation.parameters})}}),a.patch&&Ge({...p,method:"patch",operation:{...p.operation,...a.patch,parameters:$({source:$e({context:e,parameters:a.patch.parameters}),target:p.operation.parameters})}}),a.post&&Ge({...p,method:"post",operation:{...p.operation,...a.post,parameters:$({source:$e({context:e,parameters:a.post.parameters}),target:p.operation.parameters})}}),a.put&&Ge({...p,method:"put",operation:{...p.operation,...a.put,parameters:$({source:$e({context:e,parameters:a.put.parameters}),target:p.operation.parameters})}}),a.trace&&Ge({...p,method:"trace",operation:{...p.operation,...a.trace,parameters:$({source:$e({context:e,parameters:a.trace.parameters}),target:p.operation.parameters})}});}};var Si=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:o,schemas:i,spec:a})=>{if(a.components){if(a.components.parameters){let p={};if(r)for(let[c,m]of Object.entries(a.components.parameters))t.has(I("parameter",c))&&(p[c]=m);else for(let c of t){let{name:m}=B(c),f=a.components.parameters[m];f&&(p[m]=f);}a.components.parameters=p;}if(a.components.requestBodies){let p={};if(r)for(let[c,m]of Object.entries(a.components.requestBodies))n.has(I("body",c))&&(p[c]=m);else for(let c of n){let{name:m}=B(c),f=a.components.requestBodies[m];f&&(p[m]=f);}a.components.requestBodies=p;}if(a.components.responses){let p={};if(r)for(let[c,m]of Object.entries(a.components.responses))o.has(I("response",c))&&(p[c]=m);else for(let c of o){let{name:m}=B(c),f=a.components.responses[m];f&&(p[m]=f);}a.components.responses=p;}if(a.components.schemas){let p={};if(r)for(let[c,m]of Object.entries(a.components.schemas))i.has(I("schema",c))&&(p[c]=m);else for(let c of i){let{name:m}=B(c),f=a.components.schemas[m];f&&(p[m]=f);}a.components.schemas=p;}}if(a.paths)for(let p of Object.entries(a.paths)){let c=p[0],m=p[1];for(let f of H){if(!m[f])continue;let u=I("operation",N({method:f,path:c}));e.has(u)||delete m[f];}Object.keys(m).length||delete a.paths[c];}};var Ri=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&Qe({mediaType:t})?{...r,format:"binary"}:r:Qe({mediaType:t})?{format:"binary",type:"string"}:void 0},Ze=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:rr({mediaType:r})});return t};var qe=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],xm=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},un=({irSchema:e,schema:t})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum!==void 0&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum!==void 0&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?e.accessScope="read":t.writeOnly&&(e.accessScope="write");},bm=({context:e,irSchema:t={},schema:r,state:n})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let o=[];for(let i of r.prefixItems??[]){let a=W({context:e,schema:i,state:n});o.push(a);}if(r.items){let i=W({context:e,schema:r.items,state:n});if(!o.length&&r.maxItems&&r.maxItems===r.minItems)o=Array(r.maxItems).fill(i);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!qe({schema:r.items}).includes("null")?t={...t,...i}:o.push(i);}}return t=M({items:o,schema:t}),t},Om=({irSchema:e={}})=>(e.type="boolean",e),Sm=({irSchema:e={}})=>(e.type="null",e),Rm=({irSchema:e={},schema:t})=>(e.type=t.type,e),Tm=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let o={};for(let i in r.properties){let a=r.properties[i];if(typeof a!="boolean"){let p=W({context:e,schema:a,state:{...n,isProperty:true}});o[i]=p;}}if(Object.keys(o).length&&(t.properties=o),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let i=W({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=i;}return r.propertyNames&&(t.propertyNames=W({context:e,schema:r.propertyNames,state:n})),r.required&&(t.required=r.required),t},Im=({irSchema:e={}})=>(e.type="string",e),Ye=({schema:e})=>{let t={};return xm({irSchema:t,schema:e}),t},Am=({context:e,schema:t,state:r})=>{let n=Ye({schema:t}),o=[],i=qe({schema:t}),a=t.allOf;for(let p of a){let c=W({context:e,schema:p,state:r});if(t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),o.push(c),p.$ref){let m=e.resolveRef(p.$ref);if(m.discriminator&&r.$ref){let l=we(r.$ref,m.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[m.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};m.required?.includes(m.discriminator.propertyName)&&(u.required=[m.discriminator.propertyName]),o.push(u);}r.circularReferenceTracker.has(p.$ref)||W({context:e,schema:m,state:{...r,$ref:p.$ref}});}}if(i.includes("object")){let p=wt({context:e,schema:{...t,type:"object"},state:r});if(p.properties){for(let c of p.required??[])if(!p.properties[c])for(let m of a){let f=m.$ref?e.resolveRef(m.$ref):m;if(qe({schema:f}).includes("object")){let l=wt({context:e,schema:{...f,type:"object"},state:r});if(l.properties?.[c]){p.properties[c]=l.properties[c];break}}}o.push(p);}}if(n=M({items:o,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),i.includes("null")){let p=[{type:"null"}];o.length&&p.unshift(n),n={items:p,logicalOperator:"or"};}return n},Pm=({context:e,schema:t,state:r})=>{let n=Ye({schema:t}),o=[],i=qe({schema:t}),a=t.anyOf;for(let p of a){let c=W({context:e,schema:p,state:r});if(t.discriminator&&p.$ref){let f=we(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},type:"object"},c],logicalOperator:"and"};}o.push(c);}if(i.includes("null")&&o.push({type:"null"}),n=M({items:o,mutateSchemaOneItem:true,schema:n}),i.includes("object")){let p=wt({context:e,schema:{...t,type:"object"},state:r});p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},jm=({context:e,schema:t,state:r})=>{let n=Ye({schema:t});n.type="enum";let o=[],i=qe({schema:t});for(let[a,p]of t.enum.entries()){let c=typeof p,m;if(c==="string"||c==="number"||c==="boolean"?m=c:c==="object"&&Array.isArray(p)?m="array":p===null?i.includes("null")&&(m="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${p}" for enum`,t.enum),!m)continue;let f=wt({context:e,schema:{const:p,description:t["x-enum-descriptions"]?.[a],title:t["x-enum-varnames"]?.[a]??t["x-enumNames"]?.[a],type:m},state:r});o.push(f);}return n=M({items:o,schema:n}),n},Cm=({context:e,schema:t,state:r})=>{let n=Ye({schema:t}),o=[],i=qe({schema:t}),a=t.oneOf;for(let p of a){let c=W({context:e,schema:p,state:r});if(t.discriminator&&p.$ref){let f=we(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:f.length>1?{items:f,logicalOperator:"or"}:f[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?o=o.concat(c.items):o.push(c);}if(i.includes("null")&&o.push({type:"null"}),n=M({items:o,mutateSchemaOneItem:true,schema:n}),i.includes("object")){let p=wt({context:e,schema:{...t,type:"object"},state:r});p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},km=({context:e,schema:t,state:r})=>{let n=Ye({schema:t}),o={};if(o.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let a=e.resolveRef(t.$ref);W({context:e,schema:a,state:{...r,$ref:t.$ref,isProperty:false}});}let i=[];return i.push(o),t.type&&typeof t.type!="string"&&t.type.includes("null")&&i.push({type:"null"}),n=M({items:i,mutateSchemaOneItem:true,schema:n}),n},wt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=Ye({schema:r}),un({irSchema:t,schema:r})),r.type){case "array":return bm({context:e,irSchema:t,schema:r,state:n});case "boolean":return Om({irSchema:t});case "integer":case "number":return Rm({irSchema:t,schema:r});case "null":return Sm({irSchema:t});case "object":return Tm({context:e,irSchema:t,schema:r,state:n});case "string":return Im({irSchema:t});default:return Ti({irSchema:t,schema:r})}},Em=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=Ye({schema:r}));let o={};un({irSchema:o,schema:r}),r.type.includes("null")&&o.default===null&&delete o.default;let i=[];for(let a of r.type)if(a==="null")i.push({type:"null"});else {let p=wt({context:e,irSchema:o,schema:{...r,type:a},state:n});i.push(p);}return t=M({items:i,schema:t}),t},Nm=({context:e,schema:t,state:r})=>{let n=Ye({schema:t});un({irSchema:n,schema:t});let o=qe({schema:t});return o.length===1?wt({context:e,irSchema:n,schema:{...t,type:o[0]},state:r}):Em({context:e,irSchema:n,schema:{...t,type:o},state:r})},Ti=({irSchema:e,schema:t})=>(e||(e=Ye({schema:t})),e.type="unknown",un({irSchema:e,schema:t}),e),W=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?km({context:e,schema:t,state:r}):t.enum?jm({context:e,schema:t,state:r}):t.allOf?Am({context:e,schema:t,state:r}):t.anyOf?Pm({context:e,schema:t,state:r}):t.oneOf?Cm({context:e,schema:t,state:r}):t.type||t.properties?Nm({context:e,schema:t,state:r}):Ti({schema:t})),Ii=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[Q(e)]=W({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Ai=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),$t=({context:e,name:t,schema:r})=>{if(se(e.config.parser.pagination).test(t))return  true;if(r.$ref){let o=e.resolveRef(r.$ref);if("content"in o||"in"in o){let i;if("in"in o&&(i=o.schema),!i){let a=Ze({content:o.content}),p=a.find(c=>c.type==="json")||a[0];p?.schema&&(i=p.schema);}return i?$t({context:e,name:t,schema:i}):false}return $t({context:e,name:t,schema:o})}for(let o in r.properties)if(se(e.config.parser.pagination).test(o)){let a=r.properties[o];if(typeof a!="boolean"){let p=qe({schema:a});if(!p.length){let m=(a.anyOf??a.oneOf??[]).filter(f=>f.type!=="null");if(m.length===1){let f=qe({schema:m[0]});if(Ai(f))return o}}if(Ai(p))return o}}for(let o of r.allOf??[]){let i=$t({context:e,name:t,schema:o});if(i)return i}return  false};var vm=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},wm=({context:e,method:t,operation:r,path:n,state:o})=>{let i={id:Ct({context:e,id:r.operationId,method:t,path:n,state:o}),method:t,path:n};return r.operationId&&(i.operationId=r.operationId),vm({irOperation:i,operation:r}),i},$m=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{let a=wm({context:e,method:t,operation:r,path:n,state:i});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=Ze({content:p.content}),m=c.find(f=>f.type==="json")||c[0];if(m){let f=$t({context:e,name:"",schema:{description:p.description,...m.schema}});a.body={mediaType:m.mediaType,schema:W({context:e,schema:{description:p.description,..."$ref"in r.requestBody?r.requestBody:m.schema},state:void 0})},f&&(a.body.pagination=f),p.required&&(a.body.required=p.required),m.type&&(a.body.type=m.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],m="$ref"in c?e.resolveRef(c.$ref):c,f=Ze({content:m.content}),l=f.find(u=>u.type==="json")||f[0];l?a.responses[p]={mediaType:l.mediaType,schema:W({context:e,schema:{description:m.description,...Ri({content:l})},state:void 0})}:a.responses[p]={schema:{description:m.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let c of r.security)for(let m in c){let f=o.get(m);f&&p.push(f);}p.length&&(a.security=p);}return a},et=({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=$m({context:e,method:t,operation:r,path:n,securitySchemesMap:o,state:i});};var qm=e=>{switch(e){case "query":return  false;default:return}},Mm=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},Fm=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Me=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let o="$ref"in n?e.dereference(n):n;r[o.in]||(r[o.in]={}),r[o.in][o.name.toLocaleLowerCase()]=Pi({context:e,parameter:o});}return r},Pi=({context:e,parameter:t})=>{let r=t.schema;if(!r){let m=Ze({content:t.content}),f=m.find(l=>l.type==="json")||m[0];f&&(r=f.schema);}let n={deprecated:t.deprecated,description:t.description,...r},o=$t({context:e,name:t.name,schema:n}),i=t.style||Fm(t.in),a=t.explode!==void 0?t.explode:Mm(i),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:qm(t.in),explode:a,location:t.in,name:t.name,schema:W({context:e,schema:n,state:void 0}),style:i};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),o&&(c.pagination=o),t.required&&(c.required=t.required),c},ji=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[Q(e)]=Pi({context:t,parameter:r});};var Lm=({context:e,requestBody:t})=>{let r=Ze({content:t.content}),n=r.find(p=>p.type==="json")||r[0],o=n?n.schema:void 0,i={description:t.description,...o},a={schema:W({context:e,schema:i,state:void 0})};return t.description&&(a.description=t.description),t.required&&(a.required=t.required),a},Ci=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[Q(e)]=Lm({context:t,requestBody:r});};var ki=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=ke(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Ei=e=>{let t=[],r=new Map;if(e.paths)for(let n of Object.entries(e.paths)){let o=n[0],i=n[1];for(let a of H){let p=i[a];if(!p)continue;let c=N({method:a,path:o});p.operationId&&(r.has(p.operationId)?t.push({code:"duplicate_key",context:{key:"operationId",value:p.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",o,a,"operationId"],severity:"error"}):r.set(p.operationId,c));}}if(e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&t.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let n=0;n<e.servers.length;n++){let o=e.servers[n];!o||typeof o!="object"?t.push({code:"invalid_type",context:{actual:typeof o,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",n],severity:"error"}):o.url||t.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",n],severity:"error"});}}return {issues:t,valid:!t.some(n=>n.severity==="error")}};var hs=e=>{if(e.config.parser.validate_EXPERIMENTAL){let o=Ei(e.spec);tr({context:e,result:o});}if(Jt(e.config.parser.filters)){let o=Xt(e.config.parser.filters,e.spec),{graph:i}=lt(e.spec),{resourceMetadata:a}=Zt(i),p=Gt({filters:o,resourceMetadata:a});Si({...p,preserveOrder:o.preserveOrder,spec:e.spec});}er({context:e});let r={ids:new Map},n=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let i=e.spec.components.securitySchemes[o],a="$ref"in i?e.resolveRef(i.$ref):i;n.set(o,a);}for(let o in e.spec.components.parameters){let i=`#/components/parameters/${o}`,a=e.spec.components.parameters[o],p="$ref"in a?e.resolveRef(a.$ref):a;ji({$ref:i,context:e,parameter:p});}for(let o in e.spec.components.requestBodies){let i=`#/components/requestBodies/${o}`,a=e.spec.components.requestBodies[o],p="$ref"in a?e.resolveRef(a.$ref):a;Ci({$ref:i,context:e,requestBody:p});}for(let o in e.spec.components.schemas){let i=`#/components/schemas/${o}`,a=e.spec.components.schemas[o];Ii({$ref:i,context:e,schema:a});}}ki({context:e});for(let o in e.spec.paths){let i=e.spec.paths[o],a=i.$ref?{...e.resolveRef(i.$ref),...i}:i,p={context:e,operation:{description:a.description,parameters:Me({context:e,parameters:a.parameters}),security:e.spec.security,servers:a.servers,summary:a.summary},path:o,securitySchemesMap:n,state:r};a.delete&&et({...p,method:"delete",operation:{...p.operation,...a.delete,parameters:$({source:Me({context:e,parameters:a.delete.parameters}),target:p.operation.parameters})}}),a.get&&et({...p,method:"get",operation:{...p.operation,...a.get,parameters:$({source:Me({context:e,parameters:a.get.parameters}),target:p.operation.parameters})}}),a.head&&et({...p,method:"head",operation:{...p.operation,...a.head,parameters:$({source:Me({context:e,parameters:a.head.parameters}),target:p.operation.parameters})}}),a.options&&et({...p,method:"options",operation:{...p.operation,...a.options,parameters:$({source:Me({context:e,parameters:a.options.parameters}),target:p.operation.parameters})}}),a.patch&&et({...p,method:"patch",operation:{...p.operation,...a.patch,parameters:$({source:Me({context:e,parameters:a.patch.parameters}),target:p.operation.parameters})}}),a.post&&et({...p,method:"post",operation:{...p.operation,...a.post,parameters:$({source:Me({context:e,parameters:a.post.parameters}),target:p.operation.parameters})}}),a.put&&et({...p,method:"put",operation:{...p.operation,...a.put,parameters:$({source:Me({context:e,parameters:a.put.parameters}),target:p.operation.parameters})}}),a.trace&&et({...p,method:"trace",operation:{...p.operation,...a.trace,parameters:$({source:Me({context:e,parameters:a.trace.parameters}),target:p.operation.parameters})}});}};var dn="#/components/schemas/";var sr=({config:e,name:t})=>{let r=e.plugins["@hey-api/sdk"];if(r?.config.classNameBuilder){let n="";return typeof r.config.classNameBuilder=="function"?n=r.config.classNameBuilder(t):n=r.config.classNameBuilder.replace("{{name}}",t),n}return t},Ni=e=>T().plugins["@hey-api/typescript"]?.config.style==="PascalCase"?A({case:"PascalCase",value:e}):e,vi=e=>{let t=Ni(e);return jt(t).replace(pe,"_$1")};function gt(e,t,r){return r.indexOf(e)===t}function Mi(e,t){let r=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return r.localeCompare(n,"en")}var Rr=(e,t)=>Mi(e.name,t.name);function Fi(e){return e.sort(Rr)}var _m=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},Li=e=>e.map(t=>yn(t.value,true)).filter(gt).join(" | "),yn=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,xs=e=>{let t=_m(e.value,e.customName),r=yn(e.value);return {key:t,value:r}};var bs=e=>{let t=vi(e);return {$ref:dn+e,name:t}};var Tr=e=>e.format==="date"||e.format==="date-time",Os=e=>{let t=T();return e.base==="binary"?s.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.config.dates&&Tr(e)?s.typeNode("Date"):s.typeNode(e.base)},Km=e=>{let t=e.base==="null"?false:e.isNullable,r=Os(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(dn)){let o=bs(e.base);r=s.typeNode(o.name);}return s.typeUnionNode({isNullable:t,types:[r]})},Bm=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(n=>de(n));return s.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(de(e.link));return s.typeTupleNode({isNullable:e.isNullable,types:t})}return s.typeArrayNode([de(e.link)],e.isNullable)}return s.typeArrayNode([Os(e)],e.isNullable)},Wm=e=>{let t=e.enum.map(r=>yn(r.value));return s.typeUnionNode({isNullable:e.isNullable,types:t})},Hm=e=>{let t=e.link&&!Array.isArray(e.link)?de(e.link):Os(e);return s.typeRecordNode(["string"],[t],e.isNullable,true)},Di=({model:e,style:t})=>{let r=e.properties.map(o=>s.nodeToString({node:de(o),unescape:true})).filter(gt),n=t==="union"?s.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(o=>o.isNullable),types:r}):s.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?n:s.typeParenthesizedNode({type:n})},Um=e=>{if(!e.properties.length)return s.typeNode("unknown");let t=T(),r=_(t),n=e.properties.map(o=>{let i=o.isRequired?"":"?",a=de(o),p=r?/^\dXX$/.test(o.name)?Ue(o.name):o.name:Ue(cr(_i(o.name)));return o.name==="[key: string]"&&(p=o.name,i&&(i="",a=s.typeUnionNode({types:[a,"undefined"]}))),{comment:[o.description&&F(o.description),o.deprecated&&"@deprecated"],isReadOnly:o.isReadOnly,isRequired:i==="",name:p,type:a}});return s.typeInterfaceNode({isNullable:e.isNullable,properties:n,useLegacyResolution:true})},de=e=>{switch(e.export){case "all-of":return Di({model:e,style:"intersection"});case "any-of":case "one-of":return Di({model:e,style:"union"});case "array":return Bm(e);case "dictionary":return Hm(e);case "enum":return Wm(e);case "interface":return Um(e);case "const":case "generic":case "reference":default:return Km(e)}},ye=({client:e,count:t=1,create:r=false,meta:n,nameTransformer:o})=>{let i={created:false,name:""},a=n.name;o&&(a=o(a)),t>1&&(a=`${a}${t}`);let p=e.types[a];return p?p.$ref===n.$ref?i={created:false,name:a}:i=ye({client:e,count:t+1,create:r,meta:n,nameTransformer:o}):r&&(e.types[a]=n,i={created:true,name:a}),i},Vi=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},_i=e=>{let t=T();return _(t)?A({case:"camelCase",value:cs(e)}).replace(pe,"_$1"):e};var Le=e=>e.some(r=>r.isRequired);var lf=({config:e,spec:t})=>{let r=new nn({config:e,spec:t});if("swagger"in r.spec)return ys(r),r;switch(r.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return gs(r),r;case "3.1.0":case "3.1.1":return hs(r),r;}throw new Error("Unsupported OpenAPI specification")};var Ts=(e,t)=>{let r=T();if(Array.isArray(e))return e.map(o=>Ts(o));if(typeof e!="object"||e===null)return e;let n={...e};return Object.entries(n).forEach(([o,i])=>{if(r.plugins["@hey-api/schemas"]?.config.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(o)&&t!=="properties"){delete n[o];return}o==="$ref"&&typeof i=="string"&&(n[o]=decodeURIComponent(i)),i&&typeof i=="object"&&(n[o]=Ts(i,o));}),n},uf=(e,t)=>{let r=T(),n=jt(e),o=r.plugins["@hey-api/schemas"];return o?.config.nameBuilder?typeof o.config.nameBuilder=="function"?o.config.nameBuilder(n,t):o.config.nameBuilder.replace("{{name}}",n):`${n}Schema`},Bi=({files:e,openApi:t,plugin:r})=>{let n=T();e.schemas=new Ee({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"schemas",name:"schemas.ts"});let o=(i,a)=>{let p=Ts(a),c=s.objectExpression({obj:p}),m=s.constVariable({assertion:"const",exportConst:true,expression:c,name:uf(i,a)});e.schemas.add(m);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([i,a])=>{o(i,a);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([i,a])=>{o(i,a);});};var gn={config:{exportFromIndex:false,nameBuilder:e=>`${e}Schema`,type:"json"},handler:Wo,handlerLegacy:Bi,name:"@hey-api/schemas",output:"schemas"};var tt=({operation:e})=>{let t=[];return e.summary&&t.push(F(e.summary)),e.description&&t.push(F(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0},qt=({context:e,operation:t})=>{let n=j(e.config).name==="@hey-api/client-nuxt",o=e.config.plugins["@hey-api/sdk"];return o&&!o.config.client&&!o.config.instance||n||on(t)};var or="TComposable",De="DefaultT",Is="ResT",ee="sdk";var Wi=({dataExpression:e,schema:t})=>{if(t.type!=="integer"||t.format!=="int64")return;let r=e!==void 0?s.callExpression({functionName:"BigInt",parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(r){if(typeof e=="string")return [r];if(e)return [s.assignment({left:e,right:r})]}},Hi=({dataExpression:e,schema:t})=>{if(t.type!=="string"||!(t.format==="date"||t.format==="date-time"))return;let r=s.identifier({text:"Date"});if(typeof e=="string")return [s.newExpression({argumentsArray:[s.identifier({text:e})],expression:r})];if(e)return [s.assignment({left:e,right:s.newExpression({argumentsArray:[e],expression:r})})]};var hn=({id:e,type:t})=>{let r="";switch(t){case "data":r="DataResponseTransformer";break;case "error":r="ErrorResponseTransformer";break;case "response":r="ResponseTransformer";break}return `${Ht}${A({case:"camelCase",value:e})}${r}`},yf=({$ref:e,type:t})=>{let r="";switch(t){case "response":r="SchemaResponseTransformer";break}let n=e.split("/");return `${n.slice(0,n.length-1).join("/")}/${A({case:"camelCase",value:n[n.length-1]})}${r}`},Ui=({$ref:e})=>yf({$ref:e,type:"response"}),Pr="transformers",xn="data",Ir=e=>e.map(t=>x__default.default.isStatement(t)?t:s.expressionToStatement({expression:t})),Qi=({node:e})=>e.kind===x__default.default.SyntaxKind.ReturnStatement,Xi=({plugin:e,schema:t})=>{let r=s.identifier({text:xn}),n=Ar({dataExpression:r,plugin:e,schema:t});return n.length&&!Qi({node:n[n.length-1]})&&n.push(s.returnStatement({expression:r})),n},Ar=({dataExpression:e,plugin:t,schema:r})=>{let n=t.context.file({id:Pr});if(r.$ref){let o=n.identifier({$ref:Ui({$ref:r.$ref}),create:true,namespace:"value"});if(o.created&&o.name){let i=t.context.resolveIrRef(r.$ref),a=Xi({plugin:t,schema:i});if(a.length){let p=s.constVariable({expression:s.arrowFunction({async:false,multiLine:true,parameters:[{name:xn,type:s.keywordTypeNode({keyword:"any"})}],statements:Ir(a)}),name:o.name});n.add(p);}else o=n.blockIdentifier({$ref:Ui({$ref:r.$ref}),namespace:"value"});}if(o.name){let i=s.callExpression({functionName:o.name,parameters:[e]});if(e)return typeof e=="string"&&e==="item"?[s.returnStatement({expression:i})]:[typeof e=="string"?i:s.assignment({left:e,right:i})]}return []}if(r.type==="array"){if(!e||typeof e=="string")return [];let o=r.items?Ar({dataExpression:"item",plugin:t,schema:r.items?.[0]?r.items[0]:{...r,type:void 0}}):[];if(!o.length)return [];let i=Ir(o);return i.some(p=>Qi({node:p}))||i.push(s.returnStatement({expression:s.identifier({text:"item"})})),[s.assignment({left:e,right:s.callExpression({functionName:s.propertyAccessExpression({expression:e,name:"map"}),parameters:[s.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:i})]})})]}if(r.type==="object"){let o=[],i=r.required??[];for(let a in r.properties){let p=r.properties[a],c=s.propertyAccessExpression({expression:e||xn,name:a}),m=Ar({dataExpression:c,plugin:t,schema:p});if(!m.length)continue;let f=!p.items?.find(u=>u.type==="null");i.includes(a)&&f?o=o.concat(m):o.push(s.ifStatement({expression:c,thenStatement:s.block({statements:Ir(m)})}));}return o}if(r.items){if(r.items.length===1)return Ar({dataExpression:"item",plugin:t,schema:r.items[0]});let o=[];if(r.logicalOperator==="and"||r.items.length===2&&r.items.find(i=>i.type==="null"||i.type==="void")){for(let i of r.items){let a=Ar({dataExpression:e||"item",plugin:t,schema:i});if(a.length)if(e)o=o.concat(a);else {let p=s.identifier({text:"item"});o.push(s.ifStatement({expression:p,thenStatement:s.block({statements:Ir(a)})}),s.returnStatement({expression:p}));}}return o}r.type!=="enum"&&((r.items??[]).every(i=>["boolean","integer","null","number","string"].includes(i.type))||console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(r)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`));}for(let o of t.config.transformers??[]){let i=o({config:t.config,dataExpression:e,file:n,schema:r});if(i)return i}return []},Ji=({plugin:e})=>{let t=e.createFile({id:Pr,path:e.output});e.config.dates&&(e.config.transformers=[...e.config.transformers??[],Hi]),e.config.bigInt&&(e.config.transformers=[...e.config.transformers??[],Wi]),e.forEach("operation",({operation:r})=>{let{response:n}=Ne(r);if(!n)return;if(n.items&&n.items.length>1){e.context.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${N(r)} has ${n.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let o=e.context.file({id:P}).identifier({$ref:Y({config:e.context.config,id:r.id,type:"response"}),namespace:"type"});if(!o.name)return;let i=t.identifier({$ref:hn({id:r.id,type:"response"}),create:true,namespace:"value"});if(!i.name)return;let a=Xi({plugin:e,schema:n});if(a.length){t.import({asType:true,module:t.relativePathToFile({context:e.context,id:P}),name:o.name});let p=s.constVariable({exportConst:true,expression:s.arrowFunction({async:true,multiLine:true,parameters:[{name:xn,type:s.keywordTypeNode({keyword:"any"})}],returnType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:o.name})],typeName:"Promise"}),statements:Ir(a)}),name:i.name});t.add(p);}else i=t.blockIdentifier({$ref:hn({id:r.id,type:"response"}),namespace:"value"});});};var gf=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Gi=({operation:e,plugin:t})=>{if(!e.security||!t.config.auth)return [];let r=[];for(let n of e.security){let o=gf({securitySchemeObject:n});o?r.push(o):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(n,null,2)}`);}return r};var Zi=({operation:e,plugin:t})=>{if(!t.config.validator.request)return;let r=t.getPlugin(t.config.validator.request);if(!(!r||!r.api.createRequestValidator))return r.api.createRequestValidator({file:t.context.file({id:ee}),operation:e,plugin:r})},Yi=({operation:e,plugin:t})=>{if(!t.config.validator.response)return;let r=t.getPlugin(t.config.validator.response);if(!(!r||!r.api.createResponseValidator))return r.api.createResponseValidator({file:t.context.file({id:ee}),operation:e,plugin:r})};var ea=({context:e,value:t})=>{let r=A({case:"PascalCase",value:mt(t)});return sr({config:e.config,name:r})},hf=({operation:e,plugin:t})=>t.config.methodNameBuilder?t.config.methodNameBuilder(e):!t.config.asClass&&e.id.match(pe)?`${e.id}_`:e.id,bn=({context:e,operation:t,plugin:r})=>{let n=new Map,o,i,a=[];if(r.config.classStructure==="auto"&&t.operationId&&(a=t.operationId.split(/[./]/).filter(Boolean),a.length>1)){let c=a.pop();i=A({case:"camelCase",value:mt(c)}),o=a.pop();}let p=r.config.instance?[r.config.instance]:t.tags??["default"];for(let c of p){let m=ea({context:e,value:o||c});n.set(c,{className:m,methodName:i||hf({operation:t,plugin:r}),path:(o?[c,...a,o]:[c]).map(f=>ea({context:e,value:f}))});}return n},jr=({context:e,file:t,operation:r,throwOnError:n})=>{let i=j(e.config).name==="@hey-api/client-nuxt",a=Se({context:e,file:t,operation:r,type:"data"}),p=Se({context:e,file:t,operation:r,type:i?"response":"responses"}),c=D.Options.name;return i?`${c}<${or}, ${a.name||"unknown"}, ${p.name||"unknown"}, ${De}>`:n?`${c}<${a.name||"unknown"}, ${n}>`:a.name?`${c}<${a.name}>`:c},xf=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},As=({context:e,isRequiredOptions:t,operation:r,plugin:n})=>{let o=e.file({id:ee}),i=o.nameWithoutExtension(),a=j(e.config),p=a.name==="@hey-api/client-nuxt",c=Se({context:e,file:o,operation:r,type:p?"error":"errors"}),m=Se({context:e,file:o,operation:r,type:p?"response":"responses"}),f=[];if(r.body)switch(r.body.type){case "form-data":f.push({spread:"formDataBodySerializer"}),o.import({module:K({config:e.config,sourceOutput:i}),name:"formDataBodySerializer"});break;case "json":break;case "text":case "octet-stream":f.push({key:"bodySerializer",value:null});break;case "url-search-params":f.push({spread:"urlSearchParamsBodySerializer"}),o.import({module:K({config:e.config,sourceOutput:i}),name:"urlSearchParamsBodySerializer"});break}for(let v in r.parameters?.query){let w=r.parameters.query[v];if((w.schema.type==="array"||w.schema.type==="tuple")&&(w.style!=="form"||!w.explode)){f.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}let l=Zi({operation:r,plugin:n});if(l&&f.push({key:"requestValidator",value:l}),n.config.transformer==="@hey-api/transformers"){let v=e.file({id:Pr}).identifier({$ref:hn({id:r.id,type:"response"}),namespace:"value"});v.name&&(o.import({module:o.relativePathToFile({context:e,id:Pr}),name:v.name}),f.push({key:"responseTransformer",value:v.name}));}if(a.name==="@hey-api/client-axios"){for(let v in r.responses)if(ps({statusCode:v})==="2XX"){let w=r.responses[v],he=xf(w?.mediaType);if(he){f.push({key:"responseType",value:he});break}}}let u=Yi({operation:r,plugin:n});u&&f.push({key:"responseValidator",value:u}),n.config.responseStyle==="data"&&f.push({key:"responseStyle",value:n.config.responseStyle});let d=Gi({operation:r,plugin:n});if(d.length&&f.push({key:"security",value:s.arrayLiteralExpression({elements:d})}),f.push({key:"url",value:r.path}),f.push({spread:"options"}),r.body){let v=r.parameters?.header?.["content-type"];if(!!!v?.required){let he=s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:!t,name:"headers"});f.push({key:"headers",value:[{key:v?.name??"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:he}]});}}let g=m.name||"unknown",h=c.name||"unknown",S=n.config.client?o.import({alias:"_heyApiClient",module:o.relativePathToFile({context:e,id:Ie}),name:"client"}):void 0,b=s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:!t,name:"client"}),L;n.config.instance?L=s.binaryExpression({left:b,operator:"??",right:s.propertyAccessExpression({expression:s.this(),name:"_client"})}):S?.name?L=s.binaryExpression({left:b,operator:"??",right:s.identifier({text:S.name})}):L=b;let C=[];return p?C.push(or,`${g} | ${De}`,h,De):C.push(g,h,"ThrowOnError"),n.config.responseStyle==="data"&&C.push(s.stringLiteral({text:n.config.responseStyle})),[s.returnFunctionCall({args:[s.objectExpression({identifiers:["responseTransformer"],obj:f})],name:s.propertyAccessExpression({expression:L,name:s.identifier({text:r.method})}),types:C})]};var Mt=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:n,name:o}=ye({meta:e,...r});return o&&t(o),{created:n,name:o}},oa=e=>`${e}ModelResponseTransformer`,Ft=e=>`${A({case:"PascalCase",value:e})}Data`,ir=e=>`${A({case:"PascalCase",value:e})}Error`,Ps=e=>`${e}Transformer`,Ve=e=>`${A({case:"PascalCase",value:e})}Response`,js=({importedType:e,throwOnError:t})=>{let r=D.OptionsLegacyParser.name;return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},ta=(e,t)=>{let r=T(),{name:n}=ye({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Ft}),o=Le(t.parameters);if(!_(r))return [{isRequired:o,name:"options",type:js({importedType:n,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let i=a=>{if(a.default!==void 0)return JSON.stringify(a.default,null,4)};return r.useOptions?[{default:o?void 0:{},name:"data",type:n}]:t.parameters.map(a=>{let p=`${n}['${a.name}']`;return {default:a?.default,isRequired:(!a.isRequired&&!i(a)?"?":"")=="",name:a.name,type:p}})},ra=(e,t)=>{let r=T(),n=s.typeNode("void");if(t.responses.filter(a=>a.responseTypes.includes("success")).length){let{name:a}=ye({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Ve});n=s.typeUnionNode({types:[a]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.config.response==="response"&&(n=s.typeNode("ApiResult",[n])),j(r).name==="legacy/angular"?n=s.typeNode("Observable",[n]):n=s.typeNode("CancelablePromise",[n]),n},na=e=>{let t=T();if(!_(t))return [e.deprecated&&"@deprecated",e.summary&&F(e.summary),e.description&&F(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(i=>`@param data.${i.name} ${i.description?F(i.description):""}`)]:r=e.parameters.map(i=>`@param ${i.name} ${i.description?F(i.description):""}`));let n=e.responses.filter(i=>i.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&F(e.summary),e.description&&F(e.description),...r,...n.map(i=>`@returns ${i.type} ${i.description?F(i.description):""}`),"@throws ApiError"]},bf=({client:e,onClientImport:t,onImport:r,operation:n})=>{let o=T(),i=Ve(n.name),{name:a}=ye({client:e,meta:{$ref:`transformers/${i}`,name:i},nameTransformer:Ps});if(a&&r(a),!_(o)){let f=[{spread:"options"}],u=n.parameters.filter(d=>d.in==="body"||d.in==="formData").map(d=>d.mediaType||(d.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(gt);return u.length===1&&(u[0]==="multipart/form-data"&&(f=[...f,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),u[0]==="application/x-www-form-urlencoded"&&(f=[...f,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:u[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),f=[...f,{key:"url",value:n.path}],a&&(f=[...f,{key:"responseTransformer",value:a}]),s.objectExpression({identifiers:["responseTransformer"],obj:f})}let p=f=>f.reduce((l,u)=>{let d=u.prop,g=o.useOptions?`data.${u.name}`:u.name;return d===g?l[d]=d:Ue(d)===d?l[d]=g:l[`'${d}'`]=g,l},{}),c={method:n.method,url:n.path};n.parametersPath.length&&(c.path=p(n.parametersPath)),n.parametersCookie.length&&(c.cookies=p(n.parametersCookie)),n.parametersHeader.length&&(c.headers=p(n.parametersHeader)),n.parametersQuery.length&&(c.query=p(n.parametersQuery)),n.parametersForm.length&&(c.formData=p(n.parametersForm)),n.parametersBody&&(n.parametersBody.in==="formData"&&(o.useOptions?c.formData=`data.${n.parametersBody.name}`:c.formData=n.parametersBody.name),n.parametersBody.in==="body"&&(o.useOptions?c.body=`data.${n.parametersBody.name}`:c.body=n.parametersBody.name)),n.parametersBody?.mediaType&&(c.mediaType=n.parametersBody?.mediaType),n.responseHeader&&(c.responseHeader=n.responseHeader),a&&(c.responseTransformer=a);let m=n.responses.filter(f=>f.responseTypes.includes("error"));if(m.length>0){let f={};m.forEach(l=>{f[l.code]=l.description??"";}),c.errors=f;}return s.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},ge=({config:e,handleIllegal:t,id:r,operation:n})=>e.plugins["@hey-api/sdk"]?.config.methodNameBuilder?e.plugins["@hey-api/sdk"].config.methodNameBuilder(n):t&&r.match(pe)?`${r}_`:r,sa=({client:e,onClientImport:t,onImport:r,operation:n})=>{let o=T(),i=bf({client:e,onClientImport:t,onImport:r,operation:n});if(!_(o)){let p=ye({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:ir}).name,m=n.responses.filter(f=>f.responseTypes.includes("success")).length?ye({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:Ve}).name:"void";return [s.returnFunctionCall({args:[i],name:`(options?.client ?? client).${n.method.toLocaleLowerCase()}`,types:p&&m?[m,p,"ThrowOnError"]:p?["unknown",p,"ThrowOnError"]:m?[m,"unknown","ThrowOnError"]:[]})]}return Ot(o)?[s.returnFunctionCall({args:[i],name:"this.httpRequest.request"})]:j(o).name==="legacy/angular"?[s.returnFunctionCall({args:["OpenAPI","this.http",i],name:"__request"})]:[s.returnFunctionCall({args:["OpenAPI",i],name:"__request"})]},Of=({client:e,onClientImport:t,onImport:r,onNode:n,service:o})=>{let i=T(),a=j(i),p=_(i);for(let u of o.operations)u.parameters.length&&Mt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Ft,onImport:r}),p||Mt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:ir,onImport:r}),u.responses.filter(g=>g.responseTypes.includes("success")).length&&Mt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Ve,onImport:r});let c={default:("throwOnError"in a.config?a.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!i.plugins["@hey-api/sdk"]?.config.asClass&&!Ot(i)){for(let u of o.operations){let d={parameters:ta(e,u),returnType:p?ra(e,u):void 0,statements:sa({client:e,onClientImport:t,onImport:r,operation:u}),types:p?void 0:[c]},g=a.name==="legacy/angular"?s.anonymousFunction(d):s.arrowFunction(d),h=s.constVariable({comment:na(u),exportConst:true,expression:g,name:ge({config:i,handleIllegal:true,id:u.name,operation:u})});n(h);}return}let m=o.operations.map(u=>s.methodDeclaration({accessLevel:"public",comment:na(u),isStatic:Ot(i)===void 0&&a.name!=="legacy/angular",name:ge({config:i,id:u.name,operation:u}),parameters:ta(e,u),returnType:p?ra(e,u):void 0,statements:sa({client:e,onClientImport:t,onImport:r,operation:u}),types:p?void 0:[c]}));if(!m.length)return;Ot(i)?m=[s.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...m]:a.name==="legacy/angular"&&(m=[s.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...m]);let f=[];m.forEach((u,d)=>{d&&f.push(s.identifier({text:`
`})),f.push(u);});let l=s.classDeclaration({decorator:a.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:true,name:sr({config:i,name:o.name}),nodes:f});n(l);},ia=({client:e,files:t,plugin:r})=>{let n=T(),o=_(n),i="sdk";if(t.sdk=new Ee({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"sdk",name:`${i}.ts`}),!o)t.sdk.import({module:K({config:n,sourceOutput:i}),name:"createClient"}),t.sdk.import({module:K({config:n,sourceOutput:i}),name:"createConfig"}),t.sdk.import({...D.OptionsLegacyParser,module:K({config:n,sourceOutput:i})});else if(j(n).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),Ot(n)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),n.plugins["@hey-api/sdk"]?.config.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),Ot(n)){let p=j(n);t.sdk.import({asType:p.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!o){let a=j(n),p=s.constVariable({exportConst:true,expression:s.callExpression({functionName:"createClient",parameters:[s.callExpression({functionName:"createConfig",parameters:["throwOnError"in a&&a.throwOnError?s.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(p);}for(let a of e.services)Of({client:e,onClientImport:p=>{t.sdk.import({module:K({config:n,sourceOutput:i}),name:p});},onImport:p=>{t.sdk.import({asType:!p.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:p});},onNode:p=>{t.sdk.add(p);},service:a});};var aa=({clientOptions:e,context:t,plugin:r})=>{let n=t.file({id:ee}),i=j(t.config).name==="@hey-api/client-nuxt",a=K({config:t.config,sourceOutput:n.nameWithoutExtension()}),p=n.import({asType:true,module:a,name:"TDataShape"}),c=n.import({asType:true,module:a,name:"Client"}),m=s.typeAliasDeclaration({exportType:true,name:"Options",type:s.typeIntersectionNode({types:[s.typeReferenceNode({typeArguments:i?[s.typeReferenceNode({typeName:"TComposable"}),s.typeReferenceNode({typeName:"TData"}),s.typeReferenceNode({typeName:Is}),s.typeReferenceNode({typeName:De})]:[s.typeReferenceNode({typeName:"TData"}),s.typeReferenceNode({typeName:"ThrowOnError"})],typeName:e.name}),s.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!r.config.client,name:"client",type:s.typeReferenceNode({typeName:c.name})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:s.typeReferenceNode({typeArguments:[s.keywordTypeNode({keyword:"string"}),s.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:i?[s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:"Composable"}),name:"TComposable"}),s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:p.name}),defaultType:s.typeReferenceNode({typeName:p.name}),name:"TData"}),s.typeParameterDeclaration({defaultType:s.keywordTypeNode({keyword:"unknown"}),name:Is}),s.typeParameterDeclaration({defaultType:s.keywordTypeNode({keyword:"undefined"}),name:De})]:[s.typeParameterDeclaration({constraint:s.typeReferenceNode({typeName:p.name}),defaultType:s.typeReferenceNode({typeName:p.name}),name:"TData"}),s.typeParameterDeclaration({constraint:s.keywordTypeNode({keyword:"boolean"}),defaultType:s.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});n.add(m);};var Rf=({plugin:e})=>{let t=s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:s.this(),name:"_client"}),operator:"=",right:s.propertyAccessExpression({expression:s.identifier({text:"args"}),name:"client"})})});return [s.propertyDeclaration({initializer:e.config.client?s.identifier({text:"_heyApiClient"}):void 0,modifier:"protected",name:"_client",type:x__default.default.factory.createTypeReferenceNode("Client")}),s.identifier({text:`
`}),s.constructorDeclaration({multiLine:true,parameters:[{isRequired:!e.config.client,name:"args",type:s.typeInterfaceNode({properties:[{isRequired:!e.config.client,name:"client",type:"Client"}],useLegacyResolution:false})}],statements:[e.config.client?s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"args"}),isOptional:true,name:"client"}),thenStatement:s.block({statements:[t]})}):t]})]},Tf=({plugin:e})=>{let t=j(e.context.config),r=t.name==="@hey-api/client-nuxt",n=e.context.file({id:ee}),o=new Map,i=new Set,a=e.config.instance?Rf({plugin:e}):[];e.forEach("operation",({operation:c})=>{let m=qt({context:e.context,operation:c}),f=Se({context:e.context,file:n,operation:c,type:"response"}),l=bn({context:e.context,operation:c,plugin:e});for(let u of l.values())u.path.forEach((d,g)=>{o.has(d)||o.set(d,{className:d,classes:new Set,methods:new Set,nodes:[],root:!g});let h=u.path[g-1];if(h){let C=o.get(h);C.classes.add(d),o.set(h,C);}if(!(u.path.length===g+1))return;let b=o.get(d);if(b.methods.has(u.methodName))return;let L=s.methodDeclaration({accessLevel:"public",comment:tt({operation:c}),isStatic:!e.config.instance,name:u.methodName,parameters:[{isRequired:m,name:"options",type:jr({context:e.context,file:n,operation:c,throwOnError:r?void 0:"ThrowOnError"})}],returnType:void 0,statements:As({context:e.context,isRequiredOptions:m,operation:c,plugin:e}),types:r?[{extends:s.typeNode("Composable"),name:or},{default:f.name?s.typeReferenceNode({typeName:f.name}):s.typeNode("undefined"),extends:f.name?s.typeReferenceNode({typeName:f.name}):void 0,name:De}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]});b.nodes.length?b.nodes.push(s.identifier({text:`
`}),L):b.nodes.push(L),b.methods.add(u.methodName),o.set(d,b);});});let p=c=>{if(i.has(c.className))return;if(c.classes.size)for(let f of c.classes){let l=o.get(f);p(l),c.nodes.push(s.propertyDeclaration({initializer:e.config.instance?s.newExpression({argumentsArray:e.config.instance?[s.objectExpression({multiLine:false,obj:[{key:"client",value:s.propertyAccessExpression({expression:s.this(),name:"_client"})}]})]:[],expression:s.identifier({text:l.className})}):s.identifier({text:l.className}),modifier:e.config.instance?void 0:"static",name:A({case:"camelCase",value:l.className})}));}let m=s.classDeclaration({exportClass:c.root,extendedClasses:e.config.instance?["_HeyApiClient"]:void 0,name:c.className,nodes:c.nodes});n.add(m),i.add(c.className);};if(a.length){let c=s.classDeclaration({exportClass:false,name:"_HeyApiClient",nodes:a});n.add(c);}for(let c of o.values())p(c);},If=({plugin:e})=>{let t=j(e.context.config),r=t.name==="@hey-api/client-nuxt",n=e.context.file({id:ee});e.forEach("operation",({operation:o})=>{let i=qt({context:e.context,operation:o}),a=Se({context:e.context,file:n,operation:o,type:"response"}),p=s.constVariable({comment:tt({operation:o}),exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:i,name:"options",type:jr({context:e.context,file:n,operation:o,throwOnError:r?void 0:"ThrowOnError"})}],returnType:void 0,statements:As({context:e.context,isRequiredOptions:i,operation:o,plugin:e}),types:r?[{extends:s.typeNode("Composable"),name:or},{default:a.name?s.typeReferenceNode({typeName:a.name}):s.typeNode("undefined"),extends:a.name?s.typeReferenceNode({typeName:a.name}):void 0,name:De}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:ge({config:e.context.config,handleIllegal:true,id:o.id,operation:o})});n.add(p);});},pa=({plugin:e})=>{let t=e.createFile({id:ee,path:e.output}),r=K({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({...D.Options,alias:"ClientOptions",module:r});j(e.context.config).name==="@hey-api/client-nuxt"&&t.import({asType:true,module:r,name:"Composable"}),aa({clientOptions:n,context:e.context,plugin:e}),e.config.asClass?Tf({plugin:e}):If({plugin:e});};var On={config:{asClass:false,auth:true,classStructure:"auto",client:true,exportFromIndex:true,instance:false,operationId:true,response:"body",responseStyle:"fields",transformer:false,validator:false},dependencies:["@hey-api/typescript"],handler:pa,handlerLegacy:ia,name:"@hey-api/sdk",output:"sdk",resolveConfig:(e,t)=>{e.config.client?(typeof e.config.client=="boolean"&&(e.config.client=t.pluginByTag("client",{defaultPlugin:"@hey-api/client-fetch"})),e.dependencies.add(e.config.client)):e.config.client=false,e.config.transformer?(typeof e.config.transformer=="boolean"&&(e.config.transformer=t.pluginByTag("transformer")),e.dependencies.add(e.config.transformer)):e.config.transformer=false,typeof e.config.validator!="object"&&(e.config.validator={request:e.config.validator,response:e.config.validator}),e.config.validator.request?(typeof e.config.validator.request=="boolean"&&(e.config.validator.request=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.request)):e.config.validator.request=false,e.config.validator.response?(typeof e.config.validator.response=="boolean"&&(e.config.validator.response=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.response)):e.config.validator.response=false,e.config.instance?(typeof e.config.instance!="string"&&(e.config.instance="Sdk"),e.config.asClass=true):e.config.instance=false;}};var Pf="$OpenApiTs",J={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},jf=({comments:e,leadingComment:t,meta:r,obj:n,onNode:o,...i})=>{if(!r)return;let{created:a,name:p}=ye({create:true,meta:r,...i});if(a){let c=s.enumDeclaration({comments:e,leadingComment:t,name:p,obj:n});o(c);}},rt=({comment:e,meta:t,onCreated:r,onNode:n,type:o,...i})=>{if(!t)return {created:false,name:""};let a=ye({create:true,meta:t,...i}),{created:p,name:c}=a;if(p){let m=s.typeAliasDeclaration({comment:e,exportType:true,name:c,type:o});n(m),r?.(c);}return a},Cf=e=>{let t=T(),r=[];ma(e),e.model.enums.forEach(n=>{let o=t.plugins["@hey-api/typescript"];return o?.config&&typeof o.config.enums=="object"&&o.config.enums.mode!=="typescript+namespace"?ca({...e,model:n}):kf({...e,model:n,onNode:i=>{r.push(i);}})}),r.length&&e.onNode(s.namespaceDeclaration({name:e.model.name,statements:r}));},ca=({client:e,model:t,onNode:r})=>{let n=T(),o={},i={};t.enum.forEach(c=>{let{key:m,value:f}=xs(c);o[m]=f;let l=c.customDescription||c.description;l&&(i[m]=[F(l)]);});let a=[t.description&&F(t.description),t.deprecated&&"@deprecated"],p=n.plugins["@hey-api/typescript"];if(p?.config&&typeof p.config.enums=="object"&&p.config.enums.enabled&&(p.config.enums.mode==="typescript"||p.config.enums.mode==="typescript+namespace")){jf({client:e,comments:i,leadingComment:a,meta:t.meta,obj:o,onNode:r});return}rt({client:e,comment:a,meta:t.meta,onCreated:c=>{let m=n.plugins["@hey-api/typescript"];if(m?.config&&typeof m.config.enums=="object"&&m.config.enums.enabled&&m.config.enums.mode==="javascript"){let f=s.objectExpression({multiLine:true,obj:Object.entries(o).map(([u,d])=>({comments:i[u],key:u,value:d})),unescape:true}),l=s.constVariable({assertion:"const",comment:a,exportConst:true,expression:f,name:c});r(l);}},onNode:r,type:Li(t.enum)});},kf=({model:e,onNode:t})=>{let r={},n={};e.enum.forEach(o=>{let{key:i,value:a}=xs(o);r[i]=a;let p=o.customDescription||o.description;p&&(n[i]=[F(p)]);}),t(s.enumDeclaration({comments:n,leadingComment:[e.description&&F(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},ma=({client:e,model:t,onNode:r})=>{rt({client:e,comment:[t.description&&F(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:de(t)});},Ef=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return Cf(e);case "enum":return ca(e);default:return ma(e)}},Nf=({client:e,onNode:t})=>{let r={},n=T();if(!n.plugins["@hey-api/sdk"]&&!n.plugins["@hey-api/typescript"]?.config.tree)return;let o=_(n);for(let a of e.services)for(let p of a.operations){if(!p.parameters.length&&!p.responses.length)continue;r[p.path]||(r[p.path]={});let c=r[p.path];c[p.method]||(c[p.method]={});let m=c[p.method];if(m.$ref=p.name,p.responses.length>0){if(m.res||(m.res={}),Array.isArray(m.res))continue;p.responses.forEach(l=>{m.res[l.code]=l;});}if(p.parameters.length>0){let l={mediaType:null,...J,in:"body",name:"body",prop:"body"},u=p.parameters.filter(b=>b.in==="body");u.length||(u=p.parameters.filter(b=>b.in==="formData")),u.length===1?l={...J,...u[0],in:"body",isRequired:u[0].isRequired,name:"body",prop:"body"}:u.length>1&&(l={...J,in:"body",isRequired:u.some(b=>b.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:u});let d={...J,in:"header",isRequired:Le(p.parameters.filter(b=>b.in==="header")),mediaType:null,name:o?"header":"headers",prop:o?"header":"headers",properties:p.parameters.filter(b=>b.in==="header").sort(Rr)},g={...J,in:"path",isRequired:Le(p.parameters.filter(b=>b.in==="path")),mediaType:null,name:"path",prop:"path",properties:p.parameters.filter(b=>b.in==="path").sort(Rr)},h={...J,in:"query",isRequired:Le(p.parameters.filter(b=>b.in==="query")),mediaType:null,name:"query",prop:"query",properties:p.parameters.filter(b=>b.in==="query").sort(Rr)},S=o?Fi([...p.parameters]):[l,d,g,h].filter(b=>b.properties.length||b.$refs.length||b.mediaType);m.req=S,rt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Ft,onNode:t,type:de({...J,properties:S})});}let f=p.responses.filter(l=>l.responseTypes.includes("success"));if(f.length>0){rt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Ve,onNode:t,type:de({...J,export:"any-of",properties:f})});let l=p.responses.filter(u=>u.responseTypes.includes("error"));o||rt({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:ir,onNode:t,type:de(l.length?{...J,export:"one-of",properties:l}:{...J,base:"unknown"})});}}let i=Object.entries(r).map(([a,p])=>{let c=Object.entries(p).map(([f,l])=>{let u=f,d=[];if(l.req){let h=l.$ref,{name:S}=ye({client:e,meta:{$ref:h,name:h},nameTransformer:Ft}),b={...J,base:S,export:"reference",isRequired:true,name:"req",properties:[],type:S};d=[...d,b];}if(l.res){let h=Object.entries(l.res).map(([b,L])=>({...J,...L,isRequired:true,name:String(b)})),S={...J,isRequired:true,name:"res",properties:h};d=[...d,S];}return {...J,isRequired:true,name:u.toLocaleLowerCase(),properties:d}}).filter(Boolean);return {...J,isRequired:true,name:`'${a}'`,properties:c}});n.plugins["@hey-api/typescript"]?.config.tree&&rt({client:e,meta:{$ref:"@hey-api/openapi-ts",name:Pf},onNode:t,type:de({...J,properties:i})});},fa=({client:e,files:t,plugin:r})=>{let n=T();t.types=new Ee({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"types",name:"types.ts"});let o=i=>{t.types?.add(i);};for(let i of e.models)Ef({client:e,model:i,onNode:o});Nf({client:e,onNode:o});};var xt="data",vf=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",la=({client:e,model:t})=>t.$refs.map(n=>{let o=e.models.find(i=>i.meta?.$ref===n);if(!o)throw new Error(`Ref ${n} could not be found. Transformers cannot be generated without having access to all refs.`);return o}),ua=e=>{let t=e.model.meta.name,{name:r}=rt({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:oa,onCreated:o=>{let i=Sn({...e,meta:{$ref:`transformers/${t}`,name:o},path:[xt]});da({...e,async:false,name:o,statements:i});},type:`(${xt}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},wf=e=>{let{model:t}=e,r=la(e);if(r.length===1){let{created:n,name:o}=ua({...e,model:r[0]});return n?[s.transformArrayMutation({path:e.path,transformerName:o})]:[]}return Tr(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(n=>Tr(n))?[s.transformArrayMap({path:e.path,transformExpression:s.conditionalExpression({condition:s.identifier({text:"item"}),whenFalse:s.identifier({text:"item"}),whenTrue:s.transformNewDate({parameterName:"item"})})})]:[]},$f=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&Tr(t)?[s.transformDateMutation({path:r})]:Sn({...e,model:t,path:r})},Sn=e=>{let{model:t}=e;switch(t.export){case "array":return wf(e);case "interface":return t.properties.flatMap(r=>$f({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=la(e),{created:n,name:o}=ua({...e,model:r[0]});return n?t.in==="response"?[s.expressionToStatement({expression:s.callExpression({functionName:o,parameters:[xt]})})]:s.transformFunctionMutation({path:e.path,transformerName:o}):[]}default:return []}},da=({async:e,client:t,name:r,onNode:n,onRemoveNode:o,statements:i})=>{let a={created:false,name:r};if(!i.length)return Vi({client:t,name:r}),o?.(),a;let p=s.arrowFunction({async:e,multiLine:true,parameters:[{name:xt}],statements:[...i,s.returnVariable({expression:xt})]}),c=s.constVariable({exportConst:true,expression:p,name:r,typeName:r});return n(c),{created:true,name:r}},ya=({client:e,files:t})=>{let r=T(),n=i=>{t.types?.add(i);},o=()=>{t.types?.removeNode();};for(let i of e.services)for(let a of i.operations){let p=a.responses.filter(f=>f.responseTypes.includes("success"));if(!p.length)continue;let c=p.filter(f=>!vf(f));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${N(a)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let m=Ve(a.name);rt({client:e,meta:{$ref:`transformers/${m}`,name:m},nameTransformer:Ps,onCreated:f=>{let l=p.length>1?p.flatMap(u=>{let d=Sn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:u,onNode:n,onRemoveNode:o,path:[xt]});return d.length?[s.ifStatement({expression:s.safeAccessExpression(["data"]),thenStatement:s.block({statements:d})})]:[]}):Sn({client:e,meta:{$ref:`transformers/${m}`,name:m},model:p[0],onNode:n,onRemoveNode:o,path:[xt]});da({async:true,client:e,name:f,onNode:n,onRemoveNode:o,statements:l});},onNode:n,type:`(${xt}: any) => Promise<${m}>`});}};var Rn={config:{bigInt:true,dates:true,exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:Ji,handlerLegacy:ya,name:"@hey-api/transformers",output:"transformers",tags:["transformer"]};var ha=({context:e,name:t})=>(ae.lastIndex=0,ae.test(t)?t.startsWith("-")?x__default.default.factory.createStringLiteral(t):x__default.default.factory.createNumericLiteral(t):A({case:e.config.output.case,value:t}));var Re=({schema:e})=>{let t=[];return e.title&&t.push(F(e.title)),e.description&&t.push(F(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0};var Tn=s.keywordTypeNode({keyword:"string"}),Ff=({server:e})=>{let t=ke(e.url);return t.protocol&&t.host?s.literalTypeNode({literal:s.stringLiteral({text:e.url})}):s.templateLiteralType({value:[t.protocol||Tn,"://",t.host||Tn,t.port?`:${t.port}`:"",t.path||""]})},xa=({identifier:e,plugin:t,servers:r})=>{let n=t.context.file({id:P});if(!e.name)return;let o=j(t.context.config),i=r.map(p=>Ff({server:p}));r.length?"strictBaseUrl"in o.config&&o.config.strictBaseUrl||i.push(s.typeIntersectionNode({types:[Tn,x__default.default.factory.createTypeLiteralNode([])]})):i.push(Tn);let a=s.typeAliasDeclaration({exportType:true,name:e.name,type:s.typeInterfaceNode({properties:[{name:te(t.context.config),type:s.typeUnionNode({types:i})}],useLegacyResolution:false})});n.add(a);};var Lf=({$ref:e,plugin:t,schema:r})=>{let o=t.context.file({id:P}).identifier({$ref:e,create:true,namespace:"value"});if(!o.created)return;let i=Es({plugin:t,schema:r});t.config.enums.constantsIgnoreNull&&i.typeofItems.includes("object")&&(i.obj=i.obj.filter(c=>c.value!==null));let a=s.objectExpression({multiLine:true,obj:i.obj});return s.constVariable({assertion:"const",comment:Re({schema:r}),exportConst:true,expression:a,name:o.name||""})},Es=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((o,i)=>{let a=typeof o.const;r.includes(a)||r.push(a);let p;return o.title?p=o.title:a==="number"||a==="string"?p=`${o.const}`:a==="boolean"?p=o.const?"true":"false":o.const===null?p="null":p=`${i}`,p&&(p=A({case:e.config.enums.case,stripLeadingSeparators:false,value:p}),ae.lastIndex=0,ae.test(p)&&e.config.enums.enabled&&(e.config.enums.mode==="typescript"||e.config.enums.mode==="typescript+namespace")&&(p=`_${p}`)),{comments:Re({schema:o}),key:p,value:o.const}}),typeofItems:r}},ks=({$ref:e,plugin:t,schema:r,state:n})=>{let i=t.context.file({id:P}).identifier({$ref:e,create:true,namespace:"type"});if(!i.created&&!Br(e)&&t.config.enums.mode!=="typescript+namespace")return;let a=G({plugin:t,schema:{...r,type:void 0},state:n});if(a)return s.typeAliasDeclaration({comment:Re({schema:r}),exportType:true,name:i.name||"",type:a})},Sa=({plugin:e,schema:t})=>!Es({plugin:e,schema:t}).typeofItems.filter(n=>n!=="number"&&n!=="string").length,ba=({$ref:e,plugin:t,schema:r,state:n})=>{let o=Es({plugin:t,schema:r});if(!Sa({plugin:t,schema:r}))return ks({$ref:e,plugin:t,schema:r,state:n});let a=t.context.file({id:P}).identifier({$ref:e,create:true,namespace:"enum"});return s.enumDeclaration({leadingComment:Re({schema:r}),name:a.name||"",obj:o.obj})},Df=({namespace:e,plugin:t,schema:r,state:n})=>{if(!r.items)return s.typeArrayNode(s.keywordTypeNode({keyword:"unknown"}));r=ne({detectFormat:false,schema:r});let o=[];for(let i of r.items){let a=G({namespace:e,plugin:t,schema:i,state:n});a&&o.push(a);}if(o.length)return o.length===1?s.typeArrayNode(o[0]):r.logicalOperator==="and"?s.typeArrayNode(s.typeIntersectionNode({types:o})):s.typeArrayNode(s.typeUnionNode({types:o}))},Vf=({schema:e})=>e.const!==void 0?s.literalTypeNode({literal:s.ots.boolean(e.const)}):s.keywordTypeNode({keyword:"boolean"}),_f=({$ref:e,namespace:t,plugin:r,schema:n,state:o})=>{let i=r.context.file({id:P}),a=e?Br(e):false;if(e&&a){if(!r.config.enums.enabled){let c=ks({$ref:e,plugin:r,schema:n,state:o});c&&i.add(c);}if(r.config.enums.enabled){if(r.config.enums.mode==="javascript"){let c=ks({$ref:e,plugin:r,schema:n,state:o});c&&i.add(c);let m=Lf({$ref:e,plugin:r,schema:n});m&&i.add(m);}if(r.config.enums.mode==="typescript"){let c=ba({$ref:e,plugin:r,schema:n,state:o});c&&i.add(c);}if(r.config.enums.mode==="typescript+namespace"){let c=ba({$ref:e,plugin:r,schema:n,state:o});c&&(a?i.add(c):t.push(c));}}}return G({plugin:r,schema:{...n,type:void 0},state:o})},Kf=({plugin:e,schema:t})=>t.const!==void 0?s.literalTypeNode({literal:s.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.getPlugin("@hey-api/transformers")?.config.bigInt?s.typeReferenceNode({typeName:"bigint"}):s.keywordTypeNode({keyword:"number"}),Bf=({namespace:e,plugin:t,schema:r,state:n})=>{let o=t.context.file({id:P}),i,a,p=[],c=[],m=r.required??[],f=false;for(let l in r.properties){let u=r.properties[l],d=G({$ref:n?[...n.path,l].join("/"):`${Ht}${l}`,namespace:e,plugin:t,schema:u,state:n});if(!d)continue;let g=m.includes(l);p.push({comment:Re({schema:u}),isReadOnly:u.accessScope==="read",isRequired:g,name:ha({context:t.context,name:l}),type:d}),c.push(u),g||(f=true);}if(r.additionalProperties&&(r.additionalProperties.type!=="never"||!c.length)&&(r.additionalProperties.type==="never"?c=[r.additionalProperties]:c.unshift(r.additionalProperties),f&&c.push({type:"undefined"}),a={isRequired:!r.propertyNames,name:"key",type:G({namespace:e,plugin:t,schema:c.length===1?c[0]:{items:c,logicalOperator:"or"},state:n})},r.propertyNames?.$ref)){let l=o.identifier({$ref:r.propertyNames.$ref,create:true,namespace:"type"});l.name&&(i=l.name);}return s.typeInterfaceNode({indexKey:i,indexProperty:a,properties:p,useLegacyResolution:false})},Wf=({plugin:e,schema:t})=>{if(t.const!==void 0)return s.literalTypeNode({literal:s.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return s.typeUnionNode({types:[s.typeReferenceNode({typeName:"Blob"}),s.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.getPlugin("@hey-api/transformers")?.config.dates)return s.typeReferenceNode({typeName:"Date"})}return s.keywordTypeNode({keyword:"string"})},Hf=({namespace:e,plugin:t,schema:r,state:n})=>{let o=[];if(r.const&&Array.isArray(r.const))o=r.const.map(i=>s.valueToExpression({value:i})??s.identifier({text:"unknown"}));else if(r.items)for(let i of r.items){let a=G({namespace:e,plugin:t,schema:i,state:n});a&&o.push(a);}if(o.length)return s.typeTupleNode({types:o})},Oa=({$ref:e,namespace:t,plugin:r,schema:n,state:o})=>{switch(n.type){case "array":return Df({namespace:t,plugin:r,schema:n,state:o});case "boolean":return Vf({schema:n});case "enum":return _f({$ref:e,namespace:t,plugin:r,schema:n,state:o});case "integer":case "number":return Kf({plugin:r,schema:n});case "never":return s.keywordTypeNode({keyword:"never"});case "null":return s.literalTypeNode({literal:s.null()});case "object":return Bf({namespace:t,plugin:r,schema:n,state:o});case "string":return Wf({plugin:r,schema:n});case "tuple":return Hf({namespace:t,plugin:r,schema:n,state:o});case "undefined":return s.keywordTypeNode({keyword:"undefined"});case "unknown":return s.keywordTypeNode({keyword:"unknown"});case "void":return s.keywordTypeNode({keyword:"void"})}},Cs=({parameters:e})=>{let t={type:"object"};if(e){let r={},n=[];for(let o in e){let i=e[o];r[i.name]=ne({detectFormat:false,schema:i.schema}),i.required&&n.push(i.name);}t.properties=r,n.length&&(t.required=n);}return t},Uf=({operation:e,plugin:t})=>{let r=t.context.file({id:P}),n={type:"object"},o=[];n.properties||(n.properties={}),e.body?(n.properties.body=e.body.schema,e.body.required&&o.push("body")):n.properties.body={type:"never"},e.parameters?.header&&(n.properties.headers=Cs({parameters:e.parameters.header}),n.properties.headers.required&&o.push("headers")),e.parameters?.path?(n.properties.path=Cs({parameters:e.parameters.path}),n.properties.path.required&&o.push("path")):n.properties.path={type:"never"},e.parameters?.query?(n.properties.query=Cs({parameters:e.parameters.query}),n.properties.query.required&&o.push("query")):n.properties.query={type:"never"},n.properties.url={const:e.path,type:"string"},o.push("url"),n.required=o;let i=r.identifier({$ref:Y({config:t.context.config,id:e.id,type:"data"}),create:true,namespace:"type"}),a=G({plugin:t,schema:n,state:{path:[e.method,e.path,"data"]}});if(a){let p=s.typeAliasDeclaration({exportType:true,name:i.name||"",type:a});r.add(p);}},zf=({operation:e,plugin:t})=>{Uf({operation:e,plugin:t});let r=t.context.file({id:P}),{error:n,errors:o,response:i,responses:a}=Ne(e);if(o){let p=r.identifier({$ref:Y({config:t.context.config,id:e.id,type:"errors"}),create:true,namespace:"type"});if(p.name){let c=G({plugin:t,schema:o,state:{path:[e.method,e.path,"errors"]}});if(c){let m=s.typeAliasDeclaration({exportType:true,name:p.name,type:c});r.add(m);}if(n){let m=r.identifier({$ref:Y({config:t.context.config,id:e.id,type:"error"}),create:true,namespace:"type"});if(m.name){let f=s.typeReferenceNode({typeName:p.name}),l=x__default.default.factory.createTypeOperatorNode(x__default.default.SyntaxKind.KeyOfKeyword,f),u=s.typeAliasDeclaration({exportType:true,name:m.name,type:s.indexedAccessTypeNode({indexType:l,objectType:f})});r.add(u);}}}}if(a){let p=r.identifier({$ref:Y({config:t.context.config,id:e.id,type:"responses"}),create:true,namespace:"type"});if(p.name){let c=G({plugin:t,schema:a,state:{path:[e.method,e.path,"responses"]}});if(c){let m=s.typeAliasDeclaration({exportType:true,name:p.name,type:c});r.add(m);}if(i){let m=r.identifier({$ref:Y({config:t.context.config,id:e.id,type:"response"}),create:true,namespace:"type"});if(m.name){let f=s.typeReferenceNode({typeName:p.name}),l=x__default.default.factory.createTypeOperatorNode(x__default.default.SyntaxKind.KeyOfKeyword,f),u=s.typeAliasDeclaration({exportType:true,name:m.name,type:s.indexedAccessTypeNode({indexType:l,objectType:f})});r.add(u);}}}}},G=({$ref:e,namespace:t=[],plugin:r,schema:n,state:o})=>{let i=r.context.file({id:P}),a;if(n.$ref){let p=r.context.resolveIrRef(n.$ref),c=i.identifier({$ref:n.$ref,create:true,namespace:p.type==="enum"&&r.config.enums.enabled&&(r.config.enums.mode==="typescript"||r.config.enums.mode==="typescript+namespace")&&Sa({plugin:r,schema:p})?"enum":"type"});a=s.typeReferenceNode({typeName:c.name||""});}else if(n.type)a=Oa({$ref:e,namespace:t,plugin:r,schema:n,state:o});else if(n.items)if(n=ne({detectFormat:false,schema:n}),n.items){let p=[];for(let c of n.items){let m=G({namespace:t,plugin:r,schema:c,state:o});m&&p.push(m);}a=n.logicalOperator==="and"?s.typeIntersectionNode({types:p}):s.typeUnionNode({types:p});}else a=G({namespace:t,plugin:r,schema:n,state:o});else a=Oa({namespace:t,plugin:r,schema:{type:"unknown"},state:o});if(e&&Br(e)){if(t.length){let p=i.identifier({$ref:e,create:true,namespace:"value"}),c=s.namespaceDeclaration({name:p.name||"",statements:t});i.add(c);}if(n.type!=="enum"&&a){let p=i.identifier({$ref:e,create:true,namespace:"type"}),c=s.typeAliasDeclaration({comment:Re({schema:n}),exportType:true,name:p.name||"",type:a});i.add(c);}}return a},Ra=({plugin:e})=>{let r=e.createFile({id:P,identifierCase:e.config.case,path:e.output}).identifier({$ref:"ClientOptions",create:true,namespace:"type"}),n=[];e.forEach("operation","parameter","requestBody","schema","server",o=>{o.type==="operation"?zf({operation:o.operation,plugin:e}):o.type==="parameter"?G({$ref:o.$ref,plugin:e,schema:o.parameter.schema,state:{path:[]}}):o.type==="requestBody"?G({$ref:o.$ref,plugin:e,schema:o.requestBody.schema,state:{path:[]}}):o.type==="schema"?G({$ref:o.$ref,plugin:e,schema:o.schema,state:{path:[]}}):o.type==="server"&&n.push(o.server);}),xa({identifier:r,plugin:e,servers:n});};var An={config:{case:"PascalCase",exportFromIndex:true,style:"preserve",tree:false},handler:Ra,handlerLegacy:fa,name:"@hey-api/typescript",output:"types",resolveConfig:(e,t)=>{e.config.enums=t.valueToObject({defaultValue:{case:"SCREAMING_SNAKE_CASE",constantsIgnoreNull:false,enabled:!!e.config.enums,mode:"javascript"},mappers:{boolean:r=>({enabled:r}),string:r=>({mode:r})},value:e.config.enums});}};var bt=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name});return jr({context:t.context,file:r,operation:e})},Pn=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name}),o={asType:true,name:Se({context:t.context,file:r,operation:e,type:"error"}).name||""};if(o.name||(o=r.import({asType:true,module:t.name,name:"DefaultError"})),j(t.context.config).name==="@hey-api/client-axios"){let a=r.import({asType:true,module:"axios",name:"AxiosError"});o={...a,name:`${a.name}<${o.name}>`};}return o},jn=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name});return Se({context:t.context,file:r,operation:e,type:"response"}).name||"unknown"};var Ia="createQueryKey",kn="QueryKey",Cr="TOptions",Ta=s.identifier({text:"infinite"}),Cn=s.identifier({text:"options"}),En=({plugin:e})=>{let t=e.context.file({id:e.name}),r=t.identifier({$ref:`#/tanstack-query-create-query-key/${Ia}`,case:e.config.case,create:true,namespace:"value"});if(r.name){let n=s.indexedAccessTypeNode({indexType:s.literalTypeNode({literal:s.ots.number(0)}),objectType:s.typeReferenceNode({typeArguments:[s.typeReferenceNode({typeName:Cr})],typeName:kn})}),o=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:s.typeReferenceNode({typeName:Cr})},{isRequired:false,name:"infinite",type:s.typeReferenceNode({typeName:"boolean"})}],returnType:s.typeTupleNode({types:[n]}),statements:[s.constVariable({assertion:n,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:te(e.context.config),value:s.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${te(e.context.config)}`})}]}),name:"params",typeName:n}),s.ifStatement({expression:Ta,thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"_infinite"}),right:Ta})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Cn,isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Cn,isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Cn,isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:Cn,isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.propertyAccessExpression({expression:"options",name:"query"})})})]})}),s.returnStatement({expression:s.arrayLiteralExpression({elements:[s.identifier({text:"params"})]})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:D.Options.name})}),name:Cr}]}),name:r.name});t.add(o);}},Xf=({id:e,isInfinite:t,plugin:r})=>{let o=r.context.file({id:r.name}).identifier({$ref:`#/tanstack-query-create-query-key/${Ia}`,case:r.config.case,namespace:"value"});return s.callExpression({functionName:o.name||"",parameters:[s.ots.string(e),"options",t?s.ots.boolean(true):void 0]})},Nn=({plugin:e})=>{let t=e.context.file({id:e.name}),r=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:s.keywordTypeNode({keyword:"boolean"})}],n=s.typeAliasDeclaration({exportType:true,name:kn,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${Cr}, '${te(e.context.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),s.typeInterfaceNode({properties:r,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:D.Options.name})}),name:Cr}]});t.add(n);},vn=({isInfinite:e,operation:t,plugin:r,typeQueryKey:n})=>{let o=r.context.file({id:r.name}),i=bt({operation:t,plugin:r}),a=e?o.identifier({$ref:`#/tanstack-query-infinite-query-key/${t.id}`,case:r.config.infiniteQueryKeys.case,create:true,nameTransformer:r.config.infiniteQueryKeys.name,namespace:"value"}):o.identifier({$ref:`#/tanstack-query-query-key/${t.id}`,case:r.config.queryKeys.case,create:true,nameTransformer:r.config.queryKeys.name,namespace:"value"});return s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:on(t),name:"options",type:i}],returnType:e?n:void 0,statements:Xf({id:t.id,isInfinite:e,plugin:r})}),name:a.name||""})};var Pa="createInfiniteParams",Aa="infiniteQueryOptions",Gf=({plugin:e})=>{let t=e.context.file({id:e.name}),r=t.identifier({$ref:`#/tanstack-query-create-infinite-params/${Pa}`,case:e.config.case,create:true,namespace:"value"}),n=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:s.typeReferenceNode({typeName:`QueryKey<${D.Options.name}>`})},{name:"page",type:s.typeReferenceNode({typeName:"K"})}],statements:[s.constVariable({expression:s.objectExpression({obj:[{spread:s.propertyAccessExpression({expression:"queryKey",name:0})}]}),name:"params"}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),s.returnVariable({expression:s.asExpression({expression:s.asExpression({expression:s.identifier({text:"params"}),type:s.keywordTypeNode({keyword:"unknown"})}),type:x__default.default.factory.createTypeQueryNode(s.identifier({text:"page"}))})})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:`Pick<QueryKey<${D.Options.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:r.name||""});t.add(n);},ja=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.infiniteQueryOptions||!["get","post"].includes(e.method))return n;let o=Qo({context:t.context,operation:e});if(!o)return n;let i=t.context.file({id:t.name}),a=qt({context:t.context,operation:e});n.hasInfiniteQueries||(n.hasInfiniteQueries=true,n.hasCreateQueryKeyParamsFunction||(Nn({plugin:t}),En({plugin:t}),n.hasCreateQueryKeyParamsFunction=true),n.hasCreateInfiniteParamsFunction||(Gf({plugin:t}),n.hasCreateInfiniteParamsFunction=true),i.import({module:t.name,name:Aa}),n.typeInfiniteData=i.import({asType:true,module:t.name,name:"InfiniteData"})),n.hasUsedQueryFn=true;let p=bt({operation:e,plugin:t}),c=Pn({operation:e,plugin:t}),m=jn({operation:e,plugin:t}),f=`${kn}<${p}>`,l=`Pick<${f}[0], 'body' | 'headers' | 'path' | 'query'>`,u=t.getPlugin("@hey-api/typescript"),d=G({plugin:u,schema:o.schema,state:void 0}),g=d?`${Ae({node:d,unescape:true})} | ${l}`:`${l}`,h=vn({isInfinite:true,operation:e,plugin:t,typeQueryKey:f});i.add(h);let S=i.identifier({$ref:`#/tanstack-query-infinite-query-key/${e.id}`,case:t.config.infiniteQueryKeys.case,nameTransformer:t.config.infiniteQueryKeys.name,namespace:"value"}),b=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),L=i.identifier({$ref:`#/tanstack-query-create-infinite-params/${Pa}`,case:t.config.case,namespace:"value"}),C=[s.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:s.conditionalExpression({condition:s.binaryExpression({left:s.typeOfExpression({text:"pageParam"}),operator:"===",right:s.ots.string("object")}),whenFalse:s.objectExpression({multiLine:true,obj:[{key:o.in,value:s.objectExpression({multiLine:true,obj:[{key:o.name,value:s.identifier({text:"pageParam"})}]})}]}),whenTrue:s.identifier({text:"pageParam"})}),name:"page",typeName:l}),s.constVariable({expression:s.callExpression({functionName:L.name||"",parameters:["queryKey","page"]}),name:"params"})];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?C.push(s.returnVariable({expression:b})):C.push(s.constVariable({destructure:true,expression:b,name:"data"}),s.returnVariable({expression:"data"}));let v=i.identifier({$ref:`#/tanstack-query-infinite-query-options/${e.id}`,case:t.config.infiniteQueryOptions.case,create:true,nameTransformer:t.config.infiniteQueryOptions.name,namespace:"value"}),w=s.constVariable({comment:t.config.comments?tt({operation:e}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:a,name:"options",type:p}],statements:[s.returnFunctionCall({args:[s.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:C})},{key:"queryKey",value:s.callExpression({functionName:S.name||"",parameters:["options"]})}]})],name:Aa,types:[m,c.name,`${typeof n.typeInfiniteData=="string"?n.typeInfiniteData:n.typeInfiniteData.name}<${m}>`,f,g]})]}),name:v.name||""});i.add(w);};var Ca="mutationOptions",ka=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.mutationOptions.enabled||!["delete","patch","post","put"].includes(e.method))return n;let o=t.name==="@tanstack/angular-query-experimental"||t.name==="@tanstack/svelte-query"||t.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",i=t.context.file({id:t.name});n.hasMutations||(n.hasMutations=true,i.import({asType:true,module:t.name,name:o})),n.hasUsedQueryFn=true;let a=bt({operation:e,plugin:t}),p=Pn({operation:e,plugin:t}),c=jn({operation:e,plugin:t}),m=`${o}<${c}, ${p.name}, ${a}>`,f=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),l=[];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?l.push(s.returnVariable({expression:f})):l.push(s.constVariable({destructure:true,expression:f,name:"data"}),s.returnVariable({expression:"data"}));let u=i.identifier({$ref:`#/tanstack-query-mutation-options/${e.id}`,case:t.config.mutationOptions.case,create:true,nameTransformer:t.config.mutationOptions.name,namespace:"value"}),d=s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${a}>`}],returnType:m,statements:[s.constVariable({expression:s.objectExpression({obj:[{key:"mutationFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:l})}]}),name:Ca,typeName:m}),s.returnVariable({expression:Ca})]}),g=s.constVariable({comment:t.config.comments?tt({operation:e}):void 0,exportConst:true,expression:d,name:u.name||""});return i.add(g),n};var Ea="queryOptions",Na=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.queryOptions||!["get","post"].includes(e.method))return n;let o=t.context.file({id:t.name}),i=qt({context:t.context,operation:e});n.hasQueries||(n.hasQueries=true,n.hasCreateQueryKeyParamsFunction||(Nn({plugin:t}),En({plugin:t}),n.hasCreateQueryKeyParamsFunction=true),o.import({module:t.name,name:Ea})),n.hasUsedQueryFn=true;let a=vn({isInfinite:false,operation:e,plugin:t});o.add(a);let p=bt({operation:e,plugin:t}),c=o.identifier({$ref:`#/tanstack-query-query-key/${e.id}`,case:t.config.queryKeys.case,nameTransformer:t.config.queryKeys.name,namespace:"value"}),m=s.awaitExpression({expression:s.callExpression({functionName:r,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),f=[];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?f.push(s.returnVariable({expression:m})):f.push(s.constVariable({destructure:true,expression:m,name:"data"}),s.returnVariable({expression:"data"}));let l=o.identifier({$ref:`#/tanstack-query-query-options/${e.id}`,case:t.config.queryOptions.case,create:true,nameTransformer:t.config.queryOptions.name,namespace:"value"}),u=s.constVariable({comment:t.config.comments?tt({operation:e}):void 0,exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:i,name:"options",type:p}],statements:[s.returnFunctionCall({args:[s.objectExpression({obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:f})},{key:"queryKey",value:s.callExpression({functionName:c.name||"",parameters:["options"]})}]})],name:Ea})]}),name:l.name||""});return o.add(u),n};var _e=({plugin:e})=>{let t=e.createFile({id:e.name,identifierCase:e.config.case,path:e.output}),r={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false,typeInfiniteData:void 0};t.import({...D.Options,module:t.relativePathToFile({context:e.context,id:ee})}),e.forEach("operation",({operation:n})=>{r.hasUsedQueryFn=false;let o=e.getPlugin("@hey-api/sdk"),i=o?.config.asClass?bn({context:e.context,operation:n,plugin:o}):void 0,a=i?i.values().next().value:void 0,p=(a?[a.path[0],...a.path.slice(1).map(c=>A({case:"camelCase",value:c})),a.methodName].filter(Boolean):[ge({config:e.context.config,handleIllegal:true,id:n.id,operation:n})]).join(".");Na({operation:n,plugin:e,queryFn:p,state:r}),ja({operation:n,plugin:e,queryFn:p,state:r}),ka({operation:n,plugin:e,queryFn:p,state:r}),r.hasUsedQueryFn&&t.import({module:t.relativePathToFile({context:e.context,id:ee}),name:p.split(".")[0]});}),(r.hasQueries||r.hasInfiniteQueries)&&t.import({alias:"_heyApiClient",module:t.relativePathToFile({context:e.context,id:Ie}),name:"client"});};var Zf=e=>`${ge({config:T(),id:e.name,operation:e})}InfiniteOptions`,Yf=e=>`${ge({config:T(),id:e.name,operation:e})}Mutation`,el=({config:e,id:t,operation:r})=>`${ge({config:e,id:t,operation:r})}Options`,wn=({config:e,id:t,isInfinite:r,operation:n})=>`${ge({config:e,id:t,operation:n})}${r?"Infinite":""}QueryKey`,tl=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},rl="createInfiniteParams",Va="createQueryKey",va="infiniteQueryOptions",wa="mutationOptions",vs="QueryKey",$a="queryOptions",Er="TOptions",nl=({file:e})=>{let t=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:s.typeNode(`QueryKey<${D.OptionsLegacyParser.name}>`)},{name:"page",type:s.typeNode("K")}],statements:[s.constVariable({expression:s.identifier({text:"queryKey[0]"}),name:"params"}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"page"}),name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),s.returnVariable({expression:x__default.default.factory.createAsExpression(x__default.default.factory.createAsExpression(s.identifier({text:"params"}),x__default.default.factory.createKeywordTypeNode(x__default.default.SyntaxKind.UnknownKeyword)),x__default.default.factory.createTypeQueryNode(s.identifier({text:"page"})))})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:`Pick<QueryKey<${D.OptionsLegacyParser.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:rl});e.add(t);},qa=({file:e})=>{let t=s.indexedAccessTypeNode({indexType:s.typeNode(0),objectType:s.typeNode(vs,[s.typeNode(Er)])}),r=s.identifier({text:"infinite"}),n=s.constVariable({expression:s.arrowFunction({multiLine:true,parameters:[{name:"id",type:s.typeNode("string")},{isRequired:false,name:"options",type:s.typeNode(Er)},{isRequired:false,name:"infinite",type:s.typeNode("boolean")}],returnType:t,statements:[s.constVariable({assertion:t,expression:s.objectExpression({multiLine:false,obj:[{key:"_id",value:s.identifier({text:"id"})},{key:te(T()),value:s.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${te(T())}`})}]}),name:"params",typeName:t}),s.ifStatement({expression:r,thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"body"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"body"}),right:s.propertyAccessExpression({expression:"options",name:"body"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"headers"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"headers"}),right:s.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"path"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"path"}),right:s.propertyAccessExpression({expression:"options",name:"path"})})})]})}),s.ifStatement({expression:s.propertyAccessExpression({expression:s.identifier({text:"options"}),isOptional:true,name:s.identifier({text:"query"})}),thenStatement:s.block({statements:[s.expressionToStatement({expression:s.binaryExpression({left:s.propertyAccessExpression({expression:"params",name:"query"}),right:s.propertyAccessExpression({expression:"options",name:"query"})})})]})}),s.returnVariable({expression:"params"})],types:[{extends:s.typeReferenceNode({typeName:s.identifier({text:D.OptionsLegacyParser.name})}),name:Er}]}),name:Va});e.add(n);},Ma=({file:e})=>{let t=[{name:"_id",type:s.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:s.keywordTypeNode({keyword:"boolean"})}],r=s.typeAliasDeclaration({name:vs,type:s.typeTupleNode({types:[s.typeIntersectionNode({types:[s.typeReferenceNode({typeName:`Pick<${Er}, '${te(T())}' | 'body' | 'headers' | 'path' | 'query'>`}),s.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:s.typeReferenceNode({typeName:s.identifier({text:D.OptionsLegacyParser.name})}),name:Er}]});e.add(r);},Ns=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:o}=Mt({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:Ft,onImport:a=>{t.import({asType:true,module:n,name:a});}});return {typeData:js({importedType:o})}},Fa=({client:e,file:t,operation:r,pluginName:n,typesModulePath:o})=>{let i=T(),{name:a}=Mt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:ir,onImport:m=>{t.import({asType:true,module:o,name:m});}}),p={asType:true,name:a};if(p.name||(p=t.import({asType:true,module:n,name:"DefaultError"})),j(i).name==="@hey-api/client-axios"){let m=t.import({asType:true,module:"axios",name:"AxiosError"});p={...m,name:`${m.name}<${p.name}>`};}return {typeError:p}},La=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:o}=Mt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Ve,onImport:a=>{t.import({asType:true,module:n,name:a});}});return {typeResponse:o||"void"}},Da=({id:e,isInfinite:t})=>s.arrayLiteralExpression({elements:[s.callExpression({functionName:Va,parameters:[s.ots.string(e),"options",t?s.ots.boolean(true):void 0]})],multiLine:false}),Ke=({client:e,files:t,plugin:r})=>{let n=T();if(_(n))throw new Error("TanStack Query plugin does not support legacy clients");let o=t[r.name];o.import({...D.OptionsLegacyParser,module:K({config:n,sourceOutput:r.output})});let i=Bt({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),a=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",p,c=false,m=false,f=false,l=false,u=false,d=new Map;for(let g of e.services)for(let h of g.operations){let S=N(h);if(d.has(S))continue;d.set(S,true);let b=[n.plugins["@hey-api/sdk"]?.config.asClass&&sr({config:n,name:g.name}),ge({config:n,handleIllegal:!n.plugins["@hey-api/sdk"]?.config.asClass,id:h.name,operation:h})].filter(Boolean).join("."),L=false;if(r.config.queryOptions&&["GET","POST"].includes(h.method)){u||(u=true,m||(Ma({file:o}),qa({file:o}),m=true),o.import({module:r.name,name:$a})),L=true;let{typeData:C}=Ns({client:e,file:o,operation:h,typesModulePath:i}),v=Le(h.parameters),w=s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:v,name:"options",type:C}],statements:Da({id:h.name})}),name:wn({config:n,id:h.name,operation:h})});o.add(w);let he=s.constVariable({comment:[],exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:v,name:"options",type:C}],statements:[s.returnFunctionCall({args:[s.objectExpression({obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:b,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})},{key:"queryKey",value:s.callExpression({functionName:wn({config:n,id:h.name,operation:h}),parameters:["options"]})}]})],name:$a})]}),name:el({config:n,id:h.name,operation:h})});o.add(he);}if(r.config.infiniteQueryOptions&&["GET","POST"].includes(h.method)){let C,v=h.parameters.find(w=>{if(se(n.parser.pagination).test(w.name))return C=w,true;if(w.in==="body"){if(w.export==="reference"){let He=w.$refs[0];return e.models.find(nt=>nt.meta?.$ref===He)?.properties.find(nt=>{if(se(n.parser.pagination).test(nt.name))return C=nt,true})}return w.properties.find(He=>{if(se(n.parser.pagination).test(He.name))return C=He,true})}});if(v&&C){f||(f=true,m||(Ma({file:o}),qa({file:o}),m=true),c||(nl({file:o}),c=true),o.import({module:r.name,name:va}),p=o.import({asType:true,module:r.name,name:"InfiniteData"})),L=true;let{typeData:w}=Ns({client:e,file:o,operation:h,typesModulePath:i}),{typeError:he}=Fa({client:e,file:o,operation:h,pluginName:r.name,typesModulePath:i}),{typeResponse:He}=La({client:e,file:o,operation:h,typesModulePath:i}),$r=Le(h.parameters),nt=`${vs}<${w}>`,Un=`Pick<${nt}[0], 'body' | 'headers' | 'path' | 'query'>`,ap=`${C.base} | ${Un}`,pp=s.constVariable({exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:$r,name:"options",type:w}],returnType:nt,statements:Da({id:h.name,isInfinite:true})}),name:wn({config:n,id:h.name,isInfinite:true,operation:h})});o.add(pp);let cp=s.constVariable({comment:[],exportConst:true,expression:s.arrowFunction({parameters:[{isRequired:$r,name:"options",type:w}],statements:[s.returnFunctionCall({args:[s.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[s.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:s.conditionalExpression({condition:s.binaryExpression({left:s.typeOfExpression({text:"pageParam"}),operator:"===",right:s.ots.string("object")}),whenFalse:s.objectExpression({multiLine:true,obj:[{key:tl(v),value:s.objectExpression({multiLine:true,obj:[{key:C.name,value:s.identifier({text:"pageParam"})}]})}]}),whenTrue:s.identifier({text:"pageParam"})}),name:"page",typeName:Un}),s.constVariable({expression:s.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:b,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:s.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})},{key:"queryKey",value:s.callExpression({functionName:wn({config:n,id:h.name,isInfinite:true,operation:h}),parameters:["options"]})}]})],name:va,types:[He,he.name,`${typeof p=="string"?p:p.name}<${He}>`,nt,ap]})]}),name:Zf(h)});o.add(cp);}}if(r.config.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(h.method)){l||(l=true,o.import({asType:true,module:r.name,name:a})),L=true;let{typeData:C}=Ns({client:e,file:o,operation:h,typesModulePath:i}),{typeError:v}=Fa({client:e,file:o,operation:h,pluginName:r.name,typesModulePath:i}),{typeResponse:w}=La({client:e,file:o,operation:h,typesModulePath:i}),he=s.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${C}>`}],statements:[s.constVariable({expression:s.objectExpression({obj:[{key:"mutationFn",value:s.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[s.constVariable({destructure:true,expression:s.awaitExpression({expression:s.callExpression({functionName:b,parameters:[s.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),s.returnVariable({expression:"data"})]})}]}),name:wa,typeName:`${a}<${w}, ${v.name}, ${C}>`}),s.returnVariable({expression:wa})]}),He=s.constVariable({comment:[],exportConst:true,expression:he,name:Yf(h)});o.add(He);}(u||f)&&o.import({alias:"_heyApiClient",module:Bt({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),L&&o.import({module:Bt({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:b.split(".")[0]});}};var $n={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:_e,handlerLegacy:Ke,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var qn={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:_e,handlerLegacy:Ke,name:"@tanstack/react-query",output:"@tanstack/react-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var Mn={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:_e,handlerLegacy:Ke,name:"@tanstack/solid-query",output:"@tanstack/solid-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var Fn={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:_e,handlerLegacy:Ke,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var Ln={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:_e,handlerLegacy:Ke,name:"@tanstack/vue-query",output:"@tanstack/vue-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var _a="fastify",cl=({context:e,operation:t})=>{let r=e.file({id:_a}),n=e.file({id:P}),o=[],i=n.identifier({$ref:Y({config:e.config,id:t.id,type:"data"}),namespace:"type"});i.name&&(t.body&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:P}),name:i.name}),o.push({isRequired:t.body.required,name:"Body",type:`${i.name}['body']`})),t.parameters&&(t.parameters.header&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:P}),name:i.name}),o.push({isRequired:ct(t.parameters.header),name:"Headers",type:`${i.name}['headers']`})),t.parameters.path&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:P}),name:i.name}),o.push({isRequired:ct(t.parameters.path),name:"Params",type:`${i.name}['path']`})),t.parameters.query&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:P}),name:i.name}),o.push({isRequired:ct(t.parameters.query),name:"Querystring",type:`${i.name}['query']`}))));let{errors:a,responses:p}=Ne(t),c,m=n.identifier({$ref:Y({config:e.config,id:t.id,type:"errors"}),namespace:"type"});if(m.name&&a&&a.properties){let g=Object.keys(a.properties);if(g.length){if(!g.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:P}),name:m.name}),c=s.typeReferenceNode({typeName:m.name});else if(g.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:P}),name:m.name});let S=s.typeReferenceNode({typeName:m.name}),b=s.literalTypeNode({literal:s.stringLiteral({text:"default"})});c=s.typeReferenceNode({typeArguments:[S,b],typeName:"Omit"});}}}let f,l=n.identifier({$ref:Y({config:e.config,id:t.id,type:"responses"}),namespace:"type"});if(l.name&&p&&p.properties){let g=Object.keys(p.properties);if(g.length){if(!g.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:P}),name:l.name}),f=s.typeReferenceNode({typeName:l.name});else if(g.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:P}),name:l.name});let S=s.typeReferenceNode({typeName:l.name}),b=s.literalTypeNode({literal:s.stringLiteral({text:"default"})});f=s.typeReferenceNode({typeArguments:[S,b],typeName:"Omit"});}}}let u=[c,f].filter(Boolean);return u.length&&o.push({name:"Reply",type:s.typeIntersectionNode({types:u})}),o.length?{name:t.id,type:s.typeNode("RouteHandler",[s.typeInterfaceNode({properties:o,useLegacyResolution:false})])}:void 0},Ka=({plugin:e})=>{let t=e.createFile({id:_a,path:e.output}),r=[];e.forEach("operation",({operation:o})=>{let i=cl({context:e.context,operation:o});i&&r.push(i);});let n=t.identifier({$ref:"RouteHandlers",create:true,namespace:"type"});n.name&&(r.length&&t.import({asType:true,module:"fastify",name:"RouteHandler"}),t.add(s.typeAliasDeclaration({exportType:true,name:n.name,type:s.typeInterfaceNode({properties:r,useLegacyResolution:false})})));};var Dn={config:{exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:Ka,name:"fastify",output:"fastify"};var y={actions:{args:s.identifier({text:"args"}),base64:s.identifier({text:"base64"}),bic:s.identifier({text:"bic"}),brand:s.identifier({text:"brand"}),bytes:s.identifier({text:"bytes"}),check:s.identifier({text:"check"}),checkItems:s.identifier({text:"checkItems"}),creditCard:s.identifier({text:"creditCard"}),cuid2:s.identifier({text:"cuid2"}),decimal:s.identifier({text:"decimal"}),description:s.identifier({text:"description"}),digits:s.identifier({text:"digits"}),email:s.identifier({text:"email"}),emoji:s.identifier({text:"emoji"}),empty:s.identifier({text:"empty"}),endsWith:s.identifier({text:"endsWith"}),entries:s.identifier({text:"entries"}),everyItem:s.identifier({text:"everyItem"}),excludes:s.identifier({text:"excludes"}),filterItems:s.identifier({text:"filterItems"}),findItem:s.identifier({text:"findItem"}),finite:s.identifier({text:"finite"}),flavor:s.identifier({text:"flavor"}),graphemes:s.identifier({text:"graphemes"}),gtValue:s.identifier({text:"gtValue"}),hash:s.identifier({text:"hash"}),hexColor:s.identifier({text:"hexColor"}),hexadecimal:s.identifier({text:"hexadecimal"}),imei:s.identifier({text:"imei"}),includes:s.identifier({text:"includes"}),integer:s.identifier({text:"integer"}),ip:s.identifier({text:"ip"}),ipv4:s.identifier({text:"ipv4"}),ipv6:s.identifier({text:"ipv6"}),isoDate:s.identifier({text:"isoDate"}),isoDateTime:s.identifier({text:"isoDateTime"}),isoTime:s.identifier({text:"isoTime"}),isoTimeSecond:s.identifier({text:"isoTimeSecond"}),isoTimestamp:s.identifier({text:"isoTimestamp"}),isoWeek:s.identifier({text:"isoWeek"}),length:s.identifier({text:"length"}),ltValue:s.identifier({text:"ltValue"}),mac:s.identifier({text:"mac"}),mac48:s.identifier({text:"mac48"}),mac64:s.identifier({text:"mac64"}),mapItems:s.identifier({text:"mapItems"}),maxBytes:s.identifier({text:"maxBytes"}),maxEntries:s.identifier({text:"maxEntries"}),maxGraphemes:s.identifier({text:"maxGraphemes"}),maxLength:s.identifier({text:"maxLength"}),maxSize:s.identifier({text:"maxSize"}),maxValue:s.identifier({text:"maxValue"}),maxWords:s.identifier({text:"maxWords"}),metadata:s.identifier({text:"metadata"}),mimeType:s.identifier({text:"mimeType"}),minBytes:s.identifier({text:"minBytes"}),minEntries:s.identifier({text:"minEntries"}),minGraphemes:s.identifier({text:"minGraphemes"}),minLength:s.identifier({text:"minLength"}),minSize:s.identifier({text:"minSize"}),minValue:s.identifier({text:"minValue"}),minWords:s.identifier({text:"minWords"}),multipleOf:s.identifier({text:"multipleOf"}),nanoid:s.identifier({text:"nanoid"}),nonEmpty:s.identifier({text:"nonEmpty"}),normalize:s.identifier({text:"normalize"}),notBytes:s.identifier({text:"notBytes"}),notEntries:s.identifier({text:"notEntries"}),notGraphemes:s.identifier({text:"notGraphemes"}),notLength:s.identifier({text:"notLength"}),notSize:s.identifier({text:"notSize"}),notValue:s.identifier({text:"notValue"}),notValues:s.identifier({text:"notValues"}),notWords:s.identifier({text:"notWords"}),octal:s.identifier({text:"octal"}),parseJson:s.identifier({text:"parseJson"}),partialCheck:s.identifier({text:"partialCheck"}),rawCheck:s.identifier({text:"rawCheck"}),rawTransform:s.identifier({text:"rawTransform"}),readonly:s.identifier({text:"readonly"}),reduceItems:s.identifier({text:"reduceItems"}),regex:s.identifier({text:"regex"}),returns:s.identifier({text:"returns"}),rfcEmail:s.identifier({text:"rfcEmail"}),safeInteger:s.identifier({text:"safeInteger"}),size:s.identifier({text:"size"}),slug:s.identifier({text:"slug"}),someItem:s.identifier({text:"someItem"}),sortItems:s.identifier({text:"sortItems"}),startsWith:s.identifier({text:"startsWith"}),stringifyJson:s.identifier({text:"stringifyJson"}),title:s.identifier({text:"title"}),toLowerCase:s.identifier({text:"toLowerCase"}),toMaxValue:s.identifier({text:"toMaxValue"}),toMinValue:s.identifier({text:"toMinValue"}),toUpperCase:s.identifier({text:"toUpperCase"}),transform:s.identifier({text:"transform"}),trim:s.identifier({text:"trim"}),trimEnd:s.identifier({text:"trimEnd"}),trimStart:s.identifier({text:"trimStart"}),ulid:s.identifier({text:"ulid"}),url:s.identifier({text:"url"}),uuid:s.identifier({text:"uuid"}),value:s.identifier({text:"value"}),values:s.identifier({text:"values"}),words:s.identifier({text:"words"})},async:{argsAsync:s.identifier({text:"argsAsync"}),arrayAsync:s.identifier({text:"arrayAsync"}),awaitAsync:s.identifier({text:"awaitAsync"}),checkAsync:s.identifier({text:"checkAsync"}),checkItemsAsync:s.identifier({text:"checkItemsAsync"}),customAsync:s.identifier({text:"customAsync"}),exactOptionalAsync:s.identifier({text:"exactOptionalAsync"}),fallbackAsync:s.identifier({text:"fallbackAsync"}),forwardAsync:s.identifier({text:"forwardAsync"}),getDefaultsAsync:s.identifier({text:"getDefaultsAsync"}),getFallbacksAsync:s.identifier({text:"getFallbacksAsync"}),intersectAsync:s.identifier({text:"intersectAsync"}),lazyAsync:s.identifier({text:"lazyAsync"}),looseObjectAsync:s.identifier({text:"looseObjectAsync"}),looseTupleAsync:s.identifier({text:"looseTupleAsync"}),mapAsync:s.identifier({text:"mapAsync"}),nonNullableAsync:s.identifier({text:"nonNullableAsync"}),nonNullishAsync:s.identifier({text:"nonNullishAsync"}),nonOptionalAsync:s.identifier({text:"nonOptionalAsync"}),nullableAsync:s.identifier({text:"nullableAsync"}),nullishAsync:s.identifier({text:"nullishAsync"}),objectAsync:s.identifier({text:"objectAsync"}),objectWithRestAsync:s.identifier({text:"objectWithRestAsync"}),optionalAsync:s.identifier({text:"optionalAsync"}),parseAsync:s.identifier({text:"parseAsync"}),parserAsync:s.identifier({text:"parserAsync"}),partialAsync:s.identifier({text:"partialAsync"}),partialCheckAsync:s.identifier({text:"partialCheckAsync"}),pipeAsync:s.identifier({text:"pipeAsync"}),rawCheckAsync:s.identifier({text:"rawCheckAsync"}),rawTransformAsync:s.identifier({text:"rawTransformAsync"}),recordAsync:s.identifier({text:"recordAsync"}),requiredAsync:s.identifier({text:"requiredAsync"}),returnsAsync:s.identifier({text:"returnsAsync"}),safeParseAsync:s.identifier({text:"safeParseAsync"}),safeParserAsync:s.identifier({text:"safeParserAsync"}),setAsync:s.identifier({text:"setAsync"}),strictObjectAsync:s.identifier({text:"strictObjectAsync"}),strictTupleAsync:s.identifier({text:"strictTupleAsync"}),transformAsync:s.identifier({text:"transformAsync"}),tupleAsync:s.identifier({text:"tupleAsync"}),tupleWithRestAsync:s.identifier({text:"tupleWithRestAsync"}),undefinedableAsync:s.identifier({text:"undefinedableAsync"}),unionAsync:s.identifier({text:"unionAsync"}),variantAsync:s.identifier({text:"variantAsync"})},methods:{assert:s.identifier({text:"assert"}),config:s.identifier({text:"config"}),fallback:s.identifier({text:"fallback"}),flatten:s.identifier({text:"flatten"}),forward:s.identifier({text:"forward"}),getDefault:s.identifier({text:"getDefault"}),getDefaults:s.identifier({text:"getDefaults"}),getDescription:s.identifier({text:"getDescription"}),getFallback:s.identifier({text:"getFallback"}),getFallbacks:s.identifier({text:"getFallbacks"}),getMetadata:s.identifier({text:"getMetadata"}),getTitle:s.identifier({text:"getTitle"}),is:s.identifier({text:"is"}),keyof:s.identifier({text:"keyof"}),message:s.identifier({text:"message"}),omit:s.identifier({text:"omit"}),parse:s.identifier({text:"parse"}),parser:s.identifier({text:"parser"}),partial:s.identifier({text:"partial"}),pick:s.identifier({text:"pick"}),pipe:s.identifier({text:"pipe"}),required:s.identifier({text:"required"}),safeParse:s.identifier({text:"safeParse"}),safeParser:s.identifier({text:"safeParser"}),summarize:s.identifier({text:"summarize"}),unwrap:s.identifier({text:"unwrap"})},schemas:{any:s.identifier({text:"any"}),array:s.identifier({text:"array"}),bigInt:s.identifier({text:"bigint"}),blob:s.identifier({text:"blob"}),boolean:s.identifier({text:"boolean"}),custom:s.identifier({text:"custom"}),date:s.identifier({text:"date"}),enum:s.identifier({text:"enum"}),exactOptional:s.identifier({text:"exactOptional"}),file:s.identifier({text:"file"}),function:s.identifier({text:"function"}),instance:s.identifier({text:"instance"}),intersect:s.identifier({text:"intersect"}),lazy:s.identifier({text:"lazy"}),literal:s.identifier({text:"literal"}),looseObject:s.identifier({text:"looseObject"}),looseTuple:s.identifier({text:"looseTuple"}),map:s.identifier({text:"map"}),nan:s.identifier({text:"nan"}),never:s.identifier({text:"never"}),nonNullable:s.identifier({text:"nonNullable"}),nonNullish:s.identifier({text:"nonNullish"}),nonOptional:s.identifier({text:"nonOptional"}),null:s.identifier({text:"null"}),nullable:s.identifier({text:"nullable"}),nullish:s.identifier({text:"nullish"}),number:s.identifier({text:"number"}),object:s.identifier({text:"object"}),objectWithRest:s.identifier({text:"objectWithRest"}),optional:s.identifier({text:"optional"}),picklist:s.identifier({text:"picklist"}),promise:s.identifier({text:"promise"}),record:s.identifier({text:"record"}),set:s.identifier({text:"set"}),strictObject:s.identifier({text:"strictObject"}),strictTuple:s.identifier({text:"strictTuple"}),string:s.identifier({text:"string"}),symbol:s.identifier({text:"symbol"}),tuple:s.identifier({text:"tuple"}),tupleWithRest:s.identifier({text:"tupleWithRest"}),undefined:s.identifier({text:"undefined"}),undefinedable:s.identifier({text:"undefinedable"}),union:s.identifier({text:"union"}),unknown:s.identifier({text:"unknown"}),variant:s.identifier({text:"variant"}),void:s.identifier({text:"void"})},types:{GenericSchema:s.identifier({text:"GenericSchema"})},v:s.identifier({text:"v"})},Be="valibot";var fl=({file:e,operation:t,plugin:r})=>{let{requests:n}=r.config,o=r.context.file({id:Be}).identifier({$ref:`#/valibot-response/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!o.name)return;e.import({module:e.relativePathToFile({context:r.context,id:Be}),name:o.name}),e.import({alias:y.v.text,module:"valibot",name:"*"});let i="data";return s.arrowFunction({async:true,parameters:[{name:i}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.async.parseAsync}),parameters:[s.identifier({text:o.name}),s.identifier({text:i})]})})})]})},ll=({file:e,operation:t,plugin:r})=>{let{responses:n}=r.config,o=r.context.file({id:Be}).identifier({$ref:`#/valibot-response/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!o.name)return;e.import({module:e.relativePathToFile({context:r.context,id:Be}),name:o.name}),e.import({alias:y.v.text,module:"valibot",name:"*"});let i="data";return s.arrowFunction({async:true,parameters:[{name:i}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.async.parseAsync}),parameters:[s.identifier({text:o.name}),s.identifier({text:i})]})})})]})},Ba={createRequestValidator:fl,createResponseValidator:ll};var Wa=({operation:e,plugin:t,state:r})=>{let n=t.context.file({id:Be});if(t.config.requests.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let p={},c=[];for(let m in e.parameters.header){let f=e.parameters.header[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("headers"));}Object.keys(p).length&&(i.properties.headers={properties:p,required:c,type:"object"});}if(e.parameters.path){let p={},c=[];for(let m in e.parameters.path){let f=e.parameters.path[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("path"));}Object.keys(p).length&&(i.properties.path={properties:p,required:c,type:"object"});}if(e.parameters.query){let p={},c=[];for(let m in e.parameters.query){let f=e.parameters.query[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("query"));}Object.keys(p).length&&(i.properties.query={properties:p,required:c,type:"object"});}}e.body&&(i.properties.body=e.body.schema,e.body.required&&o.add("body")),i.required=[...o];let a=n.identifier({$ref:`#/valibot-data/${e.id}`,case:t.config.requests.case,create:true,nameTransformer:t.config.requests.name,namespace:"value"});oe({$ref:`#/valibot-data/${e.id}`,identifier:a,plugin:t,schema:i,state:r});}if(t.config.responses.enabled&&e.responses){let{response:o}=Ne(e);if(o){let i=n.identifier({$ref:`#/valibot-response/${e.id}`,case:t.config.responses.case,create:true,nameTransformer:t.config.responses.name,namespace:"value"});oe({$ref:`#/valibot-response/${e.id}`,identifier:i,plugin:t,schema:o,state:r});}}};var Te=e=>e.length===1?e[0]:s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.methods.pipe}),parameters:e}),ul=({plugin:e,schema:t,state:r})=>{let n=s.propertyAccessExpression({expression:y.v,name:y.schemas.array}),o=[];if(t.items){t=ne({schema:t});let i=t.items.map(a=>{let p=oe({plugin:e,schema:a,state:r});return Te(p)});if(i.length===1){let a=s.callExpression({functionName:n,parameters:i});o.push(a);}else {t.logicalOperator;let a=s.callExpression({functionName:n,parameters:[vr()]});o.push(a);}}else {let i=s.callExpression({functionName:n,parameters:[vr()]});o.push(i);}if(t.minItems===t.maxItems&&t.minItems!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.length}),parameters:[s.valueToExpression({value:t.minItems})]});o.push(i);}else {if(t.minItems!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.minLength}),parameters:[s.valueToExpression({value:t.minItems})]});o.push(i);}if(t.maxItems!==void 0){let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.maxLength}),parameters:[s.valueToExpression({value:t.maxItems})]});o.push(i);}}return Te(o)},dl=({schema:e})=>typeof e.const=="boolean"?s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.literal}),parameters:[s.ots.boolean(e.const)]}):s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.boolean})}),yl=({schema:e})=>{let t=[],r=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?t.push(s.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(r=true);if(!t.length)return vr();let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.picklist}),parameters:[s.arrayLiteralExpression({elements:t,multiLine:false})]});return r&&(n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.nullable}),parameters:[n]})),n},gl=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.never})}),hl=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.null})}),Nr=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},xl=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.literal}),parameters:[s.ots.number(e.const)]});let r=[],n=s.callExpression({functionName:t?s.propertyAccessExpression({expression:y.v,name:y.schemas.bigInt}):s.propertyAccessExpression({expression:y.v,name:y.schemas.number})});if(r.push(n),!t&&e.type==="integer"){let o=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.integer})});r.push(o);}if(e.exclusiveMinimum!==void 0){let o=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.gtValue}),parameters:[Nr({isBigInt:t,value:e.exclusiveMinimum})]});r.push(o);}else if(e.minimum!==void 0){let o=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.minValue}),parameters:[Nr({isBigInt:t,value:e.minimum})]});r.push(o);}if(e.exclusiveMaximum!==void 0){let o=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.ltValue}),parameters:[Nr({isBigInt:t,value:e.exclusiveMaximum})]});r.push(o);}else if(e.maximum!==void 0){let o=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.maxValue}),parameters:[Nr({isBigInt:t,value:e.maximum})]});r.push(o);}return Te(r)},bl=({plugin:e,schema:t,state:r})=>{let n=[],o=t.required??[];for(let a in t.properties){let p=t.properties[a],c=o.includes(a),m=oe({optional:!c,plugin:e,schema:p,state:r});ae.lastIndex=0;let f;ae.test(a)?f=a.startsWith("-")?x__default.default.factory.createStringLiteral(a):x__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),n.push(s.propertyAssignment({initializer:Te(m),name:f}));}if(t.additionalProperties&&t.additionalProperties.type==="object"&&!Object.keys(n).length){let a=oe({plugin:e,schema:t.additionalProperties,state:r});return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.record}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.string}),parameters:[]}),Te(a)]})}}let i=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.object}),parameters:[x__default.default.factory.createObjectLiteralExpression(n,true)]});return {anyType:y.types.GenericSchema.text,expression:i}},Ol=({schema:e})=>{if(typeof e.const=="string")return s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.literal}),parameters:[s.ots.string(e.const)]});let t=[],r=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.string})});if(t.push(r),e.format)switch(e.format){case "date":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.isoDate})}));break;case "date-time":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.isoTimestamp})}));break;case "ipv4":case "ipv6":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.ip})}));break;case "uri":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.url})}));break;case "email":case "time":case "uuid":t.push(s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:s.identifier({text:e.format})})}));break}if(e.minLength===e.maxLength&&e.minLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.length}),parameters:[s.valueToExpression({value:e.minLength})]});t.push(n);}else {if(e.minLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.minLength}),parameters:[s.valueToExpression({value:e.minLength})]});t.push(n);}if(e.maxLength!==void 0){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.maxLength}),parameters:[s.valueToExpression({value:e.maxLength})]});t.push(n);}}if(e.pattern){let n=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.regex}),parameters:[s.regularExpressionLiteral({text:e.pattern})]});t.push(n);}return Te(t)},Sl=({plugin:e,schema:t,state:r})=>{if(t.const&&Array.isArray(t.const)){let n=t.const.map(i=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.literal}),parameters:[s.valueToExpression({value:i})]}));return s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.tuple}),parameters:[s.arrayLiteralExpression({elements:n})]})}if(t.items){let n=t.items.map(i=>{let a=oe({plugin:e,schema:i,state:r});return Te(a)});return s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.tuple}),parameters:[s.arrayLiteralExpression({elements:n})]})}return vr()},Rl=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.undefined})}),vr=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.unknown})}),Tl=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.void})}),Ha=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:ul({plugin:e,schema:t,state:r})};case "boolean":return {expression:dl({schema:t})};case "enum":return {expression:yl({schema:t})};case "integer":case "number":return {expression:xl({schema:t})};case "never":return {expression:gl()};case "null":return {expression:hl()};case "object":return bl({plugin:e,schema:t,state:r});case "string":return {expression:Ol({schema:t})};case "tuple":return {expression:Sl({plugin:e,schema:t,state:r})};case "undefined":return {expression:Rl()};case "unknown":return {expression:vr()};case "void":return {expression:Tl()}}},oe=({$ref:e,identifier:t,optional:r,plugin:n,schema:o,state:i})=>{let a=n.context.file({id:Be}),p,c=t,m=[];if(e&&(i.circularReferenceTracker.add(e),c||(c=a.identifier({$ref:e,case:i.nameCase,create:true,nameTransformer:i.nameTransformer,namespace:"value"}))),o.$ref){let f=i.circularReferenceTracker.has(o.$ref),l=a.identifier({$ref:o.$ref,case:i.nameCase,nameTransformer:i.nameTransformer,namespace:"value"});if(!l.name){let u=n.context.resolveIrRef(o.$ref),d=oe({$ref:o.$ref,plugin:n,schema:u,state:i});m.push(...d),l=a.identifier({$ref:o.$ref,case:i.nameCase,nameTransformer:i.nameTransformer,namespace:"value"});}if(l.name){let u=s.identifier({text:l.name});if(f){let d=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.lazy}),parameters:[s.arrowFunction({statements:[s.returnStatement({expression:u})]})]});m.push(d),i.hasCircularReference=true;}else m.push(u);}}else if(o.type){let f=Ha({plugin:n,schema:o,state:i});if(p=f.anyType,m.push(f.expression),n.config.metadata&&o.description){let l=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.metadata}),parameters:[s.objectExpression({obj:[{key:"description",value:s.stringLiteral({text:o.description})}]})]});m.push(l);}}else if(o.items)if(o=ne({schema:o}),o.items){let f=o.items.map(l=>{let u=oe({plugin:n,schema:l,state:i});return Te(u)});if(o.logicalOperator==="and"){let l=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.intersect}),parameters:[s.arrayLiteralExpression({elements:f})]});m.push(l);}else {let l=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.union}),parameters:[s.arrayLiteralExpression({elements:f})]});m.push(l);}}else {let f=oe({plugin:n,schema:o,state:i});m.push(...f);}else {let f=Ha({plugin:n,schema:{type:"unknown"},state:i});p=f.anyType,m.push(f.expression);}if(e&&i.circularReferenceTracker.delete(e),m.length&&o.accessScope==="read"){let f=s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.actions.readonly})});m.push(f);}if(m.length){let f;if(o.default!==void 0){let l=o.type==="integer"&&o.format==="int64";f=Nr({isBigInt:l,value:o.default}),f&&(m=[s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.optional}),parameters:[Te(m),f]})]);}r&&!f&&(m=[s.callExpression({functionName:s.propertyAccessExpression({expression:y.v,name:y.schemas.optional}),parameters:[Te(m)]})]);}if(c&&c.name&&c.created){let f=s.constVariable({comment:n.config.comments?Re({schema:o}):void 0,exportConst:true,expression:Te(m),name:c.name,typeName:i.hasCircularReference?s.propertyAccessExpression({expression:y.v,name:p||y.types.GenericSchema.text}):void 0});return a.add(f),[]}return m},Ua=({plugin:e})=>{e.createFile({id:Be,identifierCase:e.config.case,path:e.output}).import({alias:y.v.text,module:"valibot",name:"*"}),e.forEach("operation","parameter","requestBody","schema",r=>{let n={circularReferenceTracker:new Set,hasCircularReference:false,nameCase:e.config.definitions.case,nameTransformer:e.config.definitions.name};r.type==="operation"?Wa({operation:r.operation,plugin:e,state:n}):r.type==="parameter"?oe({$ref:r.$ref,plugin:e,schema:r.parameter.schema,state:n}):r.type==="requestBody"?oe({$ref:r.$ref,plugin:e,schema:r.requestBody.schema,state:n}):r.type==="schema"&&oe({$ref:r.$ref,plugin:e,schema:r.schema,state:n});});};var Vn={api:Ba,config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:Ua,name:"valibot",output:"valibot",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Data"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Response"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.responses});},tags:["validator"]};var $s={parseAsync:s.identifier({text:"parseAsync"})},We="zod";var Al=({file:e,operation:t,plugin:r})=>{let{requests:n}=r.config,o=r.context.file({id:We}).identifier({$ref:`#/zod-data/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!o.name)return;e.import({module:e.relativePathToFile({context:r.context,id:We}),name:o.name});let i="data";return s.arrowFunction({async:true,parameters:[{name:i}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:s.identifier({text:o.name}),name:$s.parseAsync}),parameters:[s.identifier({text:i})]})})})]})},Pl=({file:e,operation:t,plugin:r})=>{let{responses:n}=r.config,o=r.context.file({id:We}).identifier({$ref:`#/zod-response/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!o.name)return;e.import({module:e.relativePathToFile({context:r.context,id:We}),name:o.name});let i="data";return s.arrowFunction({async:true,parameters:[{name:i}],statements:[s.returnStatement({expression:s.awaitExpression({expression:s.callExpression({functionName:s.propertyAccessExpression({expression:s.identifier({text:o.name}),name:$s.parseAsync}),parameters:[s.identifier({text:i})]})})})]})},za={createRequestValidator:Al,createResponseValidator:Pl};var Qa=({operation:e,plugin:t,state:r})=>{let n=t.context.file({id:We});if(t.config.requests.enabled){let o=new Set,i={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let p={},c=[];for(let m in e.parameters.header){let f=e.parameters.header[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("headers"));}Object.keys(p).length&&(i.properties.headers={properties:p,required:c,type:"object"});}if(e.parameters.path){let p={},c=[];for(let m in e.parameters.path){let f=e.parameters.path[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("path"));}Object.keys(p).length&&(i.properties.path={properties:p,required:c,type:"object"});}if(e.parameters.query){let p={},c=[];for(let m in e.parameters.query){let f=e.parameters.query[m];p[f.name]=f.schema,f.required&&(c.push(f.name),o.add("query"));}Object.keys(p).length&&(i.properties.query={properties:p,required:c,type:"object"});}}e.body&&(i.properties.body=e.body.schema,e.body.required&&o.add("body")),i.required=[...o];let a=n.identifier({$ref:`#/zod-data/${e.id}`,case:t.config.requests.case,create:true,nameTransformer:t.config.requests.name,namespace:"value"});ie({$ref:`#/zod-data/${e.id}`,identifier:a,plugin:t,schema:i,state:r});}if(t.config.responses.enabled&&e.responses){let{response:o}=Ne(e);if(o){let i=n.identifier({$ref:`#/zod-response/${e.id}`,case:t.config.responses.case,create:true,nameTransformer:t.config.responses.name,namespace:"value"});ie({$ref:`#/zod-response/${e.id}`,identifier:i,plugin:t,schema:o,state:r});}}};var jl=s.identifier({text:"and"}),Xa=s.identifier({text:"array"}),Cl=s.identifier({text:"coerce"}),kl=s.identifier({text:"default"}),El=s.identifier({text:"describe"}),Nl=s.identifier({text:"intersection"}),vl=s.identifier({text:"lazy"}),Ga=s.identifier({text:"length"}),_n=s.identifier({text:"literal"}),Za=s.identifier({text:"max"}),Ya=s.identifier({text:"min"}),wl=s.identifier({text:"object"}),$l=s.identifier({text:"optional"}),ql=s.identifier({text:"readonly"}),Ml=s.identifier({text:"record"}),Fl=s.identifier({text:"regex"}),ep=s.identifier({text:"union"}),q=s.identifier({text:"z"}),Ll=({plugin:e,schema:t,state:r})=>{let n=s.propertyAccessExpression({expression:q,name:Xa}),o;if(!t.items)o=s.callExpression({functionName:n,parameters:[Ms()]});else {t=ne({schema:t});let i=t.items.map(a=>ie({plugin:e,schema:a,state:r}));i.length===1?o=s.callExpression({functionName:n,parameters:i}):(t.logicalOperator,o=s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:Xa}),parameters:[s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:ep}),parameters:[s.arrayLiteralExpression({elements:i})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:Ga}),parameters:[s.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:Ya}),parameters:[s.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(o=s.callExpression({functionName:s.propertyAccessExpression({expression:o,name:Za}),parameters:[s.valueToExpression({value:t.maxItems})]}))),o},Dl=({schema:e})=>typeof e.const=="boolean"?s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:_n}),parameters:[s.ots.boolean(e.const)]}):s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"boolean"})})}),Vl=({schema:e})=>{let t=[],r=false;for(let o of e.items??[])o.type==="string"&&typeof o.const=="string"?t.push(s.stringLiteral({text:o.const})):(o.type==="null"||o.const===null)&&(r=true);if(!t.length)return Ms();let n=s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"enum"})}),parameters:[s.arrayLiteralExpression({elements:t,multiLine:false})]});return r&&(n=s.callExpression({functionName:s.propertyAccessExpression({expression:n,name:s.identifier({text:"nullable"})})})),n},_l=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"never"})})}),Kl=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"null"})})}),wr=({isBigInt:e,value:t})=>{let r=s.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?s.callExpression({functionName:"BigInt",parameters:[r]}):r},Bl=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:_n}),parameters:[s.ots.number(e.const)]});let r=s.callExpression({functionName:t?s.propertyAccessExpression({expression:s.propertyAccessExpression({expression:q,name:Cl}),name:s.identifier({text:"bigint"})}):s.propertyAccessExpression({expression:q,name:s.identifier({text:"number"})})});return !t&&e.type==="integer"&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"int"})})})),e.exclusiveMinimum!==void 0?r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"gt"})}),parameters:[wr({isBigInt:t,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"gte"})}),parameters:[wr({isBigInt:t,value:e.minimum})]})),e.exclusiveMaximum!==void 0?r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"lt"})}),parameters:[wr({isBigInt:t,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"lte"})}),parameters:[wr({isBigInt:t,value:e.maximum})]})),r},Wl=({plugin:e,schema:t,state:r})=>{let n=[],o=t.required??[];for(let a in t.properties){let p=t.properties[a],c=o.includes(a),m=ie({optional:!c,plugin:e,schema:p,state:r});ae.lastIndex=0;let f;ae.test(a)?f=a.startsWith("-")?x__default.default.factory.createStringLiteral(a):x__default.default.factory.createNumericLiteral(a):f=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(f=`'${a}'`),n.push(s.propertyAssignment({initializer:m,name:f}));}if(t.additionalProperties&&t.additionalProperties.type==="object"&&!Object.keys(n).length){let a=ie({plugin:e,schema:t.additionalProperties,state:r});return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:Ml}),parameters:[a]})}}return {anyType:"AnyZodObject",expression:s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:wl}),parameters:[x__default.default.factory.createObjectLiteralExpression(n,true)]})}},Hl=({plugin:e,schema:t})=>{if(typeof t.const=="string")return s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:_n}),parameters:[s.ots.string(t.const)]});let r=s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"string"})})});if(t.format)switch(t.format){case "date-time":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"datetime"})}),parameters:e.config.dates.offset?[s.objectExpression({obj:[{key:"offset",value:true}]})]:[]});break;case "ipv4":case "ipv6":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"ip"})})});break;case "uri":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:"url"})})});break;case "date":case "email":case "time":case "uuid":r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:s.identifier({text:t.format})})});break}return t.minLength===t.maxLength&&t.minLength!==void 0?r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:Ga}),parameters:[s.valueToExpression({value:t.minLength})]}):(t.minLength!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:Ya}),parameters:[s.valueToExpression({value:t.minLength})]})),t.maxLength!==void 0&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:Za}),parameters:[s.valueToExpression({value:t.maxLength})]}))),t.pattern&&(r=s.callExpression({functionName:s.propertyAccessExpression({expression:r,name:Fl}),parameters:[s.regularExpressionLiteral({text:t.pattern})]})),r},Ul=({plugin:e,schema:t,state:r})=>{if(t.const&&Array.isArray(t.const)){let i=t.const.map(p=>s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:_n}),parameters:[s.valueToExpression({value:p})]}));return s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"tuple"})}),parameters:[s.arrayLiteralExpression({elements:i})]})}let n=[];for(let i of t.items??[])n.push(ie({plugin:e,schema:i,state:r}));return s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"tuple"})}),parameters:[s.arrayLiteralExpression({elements:n})]})},zl=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"undefined"})})}),Ms=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"unknown"})})}),Ql=e=>s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:s.identifier({text:"void"})})}),Ja=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:Ll({plugin:e,schema:t,state:r})};case "boolean":return {expression:Dl({schema:t})};case "enum":return {expression:Vl({schema:t})};case "integer":case "number":return {expression:Bl({schema:t})};case "never":return {expression:_l()};case "null":return {expression:Kl()};case "object":return Wl({plugin:e,schema:t,state:r});case "string":return {expression:Hl({plugin:e,schema:t})};case "tuple":return {expression:Ul({plugin:e,schema:t,state:r})};case "undefined":return {expression:zl()};case "unknown":return {expression:Ms()};case "void":return {expression:Ql()}}},ie=({$ref:e,identifier:t,optional:r,plugin:n,schema:o,state:i})=>{let a=n.context.file({id:We}),p,c,m=t;if(e&&(i.circularReferenceTracker.add(e),m||(m=a.identifier({$ref:e,case:i.nameCase,create:true,nameTransformer:i.nameTransformer,namespace:"value"}))),o.$ref){let f=i.circularReferenceTracker.has(o.$ref),l=a.identifier({$ref:o.$ref,case:i.nameCase,nameTransformer:i.nameTransformer,namespace:"value"});if(!l.name){let u=n.context.resolveIrRef(o.$ref);c=ie({$ref:o.$ref,plugin:n,schema:u,state:i}),l=a.identifier({$ref:o.$ref,case:i.nameCase,nameTransformer:i.nameTransformer,namespace:"value"});}if(l.name){let u=s.identifier({text:l.name});f?(c=s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:vl}),parameters:[s.arrowFunction({statements:[s.returnStatement({expression:u})]})]}),i.hasCircularReference=true):c=u;}}else if(o.type){let f=Ja({plugin:n,schema:o,state:i});p=f.anyType,c=f.expression,n.config.metadata&&o.description&&(c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:El}),parameters:[s.stringLiteral({text:o.description})]}));}else if(o.items)if(o=ne({schema:o}),o.items){let f=o.items.map(l=>ie({plugin:n,schema:l,state:i}));if(o.logicalOperator==="and"){let l=o.items[0];l.logicalOperator==="or"||l.type&&l.type!=="object"?c=s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:Nl}),parameters:f}):(c=f[0],f.slice(1).forEach(u=>{c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:jl}),parameters:[u]});}));}else c=s.callExpression({functionName:s.propertyAccessExpression({expression:q,name:ep}),parameters:[s.arrayLiteralExpression({elements:f})]});}else c=ie({plugin:n,schema:o,state:i});else {let f=Ja({plugin:n,schema:{type:"unknown"},state:i});p=f.anyType,c=f.expression;}if(e&&i.circularReferenceTracker.delete(e),c&&(o.accessScope==="read"&&(c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:ql})})),r&&(c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:$l})})),o.default!==void 0)){let f=o.type==="integer"&&o.format==="int64",l=wr({isBigInt:f,value:o.default});l&&(c=s.callExpression({functionName:s.propertyAccessExpression({expression:c,name:kl}),parameters:[l]}));}if(m&&m.name&&m.created){let f=s.constVariable({comment:n.config.comments?Re({schema:o}):void 0,exportConst:true,expression:c,name:m.name,typeName:i.hasCircularReference?s.propertyAccessExpression({expression:q,name:p||"ZodTypeAny"}):void 0});a.add(f);}return c},tp=({plugin:e})=>{e.createFile({id:We,identifierCase:e.config.case,path:e.output}).import({module:"zod",name:"z"}),e.forEach("operation","parameter","requestBody","schema",r=>{let n={circularReferenceTracker:new Set,hasCircularReference:false,nameCase:e.config.definitions.case,nameTransformer:e.config.definitions.name};r.type==="operation"?Qa({operation:r.operation,plugin:e,state:n}):r.type==="parameter"?ie({$ref:r.$ref,plugin:e,schema:r.parameter.schema,state:n}):r.type==="requestBody"?ie({$ref:r.$ref,plugin:e,schema:r.requestBody.schema,state:n}):r.type==="schema"&&ie({$ref:r.$ref,plugin:e,schema:r.schema,state:n});});};var Kn={api:za,config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:tp,name:"zod",output:"zod",resolveConfig:(e,t)=>{e.config.dates=t.valueToObject({defaultValue:{offset:false},value:e.config.dates}),e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Data"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Response"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.responses});},tags:["validator"]};var Bn={"@hey-api/client-axios":Wr,"@hey-api/client-fetch":Hr,"@hey-api/client-next":Ur,"@hey-api/client-nuxt":zr,"@hey-api/schemas":gn,"@hey-api/sdk":On,"@hey-api/transformers":Rn,"@hey-api/typescript":An,"@tanstack/angular-query-experimental":$n,"@tanstack/react-query":qn,"@tanstack/solid-query":Mn,"@tanstack/svelte-query":Fn,"@tanstack/vue-query":Ln,fastify:Dn,"legacy/angular":Qr,"legacy/axios":Xr,"legacy/fetch":Jr,"legacy/node":Gr,"legacy/xhr":Zr,valibot:Vn,zod:Kn};var rp=["@hey-api/typescript","@hey-api/sdk"],Jl=({userPlugins:e,userPluginsConfig:t})=>{let r=new Set,n=new Set,o={},i=a=>{if(r.has(a))throw new Error(`Circular reference detected at '${a}'`);if(n.has(a))return;r.add(a);let p=Bn[a],c=t[a];if(!p&&!c)throw new Error(`unknown plugin dependency "${a}" - do you need to register a custom plugin with this name?`);let m={...p,...c,config:{...p?.config,...c?.config},dependencies:new Set([...p?.dependencies||[],...c?.dependencies||[]])};if(m.resolveConfig){let f={pluginByTag:(l,u={})=>{let{defaultPlugin:d,errorMessage:g}=u;for(let h of e){let S=Bn[h]||t[h];if(S&&S.tags?.includes(l)&&h!==a)return h}if(d){let h=Bn[d]||t[d];if(h&&h.tags?.includes(l)&&d!==a)return d}throw new Error(g||`missing plugin - no plugin with tag "${l}" found`)},valueToObject:St};m.resolveConfig(m,f);}for(let f of m.dependencies)i(f);r.delete(a),n.add(a),o[a]=m;};for(let a of e)i(a);return {pluginOrder:Array.from(n),plugins:o}},Gl=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e.tags&&e.tags.includes("client"),np=e=>{let t={},r=rp;e.plugins&&(e.plugins=e.plugins.filter(o=>typeof o=="string"&&o||typeof o!="string"&&o.name),e.plugins.length===1&&Gl(e.plugins[0])?r=[...rp,...e.plugins]:r=e.plugins);let n=r.map(o=>{if(typeof o=="string")return o;let i=o.name;return i&&(o.handler?t[i]=o:(t[i]={config:{...o}},delete t[i].config.name)),i}).filter(Boolean);return Jl({userPlugins:n,userPluginsConfig:t})};var eu=async e=>{let t;if(e?.configFile){let i=e.configFile.split(".");t=i.slice(0,i.length-1).join(".");}let{config:r}=await c12.loadConfig({configFile:t,name:"openapi-ts"}),n=Array.isArray(e)?e:Array.isArray(r)?r.map(i=>zn(i,e)):[zn(r,e)],o=[];for(let i of n){let{base:a,configFile:p="",dryRun:c=false,experimentalParser:m=true,exportCore:f=true,name:l,request:u,useOptions:d=true}=i,g=[],h=_s(i);h.level==="debug"&&console.warn("userConfig:",i);let S=Vs(i),b=Ks(i),L=Bs(i);S.path||g.push(new Error("missing input - which OpenAPI specification should we use to generate your output?")),b.path||g.push(new Error("missing output - where should we generate your output?")),d||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),b.path=Wt__default.default.resolve(process.cwd(),b.path);let C;try{C=np(i);}catch(w){g.push(w),C={pluginOrder:[],plugins:{}};}let v=Ls({...C,base:a,configFile:p,dryRun:c,experimentalParser:m,exportCore:false,input:S,logs:h,name:l,output:b,parser:L,request:u,useOptions:d});v.exportCore=_(v)?f:false,h.level==="debug"&&console.warn("config:",v),o.push({config:v,errors:g});}return o};var Hn=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[o,i]of n)if(i===null)t.delete(o);else if(Array.isArray(i))for(let a of i)t.append(o,a);else i!==void 0&&t.set(o,typeof i=="object"?JSON.stringify(i):i);}return t};var mu=async({fetchOptions:e,inputPath:t,timeout:r,watch:n})=>{let o=new jsonSchemaRefParser.$RefParser,i=jsonSchemaRefParser.getResolvedInput({pathOrUrlOrSchema:t}),a,p,c;if(i.type==="url"){if(n.lastValue&&n.isHeadMethodSupported!==false){try{let f=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"HEAD",...e,headers:Hn(e?.headers,n.headers)},timeout:r,url:i.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok&&n.isHeadMethodSupported)return {error:"not-ok",response:c};if(n.isHeadMethodSupported===void 0&&(n.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(p===void 0){let f=c.headers.get("ETag");f&&(p=f!==n.headers.get("If-None-Match"),p&&n.headers.set("If-None-Match",f));}if(p===void 0){let f=c.headers.get("Last-Modified");f&&(p=f!==n.headers.get("If-Modified-Since"),p&&n.headers.set("If-Modified-Since",f));}if(p===false)return {error:"not-modified",response:c}}try{let f=await jsonSchemaRefParser.sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:i.path});if(f.response.status>=300)return {error:"not-ok",response:f.response};c=f.response;}catch(f){return {error:"not-ok",response:new Response(f.message)}}if(!c.ok)return {error:"not-ok",response:c};if(a=c.body?await c.arrayBuffer():new ArrayBuffer(0),p===void 0){let f=new TextDecoder().decode(a);p=f!==n.lastValue,n.lastValue=f;}}else n.lastValue?p=false:n.lastValue=i.type;return p===false?{error:"not-modified",response:c}:{data:await o.bundle({arrayBuffer:a,pathOrUrlOrSchema:void 0,resolvedInput:i})}};
exports.getSpec=mu;exports.initConfigs=eu;exports.parseOpenApiSpec=lf;//# sourceMappingURL=internal.cjs.map
//# sourceMappingURL=internal.cjs.map